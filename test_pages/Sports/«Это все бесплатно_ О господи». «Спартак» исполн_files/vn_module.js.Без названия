/*! v2.23.00 built Thu Sep 26 2019 12:18:51 GMT+0300 (MSK) */
!function(t){function e(i){if(o[i])return o[i].exports;var r=o[i]={i:i,l:!1,exports:{}};t[i].call(r.exports,r,r.exports,e);r.l=!0;return r.exports}var o={};e.m=t;e.c=o;e.d=function(t,o,i){e.o(t,o)||Object.defineProperty(t,o,{configurable:!1,enumerable:!0,get:i})};e.n=function(t){var o=t&&t._?function(){return t.default}:function(){return t};e.d(o,"a",o);return o};e.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)};e.p="";e(e.s=23)}([function(t,e,o){"use strict";function i(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"black",o=arguments[2],i=A[t]||"";if(o)if(~o.indexOf(":"))i+=";"+o;else{e=o;~i.indexOf(y)||(i+=y)}return i&&i.replace("{{color}}",e)||""}o.d(e,"a",function(){return b});o.d(e,"c",function(){return S});o.d(e,"d",function(){return m});var r,n=o(8),a={NONE:0,ERROR:1,WARN:2,LOG:3,TRACK:4,TRACE:5},s=Math.random().toString(36).substring(2,5),l=function(t){return Object.keys(a).find(function(e){return a[e]==t})},d=window.location.search;try{d=window.top.location.search}catch(t){}var c=/[?&]vn_debug\b(?:=(\d+))?/.exec(d),u=c&&c[1]||null,h=void 0,p=void 0;if(null!==u){h=" logger: vn_debug="+u+" is using and saved to localStorage";Object(n.d)("logLevel",u)}else{u=Object(n.b)("logLevel")||a.NONE;u&&(p=" logger: vn_debug("+u+") was restored from localStorage")}var f=[],g=function(){return"["+(new Date).toISOString().slice(11,-1)+"] ("+s+")"},m=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:g;return window.vnLog||function(t,o,i){var r="%c "+e()+o;f.push(r)}},v={REGULAR:0,HIGHLIGHT:1,IMPORTANT:2},b=function(t,e){var o=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];e=e||m(t);o&&e(a.LOG," Videonow logger started with log level "+t+" ("+l(t)+") v2.23.00 built "+new Date(1569489530757),"font-weight: bold");return{none:function(){},error:function(t){return e(a.ERROR,t,i(arguments.length>1&&void 0!==arguments[1]?arguments[1]:v.IMPORTANT,"red",arguments[2]))},warn:function(t){return e(a.WARN,t,i(arguments.length>1&&void 0!==arguments[1]?arguments[1]:v.HIGHLIGHT,"red",arguments[2]))},log:function(t){var o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:v.REGULAR,r=arguments[2];return e(a.LOG,t,i(o,o===v.HIGHLIGHT?"green":"#333",r))},track:function(t){return e(a.TRACK,t,i(arguments.length>1&&void 0!==arguments[1]?arguments[1]:v.HIGHLIGHT,"darkblue",arguments[2]))},trace:function(t){var o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:v.HIGHLIGHT,r=arguments[2];return e(a.TRACE,t,i(o,o>v.HIGHLIGHT?"#aaa":"lightgray",r))},archive:f}},y="color:{{color}}",A=(r={},r[v.REGULAR]="",r[v.HIGHLIGHT]=y,r[v.IMPORTANT]=y+";font-weight:bold",r),w=window.videonow=window.videonow||{};if(!w.logger){var _=b(u,null);h&&_.warn(h,2,"color:#ff5722;font-size:1.5em;font-weight:bold");p&&_.warn(p,2,"color:#ff5722; font-size:1.5em");w.logger=_}e.b=w.logger;var S=u},function(t,e,o){"use strict";function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(t,e){try{return t.top.location.href}catch(t){}try{if(e.referrer)return e.referrer}catch(t){}try{var o=t.location.ancestorOrigins;if(o.length>0)return o[o.length-1]}catch(t){}return null}function n(t,e){t||(t=window);e||(e=t.document);return r(t,e)||t.location.href}function a(t,e){var o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;o||(o=t);var i=document.documentElement,r=null,n=null,a=null,s=null;try{r=o.offsetHeight||o.innerHeight||window.innerHeight;n=o.innerWidth||window.innerWidth;a=!isNaN(o.scrollTop)&&o.scrollTop||(window.pageYOffset||i.scrollTop)-(i.clientTop||0);s=a+r}catch(t){w.b.error(M+" getModuleDimensions() "+t+" ")}return{viewportHeight:r,viewportWidth:n,viewportTop:a,viewportBottom:s,moduleTop:e.getBoundingClientRect().top+(t.getBoundingClientRect&&t.getBoundingClientRect().top||0)}}function s(t,e,o,i){t&&Object(y.c)(t,{width:B(e.width),height:B(e.height)});if(o){Object(y.c)(o,{width:B(e.width),height:B(e.height)});var r=-i.width/2+(i.width-e.width)/2,n=-i.height/2+(i.height-e.height)/2;Object(y.c)(o,{marginLeft:B(r),marginTop:B(n)})}}function l(t){if(!Object(y.p)(t))return{};var e=getComputedStyle(t),o=e.paddingTop,i=e.paddingRight,r=e.paddingBottom,n=e.paddingLeft,a=e.marginTop,s=e.marginRight,l=e.marginBottom,d=e.marginLeft,c=e.borderTopWidth,u=e.borderRightWidth,h=e.borderBottomWidth,p=e.borderLeftWidth,f=t.getBoundingClientRect(),g=f.width,m=f.height;c=parseFloat(c)||0;u=parseFloat(u)||0;h=parseFloat(h)||0;p=parseFloat(p)||0;o=parseFloat(o)||0;i=parseFloat(i)||0;r=parseFloat(r)||0;n=parseFloat(n)||0;a=parseFloat(a)||0;s=parseFloat(s)||0;l=parseFloat(l)||0;d=parseFloat(d)||0;var v=t.clientWidth,b=t.clientHeight,A=t.offsetHeight,w=t.offsetWidth,_=function(t){return t<0?0:t};return{paddingTop:o,paddingRight:i,paddingBottom:r,paddingLeft:n,marginTop:a,marginRight:s,marginBottom:l,marginLeft:d,top:o+_(a),right:i+_(s),bottom:r+_(l),left:n+_(d),clientWidth:v,clientHeight:b,width:g,height:m,offsetHeight:A,offsetWidth:w,insideWidth:w-n-i,insideHeight:A-o-r,outsideWidth:w?w+_(d)+_(s):Math.max(_(d),_(s)),outsideHeight:A?A+_(a)+_(l):Math.max(_(a),_(l)),borderTopWidth:c,borderRightWidth:u,borderBottomWidth:h,borderLeftWidth:p,rect:t.getBoundingClientRect()}}function d(t,e){function o(t){return{top:t.top,bottom:t.bottom,left:t.left,right:t.right}}var i=t.getBoundingClientRect(),r=i.bottom-i.top,n=[o(i)];n[0].element=t;p(window,function(t){if(t){var e=o(t.getBoundingClientRect());e.win=t;n.push(e)}});n.reverse();var a=n[0].win&&m(n[0].win),s=a&&a.clientWidth||null,l=a&&a.clientHeight||null,d=l?l+n[0].top:null,c=s?s+n[0].left:null;n.reduce(function(t,e){e.bottom+=t.top;e.top+=t.top;e.right+=t.left;e.left+=t.left;return e});var u=Math.max.apply(null,n.map(function(t){return t.top})),h=Math.max.apply(null,n.map(function(t){return t.left})),f=Math.min.apply(null,n.map(function(t){return t.bottom}));null!==d&&(f=Math.min(f,d));var g=Math.min.apply(null,n.map(function(t){return t.right}));null!==c&&(g=Math.min(g,c));var v={top:u,left:h,bottom:f,right:g},b=(i.bottom-i.top)*(i.right-i.left),y=(v.bottom-v.top)*(v.right-v.left),A=y<=0?0:y/b,w=s*l;if(!y&&!r){var _=n.filter(function(t){return t.element}),S=n.filter(function(t){return!t.element});_.length&&S.length&&S.some(function(t){return t.top<=_[0].top})&&S.some(function(t){return t.bottom>=_[0].bottom})&&(A=1)}var M={intersectionRatio:A,visibility:100*A^0,moduleSquare:b,screenSquare:w,relationSize:b/w*100^0,boundingClientRect:i};e&&e(M);return M}function c(t,e,o){function i(t){t.forEach(function(t){var o=t.boundingClientRect,i=t.rootBounds,r=t.intersectionRatio,n=b(o.width)*b(o.height),a=i?i.width*i.height:null;e({intersectionRatio:r,visibility:100*r^0,moduleSquare:n,screenSquare:a,relationSize:a?n/a*100^0:null,boundingClientRect:o})})}var r=_({continueWatch:!1,threshold:[]},o),n=r.threshold,a=new IntersectionObserver(i.bind(this),{threshold:n.sort()});a.observe(t);return a}function u(t){function e(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;return(e&&Promise.resolve(e)||window.IntersectionObserver&&(e=d.call(null,t))&&Promise.resolve(e)||Promise.resolve(null)).catch(function(t){w.b.error(M+".getVisibility() "+(t&&(t.message||t)));return null})}var o=this,i=new Promise(function(t){return setTimeout(t,100,null)}),r=new Promise(function(e){window.IntersectionObserver?c.call(o,t,e):d.call(null,t,e)});return Promise.race([i,r]).then(function(t){return e.call(o,t)}).catch(function(t){w.b.error(M+".getVisibility() "+(t&&(t.message||t)));return e.call(o)})}function h(t,e,o){var i=_({threshold:[],continueWatch:!0,registerHandle:function(){throw Error(M+" watchVisibility() registerHandle must be defined")}},e),r=i.threshold,n=i.registerHandle,a=i.continueWatch;w.b.trace(M+".watchVisibility() window.IntersectionObserver="+window.IntersectionObserver+" threshold=["+r.join(",")+"] ");if(window.IntersectionObserver)return c.call(this,t,o,{continueWatch:a,threshold:r});var s=n(d.bind(null,t,o)),l=s.handler,u=s.event,h=s.scrollNode;d.call(null,t,o);return{disconnect:function(){w.b.trace(M+" watchVisibility():disconnect() event="+u+" element="+t,1,"pink");h&&h.removeEventListener(u,l)}}}function p(t,e){for(var o=t,i=t;;){try{o=i.parent&&i.parent.document||i.parent&&i.parent.contentWindow?i.parent:i;o=i;i=i.parent}catch(t){e&&e(null);return m(i)}e&&e(g(i,o));if(i===o)return m(o)}}function f(t){try{if(t.top&&m(t.top))return t.top}catch(t){return null}return null}function g(t,e){if(!t||!t.frames)return null;if(t===e)return m(t);var o=m(t).querySelectorAll("iframe"),i=[].filter.call(o,function(t){return t.contentWindow===e});return i.length?i[0]:null}function m(t){return t&&t.document&&t.document.documentElement||t&&t.contentWindow&&t.contentWindow.document.documentElement||t}function v(t,e,o){var i=Error(e+" ("+(t&&t.message)+")");o?i.code=o:t&&t.code&&(i.code=t.code);t&&t.name&&(i.name=t.name);return i}function b(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:.1,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return Math.abs(t)>=e?t:o}o.d(e,"c",function(){return O});o.d(e,"g",function(){return I});o.d(e,"e",function(){return E});o.d(e,"t",function(){return D});o.d(e,"o",function(){return C});o.d(e,"m",function(){return x});o.d(e,"C",function(){return T});o.d(e,"E",function(){return P});o.d(e,"D",function(){return j});o.d(e,"h",function(){return k});o.d(e,"z",function(){return R});o.d(e,"b",function(){return F});o.d(e,"v",function(){return N});o.d(e,"F",function(){return V});o.d(e,"A",function(){return L});o.d(e,"B",function(){return z});o.d(e,"y",function(){return W});o.d(e,"x",function(){return H});o.d(e,"r",function(){return U});o.d(e,"u",function(){return B});e.p=r;e.k=n;e.l=a;e.d=s;e.j=l;e.q=u;e.H=h;e.G=p;e.n=f;e.i=m;o.d(e,"a",function(){return q});e.f=v;o.d(e,"s",function(){return X});o.d(e,"w",function(){return G});var y=o(2),A=o(3),w=o(0),_=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var o=arguments[e];for(var i in o)Object.prototype.hasOwnProperty.call(o,i)&&(t[i]=o[i])}return t},S="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},M="utils",O=function(t,e){return t.reduce(function(t,e){return t.then(e)},Promise.resolve(e))},I=function(t,e){var o=t&&t.length;if(!o)return Promise.resolve(!1);var i=[];return new Promise(function(r,n){var a=0,s=function(t){if(t>=o)if(i.length){var e=i.filter(function(t){return t.fatal});n(e.length&&e[0]||i[0])}else r()};t.forEach(function(t){t(e).then(function(){return s(++a)}).catch(function(t){i.push(t);s(++a)})})})},E=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;return Math.max(e,Math.min(o,t))},D=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:window.document;return new Promise(function(o,i){if(!t)throw new Error(M+".loadScript("+t+", "+e+") Invalid url");var r=e.getElementsByTagName("head")[0],n=e.createElement("script");n.src=t;n.type="text/javascript";n.addEventListener("load",o);n.addEventListener("error",i);r.appendChild(n)})},C=function(t,e,o){var i=t&&e?t.querySelector(e):t,r=i&&i.textContent;return"string"==typeof r?r.trim():o},x=function(t,e,o){var i=C(t,e,o);try{return JSON.parse(i)}catch(t){return i}},T=function(t){return new Promise(function(e){var o=t.startsWith("data:")?"":(~t.indexOf("?")?"#":"?vn=")+Math.random().toString(10).substring(2,5),i=document.createElement("img");i.onload=e;i.onerror=e;i.src=""+t+o})},P=function(t,e){var o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:function(t){return t},i=e?t.querySelectorAll(e):[t];return Array.from(i).map(function(t){return T(o(C(t)))})},j=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:function(t){return t};return t&&t.map(function(t){return T(e(t))})},k=function t(){for(var e=arguments.length,o=Array(e>1?e-1:0),i=1;i<e;i++)o[i-1]=arguments[i];var r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};r&&o.forEach(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Object.keys(e).forEach(function(o){var i=e[o];r[o]=!i||Array.isArray(i)||"object"!==(void 0===i?"undefined":S(i))||X(i)||Object(y.p)(i)?i:t(Object.prototype.hasOwnProperty.call(r,o)&&r[o]||(r[o]={}),i)})});return r},R=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",e=t.split("?")[1]||"",o=e?e.split("&"):[];return Object.keys(o).reduce(function(t,e){var i=o[e],r=i.split("="),n=r[0]&&decodeURIComponent(r[0]),a=r[1]&&decodeURIComponent(r[1]);t[n]=a&&a.replace(/\+/g," ");return t},{})},F=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},o=[];Object.keys(e).forEach(function(t){var i=e[t],r=[encodeURIComponent(t)];null!==i&&void 0!==i&&r.push(encodeURIComponent(i));o.push(r.join("="))});var i=t.indexOf("?")>-1?"&":"?";return o.length?t+i+o.join("&"):t},N=function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(t)if(A.e||e){var o=document.createElement("a");o.setAttribute("href",t);o.setAttribute("target","_blank");var i=document.createEvent("MouseEvents");i.initEvent("click",!0,!0);o.dispatchEvent(i)}else{w.b.trace(M+".openUrl() window.open('"+t+"')");window.open(t,"_blank")}else w.b.warn(M+".openUrl("+t+") invalid url")},V=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return new Promise(function(o,i){if(!t)throw new Error("Invalid url ("+t+")");var r=e.overrideMimeType,n=e.options,a=e.body,s=e.timeout,l=void 0===s?5e3:s,d=e.requestHeaders,c=void 0===d?{}:d,u=e.method,h=void 0===u?"GET":u,p=new XMLHttpRequest;p.addEventListener("load",o);p.addEventListener("error",i);p.addEventListener("timeout",i);p.withCredentials=!0;r&&p.overrideMimeType(r);n&&k(p,n);p.open(h,t,!0);p.timeout=l;c&&Object.getOwnPropertyNames(c).forEach(function(t){p.setRequestHeader(t,c[t])});p.send(a)})},L=function(t){if(!t)return null;if(window.DOMParser){var e=new window.DOMParser,o=e.parseFromString(t,"application/xml");if(!o||o.querySelector("parsererror")){w.b.warn(M+".parseXml() Parse error");return null}return o}if(void 0!==window.ActiveXObject&&new window.ActiveXObject("Microsoft.XMLDOM")){var i=new window.ActiveXObject("Microsoft.XMLDOM");i.async="false";i.loadXML(t);return i}w.b.warn(M+".parseXml() XML Parser not available");return null},z=function(t){if(!t)return null;var e=t.querySelectorAll("options > option");return Array.from(e).reduce(function(t,e){t[e.getAttribute("name")]=C(e);return t},{})},W=function(t){var e=/^\s*(?:(?:(\d\d):)?(\d\d):)?(\d\d)(?:[.,](\d+))?\s*$/.exec(t);return e?60*(+e[1]||0)*60+60*(+e[2]||0)+(+e[3]||0)+ +("0."+(e[4]||0)):1/0},H=function(t){var e=/^\s*([\d.]+)%\s*$/.exec(t);return e?(+e[1]||0)/100:null},U=function(t){return t.mozHasAudio||t.webkitAudioDecodedByteCount||t.audioTracks&&t.audioTracks.length},B=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return 0===(""+t).length||/%|px/.test(""+t)?""+t:t+"px"},q=function t(){i(this,t);var e=null,o=null;this.promise=new Promise(function(t,i){e=t;o=i});this.resolve=e;this.reject=o},X=function(t){return!t||Array.isArray(t)&&!t.length||Object.keys&&!Object.keys(t).length},G=function(t){return t&&(!0===t||"true"===t||"1"===t||1===t)}},function(t,e,o){"use strict";function i(){var t=!1;if(window!==window.top&&window.document.documentElement.clientHeight>0){t=!0;n.b.log(u+".initModuleNode(). Module entered inside iframe and can not change height of the document.",1)}return t}function r(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:window,e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;return new Promise(function(i){var r=t.document,n=r.documentElement.querySelectorAll("script"),a=[];n&&n.length&&Array.from(n).forEach(function(t){var o=t.parentNode,i=r.createElement("script");t.attributes&&Array.from(t.attributes).forEach(function(t){i.setAttribute(t.name,t.value)});t.src&&a.push(function(){!function(t,e,o){e.src=o;t.appendChild(e)}(o,i,t.src)});t.innerHTML&&e&&a.push(function(){!function(t,e,o){e.innerHTML=o;t.appendChild(e)}(o,i,t.innerHTML)});o.removeChild(t)});a.length?setTimeout(function(){a.forEach(function(t){return t()});i()},o):i()})}o.d(e,"d",function(){return h});o.d(e,"p",function(){return p});o.d(e,"u",function(){return f});o.d(e,"c",function(){return g});o.d(e,"r",function(){return m});o.d(e,"e",function(){return v});o.d(e,"b",function(){return b});o.d(e,"n",function(){return y});o.d(e,"a",function(){return _});o.d(e,"w",function(){return S});o.d(e,"s",function(){return M});o.d(e,"q",function(){return O});o.d(e,"k",function(){return E});o.d(e,"v",function(){return D});o.d(e,"j",function(){return C});o.d(e,"i",function(){return x});o.d(e,"h",function(){return T});o.d(e,"m",function(){return P});o.d(e,"f",function(){return j});o.d(e,"l",function(){return k});o.d(e,"g",function(){return R});o.d(e,"o",function(){return F});e.t=r;var n=o(0),a=o(9),s=o.n(a),l=o(1),d=this,c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},u="DOM",h=function(t){t.preventDefault();t.stopPropagation()},p=function(t,e){return t&&("object"===(void 0===t?"undefined":c(t))||"function"==typeof t)&&"string"==typeof t.innerHTML&&(!e||e.toUpperCase()===t.tagName)},f=function(t){t&&t.parentNode&&t.parentNode.removeChild(t);return null},g=function(t,e){var o=[].concat(t).filter(function(t){return t&&t.style});Object.keys(e).forEach(function(t){var i=e[t];void 0!==i&&o.forEach(function(e){var o=e.style;o[t]=i;if(-1!==["transform","transition","userSelect"].indexOf(t)){var r=""+t[0].toUpperCase()+t.substr(1);["Webkit","Moz","Ms","O"].forEach(function(t){o[""+t+r]=i})}})});return t},m=function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(!p(t,"video")&&!p(t,"audio"))return!1;n.b.trace("mediaSafePlay() element.volume="+t.volume+" element.muted="+t.muted,2,"pink");var o=t.play();return void 0!==o?o.then(function(){n.b.trace(u+".mediaSafePlay() Autoplay started! element.volume="+t.volume+" element.muted="+t.muted);return o}).catch(function(i){if(e){n.b.warn(u+".mediaSafePlay() element.volume="+t.volume+" element.muted="+t.muted+" error:"+(i.message||i));throw i}return o}):void 0},v=function(t,e,o,i){var r=document.createElement(t);switch(void 0===e?"undefined":c(e)){case"object":g(r,e);break;case"string":r.className=e}r.innerHTML=o||"";r.addEventListener("click",i);return r},b=function(t,e,o,i,r){return t.appendChild(v(e,o,i,r))},y=function(t,e,o,i,r){return t.parentElement.insertBefore(v(e,o,i,r),t.nextSibling)},A=function(t){return t.replace(/([A-Z])/g,function(t){return"-"+t.toLowerCase()})},w=function(t,e){var o=t.ownerDocument||t.document,i=o.createElement("style");i.type="text/css";i.styleSheet?i.styleSheet.cssText=e:i.appendChild(o.createTextNode(e));o.head.appendChild(i)},_=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},o=[];Object.keys(e).forEach(function(t){var i=e[t],r=[];Object.keys(i).forEach(function(t){var e=i[t],o=A(t);r.push(o+":"+e)});var n=t+"{"+r.join(";")+"}";o.push(n)});var i=o.join("");w(t,i)},S=function(t,e){t&&"object"===(void 0===e?"undefined":c(e))&&Object.keys(e).forEach(function(o){return t.setAttribute(o,e[o])})},M=function(t){if(!t)return{top:0,left:0};var e=t.getBoundingClientRect(),o=document,i=o.body,r=o.documentElement,n=window.pageYOffset||r.scrollTop||i.scrollTop,a=window.pageXOffset||r.scrollLeft||i.scrollLeft;return{top:e.top+n-(r.clientTop||i.clientTop||0),left:e.left+a-(r.clientLeft||i.clientLeft||0)}},O=function(t,e){var o=M(t),i=e.offsetParent,r=M(i||document.body),n=r.top,a=r.left;o.top-=n;o.left-=a;return o},I=function(t,e){return(" "+t.className+" ").indexOf(" "+e+" ")>-1},E=function(t,e){for(;t;){if(I(t,e))return!0;t=t.parentNode}return!1},D=function(t,e){var o=Element.prototype;return(o.matches||o.webkitMatchesSelector||o.mozMatchesSelector||o.msMatchesSelector||function(t){return-1!==[].indexOf.call(document.querySelectorAll(t),d)}).call(t,e)},C=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:document.body,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;if(!t){n.b.warn(u+".getElementsByComplexSelector: Invalid complexSelector ("+t+")");return[]}if(!p(e)){n.b.warn(u+".getElementsByComplexSelector: Invalid lookupNode ("+e+")");return[]}var i=[];t.split("|").some(function(t){if(D(e,t)){i=[e];return!0}var r=e.querySelectorAll(t);if(r.length>0){if(!(r.length<o)){i=Array.from(r);return!0}n.b.trace(u+".getElementsByComplexSelector: Found target nodes "+r.length+" < "+o)}return!1});return i},x=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"100%",o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:document.body,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1;if(!t)return null;if(p(t)){n.b.trace(u+".getElementFromOptions() Returning provided DOM node");return t}if("string"==typeof t){var r=C(t,o,i),a=parseInt(e,10)/100;if(isNaN(a)){n.b.warn(u+".getElementFromOptions() Invalid playerSelectorPercent ("+a+")");return null}return r[a?Math.ceil(r.length*a)-1:0]}n.b.warn(u+".getElementFromOptions() Invalid selector ("+t+")");return null},T=function(t,e){var o=t.parentNode,i=getComputedStyle(t),r=o.style.display;o.style.display="none";var n=i.getPropertyValue(e);o.style.display=r;return n},P=function(t){var e=t.initScriptParentNode,o=t.lookupNode,r=t.lookupElement,a=t.playerElement,s=t.playerAfter,d=t.playerBefore,c=t.playerSelectorPercent,h=t.playerSelectorTotalMin,f=t.playerDefaultClass,m=t.transitionDuration,v=t.extraSelector,y=t.ignoreCreatePlayerElement,A=t.forceFillingBoundariesModel;o=o||x(r)||document.body;var w=i(),_=Object(l.w)(A)||w,S=void 0,M=void 0,O=void 0,I=void 0,E=document.createElement("div");if(a||s||d){S=x(a,c,o,h);if(p(S))S.appendChild(E);else{a&&n.b.trace(u+".initModuleNode() playerElement not found ("+a+")");O=x(s,c,o,h);if(p(O))O.parentNode.insertBefore(E,O.nextSibling);else{n.b.trace(u+".initModuleNode() playerAfter not found ("+s+")");M=x(d,c,o,h);if(p(M))M.parentNode.insertBefore(E,M);else{n.b.trace(u+".initModuleNode() playerBefore not found ("+d+")");O=x(v,c,o,h);if(p(O)){O.parentNode.insertBefore(E,O.nextSibling);n.b.trace(u+".initModuleNode(). inserting after extraSelector ("+v+")")}else{if(!y)throw new Error(u+" Could not create player element");document.body.appendChild(E)}}}}}else if(e&&e.tagName&&"HEAD"!==e.tagName){e.appendChild(E);n.b.log(u+".initModuleNode() moduleNode was initialized at parent node of init script. "+(w?"Module entered inside iframe and can not change height of the document.":""),1);I=e}else{if(!y)throw new Error(u+" Could not create player element");document.body.appendChild(E)}g(E,{boxSizing:"content-box",overflow:"hidden",height:0,transition:"height "+m+"ms ease-out"});f&&E.classList.add(f);return{lookupNode:o,moduleNode:E,moduleInnerNode:b(E,"div",{position:"absolute",top:0,right:0,bottom:0,left:0,fontSize:0,lineHeight:0}),boundariesExists:_,insideIframe:w,elementNode:S,beforeNode:M,afterNode:O,widthNode:I}},j=function(t){return b(t,"div",{position:"absolute",transform:"translate(-50%, -50%)",top:"50%",left:"50%"},s.a)},k={position:"absolute",visibility:"hidden"},R=function(t,e){for(var o=[];t.parentNode;){o.push(t.parentNode);t=t.parentNode;if(t===e)return o}return o},F=function(t,e){for(var o=t.parentElement;;){if(!o)return!1;if(o===e)return!0;o=o.parentElement}}},function(t,e,o){"use strict";o.d(e,"e",function(){return g});o.d(e,"a",function(){return m});o.d(e,"g",function(){return v});o.d(e,"c",function(){return b});o.d(e,"f",function(){return y});o.d(e,"d",function(){return A});o.d(e,"b",function(){return _});var i=navigator,r=i.userAgent,n=i.vendor,a=i.plugins,s=i.appVersion,l=window,d=l.opera,c=l.MSStream,u=window.VN&&window.VN.debug&&window.VN.debug.userAgent||r||n||d,h=/iPod/.test(u)&&!c,p=/iPhone/.test(u)&&!c,f=/iPad/.test(u)&&!c,g=h||p||f,m=/android/i.test(u),v=/safari/i.test(u)&&/apple/i.test(n),b=/firefox/i.test(u),y=/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino|android|ipad|playbook|silk/i.test(u)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw-(n|u)|c55\/|capi|ccwa|cdm-|cell|chtm|cldc|cmd-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc-s|devi|dica|dmob|do(c|p)o|ds(12|-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(-|_)|g1 u|g560|gene|gf-5|g-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd-(m|p|t)|hei-|hi(pt|ta)|hp( i|ip)|hs-c|ht(c(-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i-(20|go|ma)|i230|iac( |-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|-[a-w])|libw|lynx|m1-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|-([1-8]|c))|phil|pire|pl(ay|uc)|pn-2|po(ck|rt|se)|prox|psio|pt-g|qa-a|qc(07|12|21|32|60|-[2-7]|i-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h-|oo|p-)|sdk\/|se(c(-|0|1)|47|mc|nd|ri)|sgh-|shar|sie(-|m)|sk-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h-|v-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl-|tdg-|tel(i|m)|tim-|t-mo|to(pl|sh)|ts(70|m-|m3|m5)|tx-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas-|your|zeto|zte-/i.test(u.substr(0,4)),A=void 0===a||0===a.length?!("undefined"==typeof ActiveXObject||!new ActiveXObject("ShockwaveFlash.ShockwaveFlash")):a["Shockwave Flash"],w=function(){if(!g)return!1;if("string"!=typeof s)return!1;var t=s.match(/OS (\d+)_(\d+)_?(\d+)?/);return t&&t.length&&t.length>2?parseFloat(t[1]+"."+t[2]):11}(),_=!y||g&&w>10.2,S=!1;document.addEventListener("touchstart",function(){S=!0});document.addEventListener("touchend",function(){S=!1})},function(t,e,o){"use strict";function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function n(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}});e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}o.d(e,"d",function(){return h});o.d(e,"c",function(){return p});o.d(e,"e",function(){return f});o.d(e,"a",function(){return g});var a=o(6),s=o(1),l=o(0),d=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var o=arguments[e];for(var i in o)Object.prototype.hasOwnProperty.call(o,i)&&(t[i]=o[i])}return t},c="Vpaid",u=c;e.b=function(t){function e(){var o=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};i(this,e);var n=o&&o.ancestor&&o.ancestor+":"+c||"Module::"+c,a=o&&(o.logger||o.moduleAPI&&o.moduleAPI.logger)||l.b;a.trace(n+".constructor() options.ancestor="+n);var s=r(this,t.call(this,d({},o,{ancestor:n,logger:a})));s[u]=n;s.options=o;s.logger=a;s.adLinear=!0;s.adWidth=0;s.adHeight=0;s.adExpanded=!1;s.adSkippableState=!0;s.adRemainingTime=0;s.adDuration=0;s.adVolume=1;s.adCompanions="";s.adIcons=!1;return s}n(e,t);e.prototype.getAdLinear=function(){return this.adLinear};e.prototype.getAdWidth=function(){return this.adWidth};e.prototype.getAdHeight=function(){return this.adHeight};e.prototype.getAdAspectRatio=function(){var t=this.getAdWidth(),e=this.getAdHeight();return isNaN(t)||isNaN(e)||0===t?9/16:e/t};e.prototype.getAdExpanded=function(){return this.adExpanded};e.prototype.getAdSkippableState=function(){return this.adSkippableState};e.prototype.getAdRemainingTime=function(){return this.adRemainingTime};e.prototype.getAdDuration=function(){return this.adDuration};e.prototype.getAdElapsedTime=function(){return this.getAdDuration()-this.getAdRemainingTime()};e.prototype.getAdVolume=function(){return this.adVolume};e.prototype.getAdCompanions=function(){return this.adCompanions};e.prototype.getAdIcons=function(){return this.adIcons};e.prototype.handshakeVersion=function(t){return"2.0"};e.prototype.initAd=function(t,e,o,i){var r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{},n=arguments.length>5&&void 0!==arguments[5]?arguments[5]:{};this.adLinear=!0;this.adWidth=t;this.adHeight=e;this.adExpanded=!1;this.adSkippableState=!0;this.adRemainingTime=0;this.adDuration=0;this.adVolume=this.adVolume||0;this.adCompanions="";this.adIcons=!1;this.viewMode=o;this.desiredBitrate=i;this.creativeData=r;this.environmentVars=n;this.useExistsVideoSlot=n.useExistsVideoSlot;this.options=d({},this.options,n.options);return Promise.resolve()};e.prototype.resizeAd=function(t,e){var o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this.viewMode;this.adWidth=t;this.adHeight=e;this.viewMode=o;this.trigger("AdSizeChange")};e.prototype.startAd=function(){this.trigger("AdStarted")};e.prototype.stopAd=function(){this.trigger("AdStopped")};e.prototype.pauseAd=function(){this.trigger("AdPaused")};e.prototype.resumeAd=function(){this.trigger("AdResumed");this.trigger("AdPlaying")};e.prototype.expandAd=function(){this.setAdExpanded(!0)};e.prototype.collapseAd=function(){this.setAdExpanded(!1)};e.prototype.skipAd=function(){this.trigger("AdSkipped")};e.prototype.setAdExpanded=function(t){if(this.adExpanded!==t){this.adExpanded=t;this.trigger("AdExpandedChange")}};e.prototype.setAdSkippableState=function(t){this.logger.none(this[u]+" setAdSkippableState("+t+") prev="+this.adSkippableState);if(this.adSkippableState!==t){this.adSkippableState=t;this.trigger("AdSkippableStateChange");return!0}return!1};e.prototype.setAdVolume=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(this.adVolume!==t){this.adVolume=t;this.trigger("AdVolumeChange");return t}e.forceTrigger&&this.trigger("AdVolumeChange");return null};e.prototype.S=function(){this.logger.trace(this[u]+"._destroy()");t.prototype.S.call(this);this.trigger("AdDestroyed");this.creativeData=null;this.environmentVars=null;this.options=null};e.create=function(){throw new Error("Abstract method call Vpaid.create()")};e.prototype.toString=function(){return"[object "+this.constructor.name+"]"};return e}(a.a);var h=function(t,e){var o=arguments.length>2&&void 0!==arguments[2]&&arguments[2],i=t.querySelectorAll('Ad > InLine > Creatives > Creative > Linear > MediaFiles > MediaFile[type="'+e+'"]');if(!i||!i.length)return null;var r=Array.from(o?i:[i[0]]).map(function(t){return{src:Object(s.o)(t),width:Number(t.getAttribute("width"))||0,height:Number(t.getAttribute("height"))||0,bitrate:Number(t.getAttribute("bitrate"))||0,scalable:"false"!==t.getAttribute("scalable"),maintainAspectRatio:null!==t.getAttribute("maintainAspectRatio")?"true"===t.getAttribute("maintainAspectRatio"):t.getAttribute("maintainAspectRatio"),delivery:t.getAttribute("delivery")}});return o?r:r[0]},p=function(t){return Object(s.o)(t,"Ad>InLine>Creatives>Creative>Linear>Duration")},f=function(t){var e=["handshakeVersion","initAd","startAd","stopAd","skipAd","resizeAd","pauseAd","resumeAd","expandAd","collapseAd"];return t&&e.every(function(e){return"function"==typeof t[e]})},g={GENERAL_LINEAR_ERROR:400,TIMEOUT_OF_MEDIA:402,FAIL_MEDIA_DISPLAY:405,GENERAL_VPAID_ERROR:901,VPAID_JS_ERROR:1010,FORMAT_ERROR:1020,AD_SIZE_ERROR:1030,AD_IMPRESSION_NOT_HAPPENED_ERROR:1040,FAIL_MEDIA_START:3e3}},function(t,e,o){"use strict";function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function n(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}});e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var a=o(6),s=o(0),l=o(2);e.a=function(t){function e(o,n){var a=arguments.length>2&&void 0!==arguments[2]&&arguments[2];i(this,e);var l="::Control["+o+"] ",d=n&&n.getAPI&&n.getAPI().logger||s.b;d.trace(""+l);var c=r(this,t.call(this,{ancestor:l,logger:d}));c.name=o;c.module=n;c.moduleId=l;var u=n.M(o);if(null===u){c.logger.warn(l+" Disabled");throw new Error(l+" disabled")}if(a&&void 0===u)throw new Error(l+" is not available");c.checkBlocked();return c}n(e,t);e.prototype.checkBlocked=function(){(this.module.M(this.name)||{}).remove&&this.ifBlockedAction()};e.prototype.ifBlockedAction=function(){throw new Error(":"+this.moduleId+' is has attribute remove="true"')};e.prototype.S=function(){var e=this.module,o=this.moduleId,i=this.name;this.logger.trace(":"+o+".destroy()");t.prototype.S.call(this);Object(l.u)(e.O(i))};e.prototype.getName=function(){return this.name};return e}(a.a)},function(t,e,o){"use strict";function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function n(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}});e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var a=o(17),s=o(2),l=o(0),d="Managed",c=d;e.a=function(t){function e(){var o=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};i(this,e);var n=o&&o.ancestor&&o.ancestor+":"+d||d,a=o&&(o.logger||o.moduleAPI&&o.moduleAPI.logger)||l.b;a.trace(n+".constrictor()");var s=r(this,t.call(this));s.logger=a;s[c]=n;s.T=[];s.R=[];s.N=[];s.V=[];s.L=[];s.W=[];return s}n(e,t);e.prototype.U=function(t){this.V.push(t);return t};e.prototype.X=function(t){Object(s.u)(t);this.V=this.V.filter(function(e){return e!==t})};e.prototype.Y=function(t,e,o,i){this.logger.trace(this[c]+".addDOMEventListener("+e+")");this.R.push({node:t,name:e,listener:o});t.addEventListener(e,o,i);return o};e.prototype.J=function(t,e,o){this.logger.trace(this[c]+".removeDOMEventListener("+e+")");this.R=this.R.filter(function(i){if(i.node===t&&i.name===e&&i.listener===o){t.removeEventListener(e,o);return!1}return!0})};e.prototype.Q=function(t,e,o){this.logger.trace(this[c]+".addVPAIDEventListener("+e+")");this.T.push({vpaid:t,name:e,listener:o});t.subscribe(o,e);return o};e.prototype.Z=function(t,e,o){this.logger.trace(this[c]+".removeVPAIDEventListener("+e+")");this.T=this.T.filter(function(i){if(i.vpaid===t&&i.name===e&&i.listener===o){t.unsubscribe(o,e);return!1}return!0})};e.prototype.K=function(t,e,o){this.logger.trace(this[c]+".patchMethod("+e+")");var i=t[e];o.$=i;t[e]=o;this.N.push({object:t,method:e});return i.bind(t)};e.prototype.tt=function(t,e){this.logger.trace(this[c]+".restoreMethod("+e+")");this.N=this.N.filter(function(o){if(o.object===t&&o.method===e){t[e]=t[e].$;return!1}return!0})};e.prototype.et=function(){var t=this;this.logger.trace(this[c]+"._removeEventListeners");var e=this.T,o=this.R;if(e.length){this.logger.trace(this[c]+".destroy() Removing VPAID event listeners ("+e.length+")");e.forEach(function(e){t.Z(e.vpaid,e.name,e.listener)})}if(o.length){this.logger.trace(this[c]+".destroy() Removing DOM event listeners ("+o.length+")");o.forEach(function(e){t.J(e.node,e.name,e.listener)})}};e.prototype.S=function(){var t=this;this.logger.trace(this[c]+"._destroy()");var e=this.N,o=this.V,i=this.L,r=this.W;this.et();if(e.length){this.logger.trace(this[c]+".destroy() Restoring patched methods ("+e.length+")");e.forEach(function(e){t.tt(e.object,e.method)})}if(o.length){this.logger.trace(this[c]+".destroy() Removing DOM elements ("+o.length+")");o.forEach(function(t){Object(s.u)(t)})}if(i.length){this.logger.trace(this[c]+".destroy() Removing timeouts ("+i.length+")");i.forEach(function(e){t.ot(e.name)})}if(r.length){this.logger.trace(this[c]+".destroy() Removing destroyableObjects ("+r.length+")");r.forEach(function(e){t.it(e)})}};e.prototype.rt=function(t,e,o){this.logger.none(this[c]+".addTimeout("+t+")");this.ot(t);this.L.push({name:t,timeoutId:setTimeout(e,o)});return e};e.prototype.ot=function(t){this.logger.none(this[c]+".removeTimeout("+t+")");this.L=this.L.filter(function(e){if(e.name===t){clearTimeout(e.timeoutId);return!1}return!0})};e.prototype.nt=function(t){this.logger.none(this[c]+"._addDestroyableObject("+t+")");t&&t.S&&(this.W=t)};e.prototype.it=function(t){this.W=this.W.filter(function(e){if(e===t){e&&e.S&&e.S();return!1}return!0})};return e}(a.a)},function(t,e){var o={};o.EPSILON=1e-6;o.ARRAY_TYPE="undefined"!=typeof Float32Array?Float32Array:Array;o.RANDOM=Math.random;o.ENABLE_SIMD=!1;o.SIMD_AVAILABLE=o.ARRAY_TYPE===Float32Array&&"SIMD"in this;o.USE_SIMD=o.ENABLE_SIMD&&o.SIMD_AVAILABLE;o.setMatrixArrayType=function(t){o.ARRAY_TYPE=t};var i=Math.PI/180;o.toRadian=function(t){return t*i};o.equals=function(t,e){return Math.abs(t-e)<=o.EPSILON*Math.max(1,Math.abs(t),Math.abs(e))};t.exports=o},function(t,e,o){"use strict";function i(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:localStorage;return JSON.parse(e.getItem(n)||"{}")[t]}function r(t,e){var o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:localStorage,i=JSON.parse(o.getItem(n)||"{}");(!(i[t]=e)||!i[t].length)&&delete i[t];o.setItem(n,JSON.stringify(i))}o.d(e,"b",function(){return i});o.d(e,"d",function(){return r});o.d(e,"a",function(){return a});o.d(e,"c",function(){return s});var n="videonow-config",a=function(t){return i(t,sessionStorage)},s=function(t,e){return r(t,e,sessionStorage)}},function(t,e){t.exports='<style>@keyframes videonow-spin{0%{transform:rotate(0deg);-webkit-transform:rotate(0deg)}to{transform:rotate(360deg);-webkit-transform:rotate(360deg)}}</style><svg style="animation:videonow-spin 1s linear infinite" viewBox="0 0 128 128"><path fill="none" stroke="url(#a)" stroke-width="2.77" d="M1252.52 595.235a31.93 31.93 0 0 1-17.5 5.2c-17.7 0-32.07-14.368-32.07-32.064 0-17.694 14.37-32.06 32.07-32.06 15.31 0 28.13 10.756 31.3 25.118" transform="translate(-2164.94 -961.788) scale(1.8048)"/><defs><radialGradient id="a" cx="0" cy="0" r="1" gradientTransform="rotate(-3.67 9382.41 -18979.953) scale(36.57698)" gradientUnits="userSpaceOnUse"><stop offset="0%" stop-color="#79669C" stop-opacity="0"/><stop offset="95%" stop-color="#79669C"/><stop offset="100%" stop-color="#fff"/></radialGradient></defs></svg>'},function(t,e,o){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=o(11),r=(o.n(i),o(12)),n=(o.n(r),o(13)),a=(o.n(n),o(14)),s=(o.n(a),o(15));o.n(s)},function(t,e){Array.prototype.find||Object.defineProperty(Array.prototype,"find",{value:function(t){"use strict";if(null==this)throw new TypeError("Array.prototype.find called on null or undefined");if("function"!=typeof t)throw new TypeError("predicate must be a function");for(var e,o=Object(this),i=o.length>>>0,r=arguments[1],n=0;n<i;n++){e=o[n];if(t.call(r,e,n,o))return e}}})},function(t,e){Array.from||(Array.from=function(){var t=Object.prototype.toString,e=function(e){return"function"==typeof e||"[object Function]"===t.call(e)},o=function(t){var e=Number(t);return isNaN(e)?0:0!==e&&isFinite(e)?(e>0?1:-1)*Math.floor(Math.abs(e)):e},i=Math.pow(2,53)-1,r=function(t){var e=o(t);return Math.min(Math.max(e,0),i)};return function(t){var o=this,i=Object(t);if(null==t)throw new TypeError("Array.from requires an array-like object - not null or undefined");var n,a=arguments.length>1?arguments[1]:void 0;if(void 0!==a){if(!e(a))throw new TypeError("Array.from: when provided, the second argument must be a function");arguments.length>2&&(n=arguments[2])}for(var s,l=r(i.length),d=e(o)?Object(new o(l)):new Array(l),c=0;c<l;){s=i[c];d[c]=a?void 0===n?a(s,c):a.call(n,s,c):s;c+=1}d.length=l;return d}}())},function(t,e){var o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};!function(){"use strict";function t(t){h.push(t);1==h.length&&u()}function e(){for(;h.length;)h[0](),h.shift()}function i(t){this.a=p;this.b=void 0;this.f=[];var e=this;try{t(function(t){a(e,t)},function(t){s(e,t)})}catch(t){s(e,t)}}function r(t){return new i(function(e,o){o(t)})}function n(t){return new i(function(e){e(t)})}function a(t,e){if(t.a==p){if(e==t)throw new TypeError;var i=!1;try{var r=e&&e.then;if(null!=e&&"object"==(void 0===e?"undefined":o(e))&&"function"==typeof r){r.call(e,function(e){i||a(t,e);i=!0},function(e){i||s(t,e);i=!0});return}}catch(e){i||s(t,e);return}t.a=0;t.b=e;l(t)}}function s(t,e){if(t.a==p){if(e==t)throw new TypeError;t.a=1;t.b=e;l(t)}}function l(e){t(function(){if(e.a!=p)for(;e.f.length;){var t=e.f.shift(),o=t[0],i=t[1],r=t[2],t=t[3];try{0==e.a?r("function"==typeof o?o.call(void 0,e.b):e.b):1==e.a&&("function"==typeof i?r(i.call(void 0,e.b)):t(e.b))}catch(e){t(e)}}})}function d(t){return new i(function(e,o){var i=0,r=[];0==t.length&&e(r);for(var a=0;a<t.length;a+=1)n(t[a]).c(function(o){return function(n){r[o]=n;i+=1;i==t.length&&e(r)}}(a),o)})}function c(t){return new i(function(e,o){for(var i=0;i<t.length;i+=1)n(t[i]).c(e,o)})}var u,h=[];u=function(){setTimeout(e)};var p=2;i.prototype.g=function(t){return this.c(void 0,t)};i.prototype.c=function(t,e){var o=this;return new i(function(i,r){o.f.push([t,e,i,r]);l(o)})};window.Promise||(window.Promise=i,window.Promise.resolve=n,window.Promise.reject=r,window.Promise.race=c,window.Promise.all=d,window.Promise.prototype.then=i.prototype.c,window.Promise.prototype.catch=i.prototype.g)}()},function(t,e){Uint8Array.prototype.slice||Object.defineProperty(Uint8Array.prototype,"slice",{value:Array.prototype.slice})},function(t,e){Array.prototype.some||(Array.prototype.some=function(t){"use strict";if(null==this)throw new TypeError("Array.prototype.some called on null or undefined");if("function"!=typeof t)throw new TypeError;for(var e=Object(this),o=e.length>>>0,i=arguments.length>=2?arguments[1]:void 0,r=0;r<o;r++)if(r in e&&t.call(i,e[r],r,e))return!0;return!1})},function(t,e,o){"use strict";e.a={VERSION:"1.0.0",BASE_DOMAIN:"static.videonow.ru",DATA_DOMAIN:"data.videonow.ru",STAT_DOMAIN:"stat.videonow.ru",HOME_URL:"http://www.videonow.ru"}},function(t,e,o){"use strict";function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}e.a=function(){function t(){i(this,t);this.at={}}t.prototype.subscribe=function(t,e){var o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;t=o&&t.bind(o)||t;this.at[e]=[].concat(this.at[e]||[],t)};t.prototype.subscribeOnce=function(t,e){var o=this;this.subscribe(function i(){t.apply(void 0,arguments);o.unsubscribe(i,e)},e)};t.prototype.unsubscribe=function(t,e){this&&(this.at[e]=[].concat(this.at[e]||[]).filter(function(e){return e!==t}))};t.prototype.unsubscribeType=function(t){this&&(this.at[t]=[])};t.prototype.unsubscribeAll=function(){this.at={}};t.prototype.trigger=function(t){for(var e=this,o=arguments.length,i=Array(o>1?o-1:0),r=1;r<o;r++)i[r-1]=arguments[r];(this.at[t]||[]).forEach(function(t){return t.apply(e,i)})};return t}()},function(t,e,o){"use strict";function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var r=o(0),n=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var o=arguments[e];for(var i in o)Object.prototype.hasOwnProperty.call(o,i)&&(t[i]=o[i])}return t},a={increasePieceOfTime:1e3};e.a=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};i(this,t);this.options=n({},a,e);this.logger=e&&(e.logger||e.module&&e.module.logger||e.moduleAPI&&e.moduleAPI.logger)||r.b;var o=e.duration,s=e.VPAID_API;this.logger.log("::ManualCountdown duration="+o);this.trigger=s&&s.trigger;this.duration=o;this.timeoutId=null;this.elapsedTime=0}t.prototype.getAdRemainingTime=function(){var t=this.duration,e=this.elapsedTime;return t?t-e:0};t.prototype.getAdDuration=function(){return this.duration||0};t.prototype.start=function(){var t=this,e=this.elapsedTime,o=this.duration,i=this.options.increasePieceOfTime;!o||void 0!==e&&e>o||(this.timeoutId=setInterval(function(){var e=t.adRemainingTime,r=t.getAdRemainingTime();t.adRemainingTime=r;t.elapsedTime+=i/1e3;var n=t.elapsedTime;t.trigger("AdDurationChange");r<.75*o&&e>=.75*o&&t.trigger("AdVideoFirstQuartile");r<.5*o&&e>=.5*o&&t.trigger("AdVideoMidpoint");r<.25*o&&e>=.25*o&&t.trigger("AdVideoThirdQuartile");0===r&&e>0&&t.trigger("AdVideoComplete");if(n>o){t.stop();t.trigger("AdVideoComplete")}},i))};t.prototype.stop=function(){clearInterval(this.timeoutId)};t.prototype.S=function(){this.stop()};return t}()},function(t,e,o){var i=o(7),r={};r.create=function(){var t=new i.ARRAY_TYPE(9);t[0]=1;t[1]=0;t[2]=0;t[3]=0;t[4]=1;t[5]=0;t[6]=0;t[7]=0;t[8]=1;return t};r.fromMat4=function(t,e){t[0]=e[0];t[1]=e[1];t[2]=e[2];t[3]=e[4];t[4]=e[5];t[5]=e[6];t[6]=e[8];t[7]=e[9];t[8]=e[10];return t};r.clone=function(t){var e=new i.ARRAY_TYPE(9);e[0]=t[0];e[1]=t[1];e[2]=t[2];e[3]=t[3];e[4]=t[4];e[5]=t[5];e[6]=t[6];e[7]=t[7];e[8]=t[8];return e};r.copy=function(t,e){t[0]=e[0];t[1]=e[1];t[2]=e[2];t[3]=e[3];t[4]=e[4];t[5]=e[5];t[6]=e[6];t[7]=e[7];t[8]=e[8];return t};r.fromValues=function(t,e,o,r,n,a,s,l,d){var c=new i.ARRAY_TYPE(9);c[0]=t;c[1]=e;c[2]=o;c[3]=r;c[4]=n;c[5]=a;c[6]=s;c[7]=l;c[8]=d;return c};r.set=function(t,e,o,i,r,n,a,s,l,d){t[0]=e;t[1]=o;t[2]=i;t[3]=r;t[4]=n;t[5]=a;t[6]=s;t[7]=l;t[8]=d;return t};r.identity=function(t){t[0]=1;t[1]=0;t[2]=0;t[3]=0;t[4]=1;t[5]=0;t[6]=0;t[7]=0;t[8]=1;return t};r.transpose=function(t,e){if(t===e){var o=e[1],i=e[2],r=e[5];t[1]=e[3];t[2]=e[6];t[3]=o;t[5]=e[7];t[6]=i;t[7]=r}else{t[0]=e[0];t[1]=e[3];t[2]=e[6];t[3]=e[1];t[4]=e[4];t[5]=e[7];t[6]=e[2];t[7]=e[5];t[8]=e[8]}return t};r.invert=function(t,e){var o=e[0],i=e[1],r=e[2],n=e[3],a=e[4],s=e[5],l=e[6],d=e[7],c=e[8],u=c*a-s*d,h=-c*n+s*l,p=d*n-a*l,f=o*u+i*h+r*p;if(!f)return null;f=1/f;t[0]=u*f;t[1]=(-c*i+r*d)*f;t[2]=(s*i-r*a)*f;t[3]=h*f;t[4]=(c*o-r*l)*f;t[5]=(-s*o+r*n)*f;t[6]=p*f;t[7]=(-d*o+i*l)*f;t[8]=(a*o-i*n)*f;return t};r.adjoint=function(t,e){var o=e[0],i=e[1],r=e[2],n=e[3],a=e[4],s=e[5],l=e[6],d=e[7],c=e[8];t[0]=a*c-s*d;t[1]=r*d-i*c;t[2]=i*s-r*a;t[3]=s*l-n*c;t[4]=o*c-r*l;t[5]=r*n-o*s;t[6]=n*d-a*l;t[7]=i*l-o*d;t[8]=o*a-i*n;return t};r.determinant=function(t){var e=t[0],o=t[1],i=t[2],r=t[3],n=t[4],a=t[5],s=t[6],l=t[7],d=t[8];return e*(d*n-a*l)+o*(-d*r+a*s)+i*(l*r-n*s)};r.multiply=function(t,e,o){var i=e[0],r=e[1],n=e[2],a=e[3],s=e[4],l=e[5],d=e[6],c=e[7],u=e[8],h=o[0],p=o[1],f=o[2],g=o[3],m=o[4],v=o[5],b=o[6],y=o[7],A=o[8];t[0]=h*i+p*a+f*d;t[1]=h*r+p*s+f*c;t[2]=h*n+p*l+f*u;t[3]=g*i+m*a+v*d;t[4]=g*r+m*s+v*c;t[5]=g*n+m*l+v*u;t[6]=b*i+y*a+A*d;t[7]=b*r+y*s+A*c;t[8]=b*n+y*l+A*u;return t};r.mul=r.multiply;r.translate=function(t,e,o){var i=e[0],r=e[1],n=e[2],a=e[3],s=e[4],l=e[5],d=e[6],c=e[7],u=e[8],h=o[0],p=o[1];t[0]=i;t[1]=r;t[2]=n;t[3]=a;t[4]=s;t[5]=l;t[6]=h*i+p*a+d;t[7]=h*r+p*s+c;t[8]=h*n+p*l+u;return t};r.rotate=function(t,e,o){var i=e[0],r=e[1],n=e[2],a=e[3],s=e[4],l=e[5],d=e[6],c=e[7],u=e[8],h=Math.sin(o),p=Math.cos(o);t[0]=p*i+h*a;t[1]=p*r+h*s;t[2]=p*n+h*l;t[3]=p*a-h*i;t[4]=p*s-h*r;t[5]=p*l-h*n;t[6]=d;t[7]=c;t[8]=u;return t};r.scale=function(t,e,o){var i=o[0],r=o[1];t[0]=i*e[0];t[1]=i*e[1];t[2]=i*e[2];t[3]=r*e[3];t[4]=r*e[4];t[5]=r*e[5];t[6]=e[6];t[7]=e[7];t[8]=e[8];return t};r.fromTranslation=function(t,e){t[0]=1;t[1]=0;t[2]=0;t[3]=0;t[4]=1;t[5]=0;t[6]=e[0];t[7]=e[1];t[8]=1;return t};r.fromRotation=function(t,e){var o=Math.sin(e),i=Math.cos(e);t[0]=i;t[1]=o;t[2]=0;t[3]=-o;t[4]=i;t[5]=0;t[6]=0;t[7]=0;t[8]=1;return t};r.fromScaling=function(t,e){t[0]=e[0];t[1]=0;t[2]=0;t[3]=0;t[4]=e[1];t[5]=0;t[6]=0;t[7]=0;t[8]=1;return t};r.fromMat2d=function(t,e){t[0]=e[0];t[1]=e[1];t[2]=0;t[3]=e[2];t[4]=e[3];t[5]=0;t[6]=e[4];t[7]=e[5];t[8]=1;return t};r.fromQuat=function(t,e){var o=e[0],i=e[1],r=e[2],n=e[3],a=o+o,s=i+i,l=r+r,d=o*a,c=i*a,u=i*s,h=r*a,p=r*s,f=r*l,g=n*a,m=n*s,v=n*l;t[0]=1-u-f;t[3]=c-v;t[6]=h+m;t[1]=c+v;t[4]=1-d-f;t[7]=p-g;t[2]=h-m;t[5]=p+g;t[8]=1-d-u;return t};r.normalFromMat4=function(t,e){var o=e[0],i=e[1],r=e[2],n=e[3],a=e[4],s=e[5],l=e[6],d=e[7],c=e[8],u=e[9],h=e[10],p=e[11],f=e[12],g=e[13],m=e[14],v=e[15],b=o*s-i*a,y=o*l-r*a,A=o*d-n*a,w=i*l-r*s,_=i*d-n*s,S=r*d-n*l,M=c*g-u*f,O=c*m-h*f,I=c*v-p*f,E=u*m-h*g,D=u*v-p*g,C=h*v-p*m,x=b*C-y*D+A*E+w*I-_*O+S*M;if(!x)return null;x=1/x;t[0]=(s*C-l*D+d*E)*x;t[1]=(l*I-a*C-d*O)*x;t[2]=(a*D-s*I+d*M)*x;t[3]=(r*D-i*C-n*E)*x;t[4]=(o*C-r*I+n*O)*x;t[5]=(i*I-o*D-n*M)*x;t[6]=(g*S-m*_+v*w)*x;t[7]=(m*A-f*S-v*y)*x;t[8]=(f*_-g*A+v*b)*x;return t};r.str=function(t){return"mat3("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+", "+t[4]+", "+t[5]+", "+t[6]+", "+t[7]+", "+t[8]+")"};r.frob=function(t){return Math.sqrt(Math.pow(t[0],2)+Math.pow(t[1],2)+Math.pow(t[2],2)+Math.pow(t[3],2)+Math.pow(t[4],2)+Math.pow(t[5],2)+Math.pow(t[6],2)+Math.pow(t[7],2)+Math.pow(t[8],2))};r.add=function(t,e,o){t[0]=e[0]+o[0];t[1]=e[1]+o[1];t[2]=e[2]+o[2];t[3]=e[3]+o[3];t[4]=e[4]+o[4];t[5]=e[5]+o[5];t[6]=e[6]+o[6];t[7]=e[7]+o[7];t[8]=e[8]+o[8];return t};r.subtract=function(t,e,o){t[0]=e[0]-o[0];t[1]=e[1]-o[1];t[2]=e[2]-o[2];t[3]=e[3]-o[3];t[4]=e[4]-o[4];t[5]=e[5]-o[5];t[6]=e[6]-o[6];t[7]=e[7]-o[7];t[8]=e[8]-o[8];return t};r.sub=r.subtract;r.multiplyScalar=function(t,e,o){t[0]=e[0]*o;t[1]=e[1]*o;t[2]=e[2]*o;t[3]=e[3]*o;t[4]=e[4]*o;t[5]=e[5]*o;t[6]=e[6]*o;t[7]=e[7]*o;t[8]=e[8]*o;return t};r.multiplyScalarAndAdd=function(t,e,o,i){t[0]=e[0]+o[0]*i;t[1]=e[1]+o[1]*i;t[2]=e[2]+o[2]*i;t[3]=e[3]+o[3]*i;t[4]=e[4]+o[4]*i;t[5]=e[5]+o[5]*i;t[6]=e[6]+o[6]*i;t[7]=e[7]+o[7]*i;t[8]=e[8]+o[8]*i;return t};r.exactEquals=function(t,e){return t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]&&t[3]===e[3]&&t[4]===e[4]&&t[5]===e[5]&&t[6]===e[6]&&t[7]===e[7]&&t[8]===e[8]};r.equals=function(t,e){var o=t[0],r=t[1],n=t[2],a=t[3],s=t[4],l=t[5],d=t[6],c=t[7],u=t[8],h=e[0],p=e[1],f=e[2],g=e[3],m=e[4],v=e[5],b=t[6],y=e[7],A=e[8];return Math.abs(o-h)<=i.EPSILON*Math.max(1,Math.abs(o),Math.abs(h))&&Math.abs(r-p)<=i.EPSILON*Math.max(1,Math.abs(r),Math.abs(p))&&Math.abs(n-f)<=i.EPSILON*Math.max(1,Math.abs(n),Math.abs(f))&&Math.abs(a-g)<=i.EPSILON*Math.max(1,Math.abs(a),Math.abs(g))&&Math.abs(s-m)<=i.EPSILON*Math.max(1,Math.abs(s),Math.abs(m))&&Math.abs(l-v)<=i.EPSILON*Math.max(1,Math.abs(l),Math.abs(v))&&Math.abs(d-b)<=i.EPSILON*Math.max(1,Math.abs(d),Math.abs(b))&&Math.abs(c-y)<=i.EPSILON*Math.max(1,Math.abs(c),Math.abs(y))&&Math.abs(u-A)<=i.EPSILON*Math.max(1,Math.abs(u),Math.abs(A))};t.exports=r},function(t,e,o){var i=o(7),r={};r.create=function(){var t=new i.ARRAY_TYPE(3);t[0]=0;t[1]=0;t[2]=0;return t};r.clone=function(t){var e=new i.ARRAY_TYPE(3);e[0]=t[0];e[1]=t[1];e[2]=t[2];return e};r.fromValues=function(t,e,o){var r=new i.ARRAY_TYPE(3);r[0]=t;r[1]=e;r[2]=o;return r};r.copy=function(t,e){t[0]=e[0];t[1]=e[1];t[2]=e[2];return t};r.set=function(t,e,o,i){t[0]=e;t[1]=o;t[2]=i;return t};r.add=function(t,e,o){t[0]=e[0]+o[0];t[1]=e[1]+o[1];t[2]=e[2]+o[2];return t};r.subtract=function(t,e,o){t[0]=e[0]-o[0];t[1]=e[1]-o[1];t[2]=e[2]-o[2];return t};r.sub=r.subtract;r.multiply=function(t,e,o){t[0]=e[0]*o[0];t[1]=e[1]*o[1];t[2]=e[2]*o[2];return t};r.mul=r.multiply;r.divide=function(t,e,o){t[0]=e[0]/o[0];t[1]=e[1]/o[1];t[2]=e[2]/o[2];return t};r.div=r.divide;r.ceil=function(t,e){t[0]=Math.ceil(e[0]);t[1]=Math.ceil(e[1]);t[2]=Math.ceil(e[2]);return t};r.floor=function(t,e){t[0]=Math.floor(e[0]);t[1]=Math.floor(e[1]);t[2]=Math.floor(e[2]);return t};r.min=function(t,e,o){t[0]=Math.min(e[0],o[0]);t[1]=Math.min(e[1],o[1]);t[2]=Math.min(e[2],o[2]);return t};r.max=function(t,e,o){t[0]=Math.max(e[0],o[0]);t[1]=Math.max(e[1],o[1]);t[2]=Math.max(e[2],o[2]);return t};r.round=function(t,e){t[0]=Math.round(e[0]);t[1]=Math.round(e[1]);t[2]=Math.round(e[2]);return t};r.scale=function(t,e,o){t[0]=e[0]*o;t[1]=e[1]*o;t[2]=e[2]*o;return t};r.scaleAndAdd=function(t,e,o,i){t[0]=e[0]+o[0]*i;t[1]=e[1]+o[1]*i;t[2]=e[2]+o[2]*i;return t};r.distance=function(t,e){var o=e[0]-t[0],i=e[1]-t[1],r=e[2]-t[2];return Math.sqrt(o*o+i*i+r*r)};r.dist=r.distance;r.squaredDistance=function(t,e){var o=e[0]-t[0],i=e[1]-t[1],r=e[2]-t[2];return o*o+i*i+r*r};r.sqrDist=r.squaredDistance;r.length=function(t){var e=t[0],o=t[1],i=t[2];return Math.sqrt(e*e+o*o+i*i)};r.len=r.length;r.squaredLength=function(t){var e=t[0],o=t[1],i=t[2];return e*e+o*o+i*i};r.sqrLen=r.squaredLength;r.negate=function(t,e){t[0]=-e[0];t[1]=-e[1];t[2]=-e[2];return t};r.inverse=function(t,e){t[0]=1/e[0];t[1]=1/e[1];t[2]=1/e[2];return t};r.normalize=function(t,e){var o=e[0],i=e[1],r=e[2],n=o*o+i*i+r*r;if(n>0){n=1/Math.sqrt(n);t[0]=e[0]*n;t[1]=e[1]*n;t[2]=e[2]*n}return t};r.dot=function(t,e){return t[0]*e[0]+t[1]*e[1]+t[2]*e[2]};r.cross=function(t,e,o){var i=e[0],r=e[1],n=e[2],a=o[0],s=o[1],l=o[2];t[0]=r*l-n*s;t[1]=n*a-i*l;t[2]=i*s-r*a;return t};r.lerp=function(t,e,o,i){var r=e[0],n=e[1],a=e[2];t[0]=r+i*(o[0]-r);t[1]=n+i*(o[1]-n);t[2]=a+i*(o[2]-a);return t};r.hermite=function(t,e,o,i,r,n){var a=n*n,s=a*(2*n-3)+1,l=a*(n-2)+n,d=a*(n-1),c=a*(3-2*n);t[0]=e[0]*s+o[0]*l+i[0]*d+r[0]*c;t[1]=e[1]*s+o[1]*l+i[1]*d+r[1]*c;t[2]=e[2]*s+o[2]*l+i[2]*d+r[2]*c;return t};r.bezier=function(t,e,o,i,r,n){var a=1-n,s=a*a,l=n*n,d=s*a,c=3*n*s,u=3*l*a,h=l*n;t[0]=e[0]*d+o[0]*c+i[0]*u+r[0]*h;t[1]=e[1]*d+o[1]*c+i[1]*u+r[1]*h;t[2]=e[2]*d+o[2]*c+i[2]*u+r[2]*h;return t};r.random=function(t,e){e=e||1;var o=2*i.RANDOM()*Math.PI,r=2*i.RANDOM()-1,n=Math.sqrt(1-r*r)*e;t[0]=Math.cos(o)*n;t[1]=Math.sin(o)*n;t[2]=r*e;return t};r.transformMat4=function(t,e,o){var i=e[0],r=e[1],n=e[2],a=o[3]*i+o[7]*r+o[11]*n+o[15];a=a||1;t[0]=(o[0]*i+o[4]*r+o[8]*n+o[12])/a;t[1]=(o[1]*i+o[5]*r+o[9]*n+o[13])/a;t[2]=(o[2]*i+o[6]*r+o[10]*n+o[14])/a;return t};r.transformMat3=function(t,e,o){var i=e[0],r=e[1],n=e[2];t[0]=i*o[0]+r*o[3]+n*o[6];t[1]=i*o[1]+r*o[4]+n*o[7];t[2]=i*o[2]+r*o[5]+n*o[8];return t};r.transformQuat=function(t,e,o){var i=e[0],r=e[1],n=e[2],a=o[0],s=o[1],l=o[2],d=o[3],c=d*i+s*n-l*r,u=d*r+l*i-a*n,h=d*n+a*r-s*i,p=-a*i-s*r-l*n;t[0]=c*d+p*-a+u*-l-h*-s;t[1]=u*d+p*-s+h*-a-c*-l;t[2]=h*d+p*-l+c*-s-u*-a;return t};r.rotateX=function(t,e,o,i){var r=[],n=[];r[0]=e[0]-o[0];r[1]=e[1]-o[1];r[2]=e[2]-o[2];n[0]=r[0];n[1]=r[1]*Math.cos(i)-r[2]*Math.sin(i);n[2]=r[1]*Math.sin(i)+r[2]*Math.cos(i);t[0]=n[0]+o[0];t[1]=n[1]+o[1];t[2]=n[2]+o[2];return t};r.rotateY=function(t,e,o,i){var r=[],n=[];r[0]=e[0]-o[0];r[1]=e[1]-o[1];r[2]=e[2]-o[2];n[0]=r[2]*Math.sin(i)+r[0]*Math.cos(i);n[1]=r[1];n[2]=r[2]*Math.cos(i)-r[0]*Math.sin(i);t[0]=n[0]+o[0];t[1]=n[1]+o[1];t[2]=n[2]+o[2];return t};r.rotateZ=function(t,e,o,i){var r=[],n=[];r[0]=e[0]-o[0];r[1]=e[1]-o[1];r[2]=e[2]-o[2];n[0]=r[0]*Math.cos(i)-r[1]*Math.sin(i);n[1]=r[0]*Math.sin(i)+r[1]*Math.cos(i);n[2]=r[2];t[0]=n[0]+o[0];t[1]=n[1]+o[1];t[2]=n[2]+o[2];return t};r.forEach=function(){var t=r.create();return function(e,o,i,r,n,a){var s,l;o||(o=3);i||(i=0);l=r?Math.min(r*o+i,e.length):e.length;for(s=i;s<l;s+=o){t[0]=e[s];t[1]=e[s+1];t[2]=e[s+2];n(t,t,a);e[s]=t[0];e[s+1]=t[1];e[s+2]=t[2]}return e}}();r.angle=function(t,e){var o=r.fromValues(t[0],t[1],t[2]),i=r.fromValues(e[0],e[1],e[2]);r.normalize(o,o);r.normalize(i,i);var n=r.dot(o,i);return n>1?0:Math.acos(n)};r.str=function(t){return"vec3("+t[0]+", "+t[1]+", "+t[2]+")"};r.exactEquals=function(t,e){return t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]};r.equals=function(t,e){var o=t[0],r=t[1],n=t[2],a=e[0],s=e[1],l=e[2];return Math.abs(o-a)<=i.EPSILON*Math.max(1,Math.abs(o),Math.abs(a))&&Math.abs(r-s)<=i.EPSILON*Math.max(1,Math.abs(r),Math.abs(s))&&Math.abs(n-l)<=i.EPSILON*Math.max(1,Math.abs(n),Math.abs(l))};t.exports=r},function(t,e,o){var i=o(7),r={};r.create=function(){var t=new i.ARRAY_TYPE(4);t[0]=0;t[1]=0;t[2]=0;t[3]=0;return t};r.clone=function(t){var e=new i.ARRAY_TYPE(4);e[0]=t[0];e[1]=t[1];e[2]=t[2];e[3]=t[3];return e};r.fromValues=function(t,e,o,r){var n=new i.ARRAY_TYPE(4);n[0]=t;n[1]=e;n[2]=o;n[3]=r;return n};r.copy=function(t,e){t[0]=e[0];t[1]=e[1];t[2]=e[2];t[3]=e[3];return t};r.set=function(t,e,o,i,r){t[0]=e;t[1]=o;t[2]=i;t[3]=r;return t};r.add=function(t,e,o){t[0]=e[0]+o[0];t[1]=e[1]+o[1];t[2]=e[2]+o[2];t[3]=e[3]+o[3];return t};r.subtract=function(t,e,o){t[0]=e[0]-o[0];t[1]=e[1]-o[1];t[2]=e[2]-o[2];t[3]=e[3]-o[3];return t};r.sub=r.subtract;r.multiply=function(t,e,o){t[0]=e[0]*o[0];t[1]=e[1]*o[1];t[2]=e[2]*o[2];t[3]=e[3]*o[3];return t};r.mul=r.multiply;r.divide=function(t,e,o){t[0]=e[0]/o[0];t[1]=e[1]/o[1];t[2]=e[2]/o[2];t[3]=e[3]/o[3];return t};r.div=r.divide;r.ceil=function(t,e){t[0]=Math.ceil(e[0]);t[1]=Math.ceil(e[1]);t[2]=Math.ceil(e[2]);t[3]=Math.ceil(e[3]);return t};r.floor=function(t,e){t[0]=Math.floor(e[0]);t[1]=Math.floor(e[1]);t[2]=Math.floor(e[2]);t[3]=Math.floor(e[3]);return t};r.min=function(t,e,o){t[0]=Math.min(e[0],o[0]);t[1]=Math.min(e[1],o[1]);t[2]=Math.min(e[2],o[2]);t[3]=Math.min(e[3],o[3]);return t};r.max=function(t,e,o){t[0]=Math.max(e[0],o[0]);t[1]=Math.max(e[1],o[1]);t[2]=Math.max(e[2],o[2]);t[3]=Math.max(e[3],o[3]);return t};r.round=function(t,e){t[0]=Math.round(e[0]);t[1]=Math.round(e[1]);t[2]=Math.round(e[2]);t[3]=Math.round(e[3]);return t};r.scale=function(t,e,o){t[0]=e[0]*o;t[1]=e[1]*o;t[2]=e[2]*o;t[3]=e[3]*o;return t};r.scaleAndAdd=function(t,e,o,i){t[0]=e[0]+o[0]*i;t[1]=e[1]+o[1]*i;t[2]=e[2]+o[2]*i;t[3]=e[3]+o[3]*i;return t};r.distance=function(t,e){var o=e[0]-t[0],i=e[1]-t[1],r=e[2]-t[2],n=e[3]-t[3];return Math.sqrt(o*o+i*i+r*r+n*n)};r.dist=r.distance;r.squaredDistance=function(t,e){var o=e[0]-t[0],i=e[1]-t[1],r=e[2]-t[2],n=e[3]-t[3];return o*o+i*i+r*r+n*n};r.sqrDist=r.squaredDistance;r.length=function(t){var e=t[0],o=t[1],i=t[2],r=t[3];return Math.sqrt(e*e+o*o+i*i+r*r)};r.len=r.length;r.squaredLength=function(t){var e=t[0],o=t[1],i=t[2],r=t[3];return e*e+o*o+i*i+r*r};r.sqrLen=r.squaredLength;r.negate=function(t,e){t[0]=-e[0];t[1]=-e[1];t[2]=-e[2];t[3]=-e[3];return t};r.inverse=function(t,e){t[0]=1/e[0];t[1]=1/e[1];t[2]=1/e[2];t[3]=1/e[3];return t};r.normalize=function(t,e){var o=e[0],i=e[1],r=e[2],n=e[3],a=o*o+i*i+r*r+n*n;if(a>0){a=1/Math.sqrt(a);t[0]=o*a;t[1]=i*a;t[2]=r*a;t[3]=n*a}return t};r.dot=function(t,e){return t[0]*e[0]+t[1]*e[1]+t[2]*e[2]+t[3]*e[3]};r.lerp=function(t,e,o,i){var r=e[0],n=e[1],a=e[2],s=e[3];t[0]=r+i*(o[0]-r);t[1]=n+i*(o[1]-n);t[2]=a+i*(o[2]-a);t[3]=s+i*(o[3]-s);return t};r.random=function(t,e){e=e||1;t[0]=i.RANDOM();t[1]=i.RANDOM();t[2]=i.RANDOM();t[3]=i.RANDOM();r.normalize(t,t);r.scale(t,t,e);return t};r.transformMat4=function(t,e,o){var i=e[0],r=e[1],n=e[2],a=e[3];t[0]=o[0]*i+o[4]*r+o[8]*n+o[12]*a;t[1]=o[1]*i+o[5]*r+o[9]*n+o[13]*a;t[2]=o[2]*i+o[6]*r+o[10]*n+o[14]*a;t[3]=o[3]*i+o[7]*r+o[11]*n+o[15]*a;return t};r.transformQuat=function(t,e,o){var i=e[0],r=e[1],n=e[2],a=o[0],s=o[1],l=o[2],d=o[3],c=d*i+s*n-l*r,u=d*r+l*i-a*n,h=d*n+a*r-s*i,p=-a*i-s*r-l*n;t[0]=c*d+p*-a+u*-l-h*-s;t[1]=u*d+p*-s+h*-a-c*-l;t[2]=h*d+p*-l+c*-s-u*-a;t[3]=e[3];return t};r.forEach=function(){var t=r.create();return function(e,o,i,r,n,a){var s,l;o||(o=4);i||(i=0);l=r?Math.min(r*o+i,e.length):e.length;for(s=i;s<l;s+=o){t[0]=e[s];t[1]=e[s+1];t[2]=e[s+2];t[3]=e[s+3];n(t,t,a);e[s]=t[0];e[s+1]=t[1];e[s+2]=t[2];e[s+3]=t[3]}return e}}();r.str=function(t){return"vec4("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+")"};r.exactEquals=function(t,e){return t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]&&t[3]===e[3]};r.equals=function(t,e){var o=t[0],r=t[1],n=t[2],a=t[3],s=e[0],l=e[1],d=e[2],c=e[3];return Math.abs(o-s)<=i.EPSILON*Math.max(1,Math.abs(o),Math.abs(s))&&Math.abs(r-l)<=i.EPSILON*Math.max(1,Math.abs(r),Math.abs(l))&&Math.abs(n-d)<=i.EPSILON*Math.max(1,Math.abs(n),Math.abs(d))&&Math.abs(a-c)<=i.EPSILON*Math.max(1,Math.abs(a),Math.abs(c))};t.exports=r},function(t,e){t.exports='<svg width="50" height="50" viewBox="0 0 64 64"><ellipse cx="32" cy="32" fill="none" stroke-width="3" rx="30" ry="30"/><path stroke-width="0" d="M17.534 41.553l29.334.01-.952 1.373-27.418-.033-.964-1.35zm.202-18.25l28.942-.034.84 1.405-30.634.01.852-1.385zm-2.856 9.144l34.632-.033-.046 1.408-34.564-.022-.022-1.353zm34.66.13c0 9.318-7.774 16.9-17.33 16.9-9.555 0-17.327-7.583-17.327-16.9 0-9.316 7.774-16.896 17.326-16.896 9.554 0 17.33 7.58 17.33 16.9zm-17.33-18.25c-10.316 0-18.71 8.187-18.71 18.25s8.394 18.25 18.71 18.25c10.32 0 18.714-8.187 18.714-18.25s-8.393-18.25-18.714-18.25zm5.25 18.25c0 9.958-2.765 16.9-5.25 16.9-2.482 0-5.248-6.942-5.248-16.9 0-9.96 2.765-16.896 5.248-16.896s5.25 6.94 5.25 16.9zm-5.25-18.25c-4.31 0-6.635 9.403-6.635 18.25 0 8.848 2.326 18.25 6.635 18.25 4.31 0 6.64-9.403 6.64-18.25-.002-8.847-2.33-18.25-6.64-18.25zm12.297 18.25c0 9.318-5.52 16.9-12.297 16.9-6.777 0-12.292-7.583-12.292-16.9 0-9.316 5.515-16.896 12.292-16.896 6.778 0 12.297 7.58 12.297 16.9zM32.21 14.327c-7.542 0-13.68 8.188-13.68 18.25s6.138 18.25 13.68 18.25c7.543 0 13.68-8.186 13.68-18.25s-6.137-18.25-13.68-18.25z"/></svg>'},function(t,e,o){o(10);t.exports=o(24)},function(t,e,o){"use strict";function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function n(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}});e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}function a(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function s(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function l(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}});e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}function d(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,o=t.O("container");o&&Object(qn.c)(o,{zIndex:0});var i=t.O("videoContainer"),r=e||i&&this.U(Object(qn.b)(i,"video",{position:"absolute",top:0,right:0,bottom:0,left:0,width:"100%",height:"100%",zIndex:-1}));this.logger.log(this[Qn]+".initAd() "+(e?"using existing videoSlot":"videoSlot has been created for loaded external vpaid"));if(r){if(t.vpaidJsVideoSlotShouldBeMuted()){r.muted=!0;r.volume=0;this.logger.trace(this[Qn]+" initAd() set videoSlot.muted = "+r.muted)}Gn.e&&r.setAttribute("playsinline","true")}return r}function c(t,e){var o=this,i={};["AdStarted","AdStopped","AdSkipped","AdSkippableStateChange","AdSizeChange","AdLinearChange","AdDurationChange","AdExpandedChange","AdRemainingTimeChange","AdVolumeChange","AdImpression","AdVideoFirstQuartile","AdVideoMidpoint","AdVideoThirdQuartile","AdVideoComplete","AdVideoCompleteTrackOnly","AdClickThru","AdInteraction","AdUserAcceptInvitation","AdUserMinimize","AdUserClose","AdPaused","AdPlaying","AdLog","AdError","AdLoadedVideoData","slotSizeChanged"].forEach(function(e){o.Q(t,e,i[e]=o.trigger.bind(o,e))});i.AdLoaded=function(){o.trigger("AdLoaded");var t=o.lastPendingVolumeCommand.length,e=o.lastPendingVolumeCommand.pop();e&&e();o.logger.trace(o[Qn]+" @AdLoaded execute last setAdVolume pending command: "+e+" from list("+t+")");o.lastPendingVolumeCommand=[]};this.Q(t,"AdLoaded",i.AdLoaded);this.Q(t,"AdError",function(){Object.keys(i).forEach(function(e){o.Z(t,e,i[e]);delete i[e]})});var r=this.Y(e,"playing",function(){o.J(e,"playing",r);o.st()});!function(){o.Q(t,"AdVideoStart",function(){e&&!e.paused?o.lt.then(function(){return o.trigger("AdVideoStart")}):o.trigger("AdVideoStart")})}();this.Q(t,"AdVolumeChange",function(){var t=o.videoSlot,e=o.options.module;if(t&&e.vpaidJsVideoSlotShouldBeMuted()){var i=o.vpaid.getAdVolume();i||Gn.e||(i=t.volume);o.logger.trace(Jn+" AdVolumeChange("+i+") videoSlot.muted="+t.muted);t.muted&&i?t.muted=!1:t.muted||i||(t.muted=!0)}})}function u(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function h(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function p(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function f(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function g(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function m(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function v(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function b(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}});e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}function y(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function A(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function w(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}});e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}function _(){var t=this.getAdVolume();if(t>0){Ln.b.trace(Ra+" Expanding ad because of adVolume set to "+t);this.expandAd()}else{Ln.b.trace(Ra+" Collapsing ad because of adVolume set to "+t);this.collapseAd()}}function S(){_.call(this)}function M(){_.call(this)}function O(){var t=this.jsmpeg,e=this.videoSlot;e&&e.pause();t.stop()}function I(t){var e=t.target;this.hasAudio=Object(Xn.r)(e);this.trigger("AdLoadedVideoData")}function E(){var t=this.jsmpeg;Ln.b.trace(Ra+" WS metadata size: width: "+t.width+", height: "+t.height+"}}");this.resizeAd(this.adWidth,this.adHeight);this.trigger("AdLoaded")}function D(t){var e=this.adExpanded&&this.videoSlot?this.videoSlot:t.target,o=this.adDuration=e&&e.duration?e.duration:this.adDuration;if(o){var i=this.adRemainingTime,r=o-e.currentTime;if(r!==i){this.adRemainingTime=r;if(r<o&&i===o){this.trigger("AdImpression");this.trigger("AdVideoStart")}this.trigger("AdRemainingTimeChange");r<.75*o&&i>=.75*o&&this.trigger("AdVideoFirstQuartile");r<.5*o&&i>=.5*o&&this.trigger("AdVideoMidpoint");r<.25*o&&i>=.25*o&&this.trigger("AdVideoThirdQuartile");0===r&&i>0&&this.trigger("AdVideoComplete")}}}function C(t){t.preventDefault();this.trigger("AdClickThru","",0,!0)}function x(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function T(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function P(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}});e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}function j(){var t=this.image,e=t.width,o=t.height;this.originalSize={width:parseFloat(e),height:parseFloat(o)};this.adHeight=o;Ln.b.trace(za+" metadata size: width: "+e+", height: "+o+"}}");this.trigger("AdLoaded");this.trigger("AdLoadedVideoData")}function k(t){t.preventDefault();this.trigger("AdClickThru","",0,!0)}function R(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function F(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function N(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}});e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}function V(t){var e=t.target;this.hasAudio=Object(Xn.r)(e);this.trigger("AdLoadedVideoData")}function L(t){var e=t.target,o=e.videoWidth,i=e.videoHeight,r=e.duration;this.logger.trace(Ba+" @loadedmetadata");if(!this.adWidth||!this.adHeight){this.logger.trace(Ba+" @loadedmetadata Updating ad dimensions ("+o+":"+i+")");this.adWidth=o;this.adHeight=i}this.adDuration=r;this.trigger("AdLoaded")}function z(t){var e=t.target.duration;if(!isNaN(e)){this.adDuration=e;this.trigger("AdDurationChange")}}function W(t){var e=t.target,o=e.duration,i=e.currentTime;this.logger.none(Ba+".onTimeUpdate() duration="+o);if(!isNaN(o)){this.adDuration=o;var r=this.adRemainingTime,n=this.options.startTime;r||i===n||(i=n);var a=(1e3*(o-Math.min(i,o))^0)/1e3;if(a!==r){this.adRemainingTime=a;o=(1e3*o^0)/1e3;this.logger.none(Ba+".onTimeUpdate() remainingTime="+a+" adRemainingTime="+r+" duration="+o+" currentTime="+i,1);this.trigger("AdRemainingTimeChange");if(a<o&&r===o){this.trigger("AdImpression");this.trigger("AdVideoStart")}a<.75*o&&r>=.75*o&&this.trigger("AdVideoFirstQuartile");a<.5*o&&r>=.5*o&&this.trigger("AdVideoMidpoint");a<.25*o&&r>=.25*o&&this.trigger("AdVideoThirdQuartile");0===a&&r>0&&this.trigger("AdVideoComplete")}}}function H(t){this.adVolume=t.target.volume;this.trigger("AdVolumeChange")}function U(t){var e=B(t);this.trigger("AdError",e.code,e.message)}function B(t){t.preventDefault();var e=t.currentTarget&&t.currentTarget.currentSrc,o=t.target&&t.target.error;return{code:o&&o.code>=1&&o.code<=3?Vn.a.GENERAL_LINEAR_ERROR:Vn.a.FAIL_MEDIA_DISPLAY,message:(o&&o.message||"Load error ")+(e?" source="+e:"")}}function q(t){t.preventDefault();this.trigger("AdClickThru","",0,!0)}function X(t){var e=this;return t.play().catch(function(o){e.logger.warn(Ba+".startAd() play() catch error="+o+". Try start play one time.");t.play().catch(function(t){var o=Ba+" playVideo("+e+") failed video autoplay";throw Object(Xn.f)(t,o,Vn.a.FAIL_MEDIA_START)})})}function G(t,e,o,i){this.gl=null;this.src=t;this.canvas=e;try{this.gl=e.getContext("webgl")||e.getContext("experimental-webgl")}catch(t){}if(this.gl){this.gl.clearColor(0,0,0,0);this.gl.clearDepth(1);this.gl.disable(this.gl.DEPTH_TEST);this.initBuffers(o);this.initTexture();this.initShaders(i);this.initProgram()}}function Y(t,e){t=Math.min(Math.max(t,2),16);e=Math.min(Math.max(e,2),8);var o=t*e,i=6*t,r=Math.PI,n=2*r,a=r/2,s=n/o,l=n/i;console.log("buildProjection(): n=%d; m=%d; nCols=%d; nRows=%d; dPhi=%f; dTheta=%f",t,e,o,i,s,l);for(var d=[],c=[],u=[],h=[],p=0,f=0,g=0;g<o;g++)for(var m=g*s,v=a,b=0;b<i;b++,f++){var y=function(t,e){for(var o=0;o<p;o++){var i=2*o;if(h[i]==t&&h[i+1]==e)return o}return-1}(m,v);if(y>=0)u.push(y);else{var A=Math.sin(v),w=Math.cos(v),_=w*Math.cos(m),S=w*Math.sin(m),M=m/n,O=1-(v+a)/r;d.push(_,A,S);c.push(M,O);u.push(p++);h.push(m,v)}m+=b%2==0?-s/2:s;b%2==0&&(v-=l)}console.log("cnt=%d; l=%d; n(aPos)=%d; n(aUvpos)=%d; n(aIndices)=%d",p,f,d.length,c.length,u.length);return[d,c,u]}function J(t){function e(t){return t&&"string"==typeof t.tagName&&t.tagName.toLowerCase()}t=Q(t,{source:null,target:null,dependOnPlay:!1,hideInactive:!1,disableRotation:!1});var o,i=null,r=!1;(o=e(t.source))&&((r="canvas"===o)||"video"===o)&&(i=t.source);if(i){this.src=i;this.bCanvasSrc=r;this.bPlayDep=!r&&!!t.dependOnPlay;this.disableRotation=t.disableRotation;this.bHide=!!t.hideInactive;var n=navigator.userAgent,a=this.bIos=/ipod|iphone|ipad/i.test(n),s=this.bAndroid=/android/i.test(n),l=this.bAndroidFF=s&&/firefox/i.test(n);this.bMobile=a||s;this.bRotRateInDegs=a||l;this.configRotmap(t);console.log("S360Video(): opts="+JSON.stringify(t)+"; bCanvasSrc="+this.bCanvasSrc+"; bPlayDep="+this.bPlayDep+"; bIos="+a+"; bAndroidFF="+l+"; bMobile="+this.bMobile+"; bRotRateInDegs="+this.bRotRateInDegs);this.deg2rad=Math.PI/180;this.rotDrag=Ya.quat.create();this.rotGyro=Ya.quat.create();this.rotPreOrnt=Ya.quat.create();this.rotOrnt=Ya.quat.create();this.rotOut=Ya.quat.create();this.cX=this.cY=0;this.angleOrnt=null;this.idRAF=0;this.bReady=!1;if("canvas"===e(t.target))this.target=t.target;else{this.target=document.createElement("canvas");this.target.style.width="100%";this.target.style.height="100%";this.src.style.backgroundColor="black";this.src.parentNode.appendChild(this.target)}this.target.width=640;this.target.height=360;this.src.style.display="none";this.bHide&&this.show(!1);this.webGL=null;if(this.bCanvasSrc)this.resize(this.src.width,this.src.height);else{this.src.addEventListener("loadedmetadata",function(){this.resize(this.src.videoWidth,this.src.videoHeight)}.bind(this));this.src.addEventListener("error",function(){this.drawOff(!0)}.bind(this));this.src.addEventListener("play",function(){if(this.bPlayDep){console.log("S360Video: on-play");this.drawOn()}}.bind(this));this.src.addEventListener("ended",function(){if(this.bPlayDep){console.log("S360Video: on-ended");this.drawOff()}}.bind(this))}}else console.log("S360Video() Error: video source missing")}function Q(t,e){t=t||{};for(var o in e)o in t||(t[o]=e[o]);return t}function Z(t,e){return"object"===(void 0===t?"undefined":Ja(t))&&e.every(function(e){return"number"==typeof t[e]})}function K(){var t=screen.orientation||screen.mozOrientation||screen.msOrientation;if(!(t&&"type"in t))return void 0!==window.orientation?window.orientation:0;switch(t.type){case"landscape-primary":return 90;case"landscape-secondary":return-90;case"portrait-secondary":return 180;case"portrait-primary":return 0}return 0}function $(t,e,o){var i=Math.cos(t/2),r=Math.cos(e/2),n=Math.cos(o/2),a=Math.sin(t/2),s=Math.sin(e/2),l=Math.sin(o/2);return Ya.quat.fromValues(a*r*n-i*s*l,i*s*n+a*r*l,a*s*n+i*r*l,i*r*n-a*s*l)}function tt(t,e,o){var i=Math.cos(t/2),r=Math.cos(e/2),n=Math.cos(o/2),a=Math.sin(t/2),s=Math.sin(e/2),l=Math.sin(o/2);return Ya.quat.fromValues(i*s*n+a*r*l,a*r*n-i*s*l,i*r*l-a*s*n,i*r*n+a*s*l)}function et(){var t=(navigator.language||navigator.userLanguage).substr(0,2);ts=!0;$a[t]&&(es=t)}function ot(t,e){t.raw=e;return t}function it(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function rt(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function nt(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}});e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}function at(){var t=this.jsmpeg,e=this.videoSlot;e&&e.pause();t.stop()}function st(){var t=this.jsmpeg;Ln.b.trace(ss+" WS metadata size: width: "+t.width+", height: "+t.height+"}}");this.resizeAd(this.adWidth,this.adHeight)}function lt(t){var e=this.adExpanded&&this.videoSlot?this.videoSlot:t.target,o=this.adDuration=e&&e.duration?e.duration:this.adDuration;if(o){var i=this.adRemainingTime,r=o-e.currentTime;if(r!==i){if(o-r>3){Object(qn.c)(this.planet,{opacity:0});Object(qn.c)(this.planetText,{opacity:0})}this.adRemainingTime=r;if(r<o&&i===o){this.trigger("AdImpression");this.trigger("AdVideoStart")}this.trigger("AdRemainingTimeChange");r<.75*o&&i>=.75*o&&this.trigger("AdVideoFirstQuartile");r<.5*o&&i>=.5*o&&this.trigger("AdVideoMidpoint");r<.25*o&&i>=.25*o&&this.trigger("AdVideoThirdQuartile");0===r&&i>0&&this.trigger("AdVideoComplete")}}}function dt(t){t.preventDefault();ct.call(this)}function ct(){var t=this,e=this.jsmpeg,o=this.canvas,i=this.videoSlot,r=this.video360Slot,n=this.planet,a=this.loadingText,s=this.options.mp4media;if(r||!s)return Promise.resolve(r);Ln.b.trace(ss+".initAd() Initializing S360Video");return new Promise(function(r,l){t.Y(i,"loadedmetadata",function(){function n(){var t=this;i.removeEventListener("canplay",d);i.currentTime=e&&e.currentTime||0;e&&e.pause();s.start();i.volume!==this.adVolume&&this.setAdVolume(i.volume,{invoker:this});i.play().then(function(){return r(null)}).catch(function(e){var o=ss+".start("+t+") failed video autoplay with videoSlot.muted="+i.muted+" videoSlot.volume="+i.volume;Ln.b.warn(o+" err="+e);if(!i.muted||i.volume){var n=i.muted,a=i.volume;t.adVolume=0;t.videoSlotCanAutoPlay=!1;i.volume=0;i.muted=!0;t.setAdVolume(0,{invoker:t});var s=i.play();Ln.b.warn(ss+" initAd(). One more try start media with videoSlot.muted="+i.muted+" videoSlot.volume="+i.volume+" paused="+i.paused);var d=setTimeout(function(){Ln.b.error(ss+".start() failed video autoplay with videoSlot.muted="+n+" videoSlot.volume="+a);var t=Error("failed video autoplay");t.code=Vn.a.FAIL_MEDIA_START;l(t)},500);s.then(function(){clearTimeout(d);t.trigger("AdVolumeChange");r(null)}).catch(function(e){var o=ss+" initAd("+t+") failed video autoplay err="+e;Ln.b.error(o);l(Object(Xn.f)(e,o,Vn.a.FAIL_MEDIA_START))})}else l(Object(Xn.f)(e,o,Vn.a.FAIL_MEDIA_START))});a&&Object(qn.c)(a,{opacity:0});o&&Object(qn.c)(o,{display:"none"})}var s=t.video360Slot=new Za({source:i,width:i.videoWidth,height:i.videoHeight,dependOnPlay:!1}),d=n.bind(t);if(Gn.e){i.pause();i.addEventListener("canplay",d)}else d()});i.src=s.src;i.load();n&&Object(qn.c)(n,{opacity:0});a&&Object(qn.c)(a,{opacity:1})})}function ut(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function ht(t){var e=Object(Vn.c)(t);return{rawDuration:e,duration:Object(Xn.y)(e),MediaFiles:gs.reduce(function(e,o){return e[o]=Object(Vn.d)(t,o,!0),e},{})}}function pt(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function ft(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function gt(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}});e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}function mt(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function vt(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function bt(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}});e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}function yt(t,e){try{return Object(qn.m)(t)}catch(i){var o=new Error(i+' (format: "'+e+'" playerElement:"'+t.playerElement+'" playerAfter:"'+t.playerAfter+'" playerBefore:"'+t.playerBefore+'" url('+window.top.location.href+"))");o.code=Vn.a.FORMAT_ERROR;o.format=e;throw o}}function At(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function wt(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function _t(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function St(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}});e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}function Mt(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Ot(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function It(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}});e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}function Et(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Dt(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function Ct(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}});e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}function xt(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ps;return{wrapper:{paddingTop:t+"px"},skipAd:{top:t+"px"},skipAdCountdown:{top:10+t+"px"},title:{color:"gray"},logo:{top:0,right:0,bottom:"auto",left:"auto"},play:{marginTop:t+"px"},vnAfterplay:{marginTop:t+"px"}}}function Tt(){this.logger.trace(this[Ts]+" @resize");this.dt()}function Pt(){var t=this.options.moduleAPI,e=t.inState,o=t.pauseAd,i=document,r=i.visibilityState;this.logger.trace(this[Ts]+" @visibilitychange ("+r+")",2);"hidden"===r?e&&e("playing")&&o&&o({invoker:this,method:"onVisibilityChange"}):this.ct()}function jt(){this.logger.trace(this[Ts]+" @AdLoaded",2);var t=this.moduleNode,e=this.options,o=e.expandingDuration,i=e.doNotWatchVisibility,r=this.ut();this.ht=!0;this.Y(window,"resize",Tt.bind(this));this.Y(document,"visibilitychange",Pt.bind(this),!1);var n=parseFloat(o);isNaN(n)||Object(qn.c)(t,{transitionProperty:"width, height",transitionDuration:n+"ms",transitionTimingFunction:"ease-out"});if(!i)if(r){this.pt();this.dt();this.ft();this.ct()}else{this.dt();this.gt()}}function kt(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.logger.trace(this[Ts]+" @slotSizeChanged",2);var e=this.options.moduleAPI.getControlNode,o=e&&e("wrapper");Object(Xn.j)(o).paddingTop||this.updateControlsLayout(0,!0);void 0!==t.height&&(this.forceHeight=t.height);void 0!==t.width&&(this.forceWidth=t.width);!0!==t.shouldNotResize&&Tt.call(this)}function Rt(){this.logger.trace(this[Ts]+" @AdStarted",2);this.mt=!0;this.dt();this.ft();this.ct()}function Ft(){this.logger.trace(this[Ts]+" @AdVideoStart",2);var t=this.moduleNode,e=this.options.playerPlaybackClass;e&&t.classList.add(e);this.ft();this.ct()}function Nt(){var t=this,e=this.options||{},o=e.destroyTimeout;this.logger.trace(this[Ts]+" @AdDestroyed. "+this[Ts]+"._destroy() will be called after "+o+" ms",2);this.vt();setTimeout(function(){return t.S()},o)}function Vt(){function t(){var e=this,o=this.options.moduleAPI.getControlNode;if(i.clientWidth){this.logger.log(this[Ts]+".initVisibleWatcher() module is visible now. Changing its size",2,"green");var r=o&&o("wrapper");this.updateControlsLayout((r&&Object(Xn.j)(r)||{}).paddingTop||Ps,!0);this.dt();this.ft(!0);if(this.bt){this.yt();this.gt()}this.At().then(function(t){t.intersectionRatio&&setTimeout(function(){e.ct()},100)})}else this.rt(l,t.bind(this),100)}function e(t){var e=getComputedStyle(t)||{};return t.hidden||"none"===e.display||"hidden"===e.visibility}var o=this,i=this.moduleNode,r=this.scrollNode;if(!window.IntersectionObserver&&window.MutationObserver){var n=function(t){t=t&&t.parentElement;for(;;t=t.parentElement){if(!t)return null;if(e(t))return t}}(i);if(n){this.logger.log(this[Ts]+".initVisibleWatcher() can not use IntersectionObserver, but invisible parent block was found and we use MutationObserver to catch the moment when it becomes visible.");var a=new MutationObserver(function(){if(!e(n)){a.disconnect();setTimeout(t.bind(o),1)}});a.observe(n,{attributes:!0})}else this.logger.warn(this[Ts]+".initVisibleWatcher() can not use IntersectionObserver and invisible parent block was not found")}this.logger.log(this[Ts]+".initVisibleWatcher() watch module visibility.");var s=this.wt=Object(Xn.H)(i,{threshold:[.1,1],registerHandle:function(t){r&&r.addEventListener("scroll",t);return{handler:t,event:"scroll",scrollNode:o.scrollNode}}},function(e){var i=e.intersectionRatio,r=e.boundingClientRect;if(i>0&&(!r||r.right-r.left>0)){s&&s.disconnect&&s.disconnect();setTimeout(t.bind(o),1)}}),l="watchModuleNodeNodeVisibilityTimerId"}function Lt(){var t=this.forceHeight,e=this.moduleNode,o=this.options,i=o.forceEnableVerticalContent,r=o.moduleAPI,n=r.getAdAspectRatio,a=r.getAdWidth,s=n&&n(),l=e.clientWidth||a();return{width:l,height:t||s&&l&&l*(!Gn.f&&s>1&&!i?9/16:s)}}function zt(t){if(Object(qn.p)(t)){this.logger.none(this[Ts]+".showGrid()");if(!this._t){var e=t.getBoundingClientRect();if(e.height){Wt.call(this);var o=this.St,i=this.Mt,r=this.options.moduleAPI,n=r.getMainModuleId,a=r.getControlNode,s=0,l=0,d=a("container"),c=a("videoContainer");if(t===d||t===c){var u=a("iframe");if(u){var h=u.getBoundingClientRect();s=h.top;l=h.left}}var p=n&&n();if(!this.grid||!this.grid.length){var f={height:"1px",borderTopWidth:"1px",position:"absolute",pointerEvents:"none",zIndex:2147483647};this.grid=[];var g=e.height,m=Object(qn.b)(window.document.body,"div",Cs({},f,{height:g,borderTopColor:"yellow",borderTopStyle:"dashed"}));m.className="vn-grid-frame vn-module__"+p;this.grid.push({pos:0,line:m});for(var v=.1;v<1;v=(100*(v+.1)^0)/100)if(v!==o&&v!==i){var b=Object(qn.b)(window.document.body,"div",Cs({},f,{borderTopColor:"yellow",borderTopStyle:.5===v?"dashed":"dotted"}));b.className="vn-grid-"+v+" vn-module__"+p;this.grid.push({pos:v,line:b})}if(o){var y=Object(qn.b)(window.document.body,"div",Cs({},f,{borderTopColor:"red",borderTopStyle:"solid",zIndex:2147483648}));y.className="vn-grid-start-factor-"+o+" vn-module__"+p;this.grid.push({pos:o,line:y})}if(i){var A=Object(qn.b)(window.document.body,"div",Cs({},f,{borderTopColor:"pink",borderTopStyle:"dashed",zIndex:2147483649}));A.className="vn-grid-stop-factor-"+i+" vn-module__"+p;this.grid.push({pos:i,line:A})}}var w=this.grid,_=e.width,S=e.height,M="relative"===getComputedStyle(window.document.body).position,O=M?Object(Xn.j)(window.document.body):{marginLeft:0,marginTop:0,borderTopWidth:0,borderLeftWidth:0},I=O.marginLeft,E=O.marginTop,D=O.borderTopWidth,C=O.borderLeftWidth,x=window.document.documentElement.getBoundingClientRect();this.logger.none(this[Ts]+".showGrid() drawing...");for(var T=0;T<w.length;T++){var P=w[T],j=P.pos,k=P.line;k&&Object(qn.c)(k,{top:Object(Xn.u)(e.top-x.top-E-D+j*S+s),left:Object(Xn.u)(e.left-x.left-I-C+l),width:Object(Xn.u)(_)})}}}}}function Wt(){var t=this.grid;if(t){this.logger.none(this[Ts]+".clearGrid()");for(;t&&t.length;){var e=t.pop();if(!e)return;var o=e.line;Object(qn.u)(o)}}}function Ht(){var t=this.moduleNode,e=this.options.showObservableNode;if(!t)return null;var o=Bt.call(this);if(o&&o.element){e&&(o.element.style.backgroundColor="pink");this.logger.trace(this[Ts]+"._closeModule() markTop = "+o.top+" markBottom = "+o.bottom)}else this.logger.trace(this[Ts]+"._closeModule() correction position: mark element not found",1,"#d2691e");return o}function Ut(t){var e=this,o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10,i=this.moduleNode;setTimeout(function(){e.logger.trace(e[Ts]+".attemptCompensation() counter="+o);if(!o&&i.clientHeight)e.logger.trace(e[Ts]+".attemptCompensation() not found moment for compensation");else if(o&&i.clientHeight)Ut.call(e,t,o-1);else{var r=t.top,n=t.bottom,a=t.element,s=r?a.getBoundingClientRect().top-r:n?a.getBoundingClientRect().bottom-n:0;s&&window.scrollBy(0,s);e.logger.trace(e[Ts]+".attemptCompensation() compensation="+s+" counter="+o)}},20)}function Bt(){for(var t=this.moduleNode,e=t.getBoundingClientRect().bottom,o=document.documentElement,i=o.clientWidth,r=o.clientHeight,n=r-e,a=i/10,s=n/10,l=a;l<i-a;l+=a)for(var d=e+5;d<r;d+=s){var c=document.elementFromPoint(l,d),u=qt(e,c);if(u)return u}return!1}function qt(t,e){if(!e)return null;var o=document.documentElement.clientHeight,i=getComputedStyle(e)||{},r=i.position;if("absolute"===r||"fixed"===r)return null;var n=e.getBoundingClientRect(),a=n.top,s=n.bottom;return a>0&&a>t&&a<o?{element:e,top:a}:s>0&&s>t&&s<o?{element:e,bottom:s}:null}function Xt(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Gt(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function Yt(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}});e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}function Jt(){this.logger.trace(this[zs]+" @AdVideoComplete. Closing all placeHolders that positioned lower in the document",2);this.Ot()}function Qt(){this.logger.trace(this[zs]+" @AdStarted",2);this.It()}function Zt(){this.logger.trace(this[zs]+" @AdLoaded",2);this.Y(this.scrollNode,"scroll",Kt.bind(this));this.Y(window,"resize",$t.bind(this))}function Kt(){this.logger.none(this[zs]+" @scroll");this.It()}function $t(){this.logger.trace(this[zs]+" @resize");this.It()}function te(){var t=[],e=[],o=[],i=window,r=i.innerHeight;this.slotPlaceholders.forEach(function(i){var n=i.getBoundingClientRect(),a=n.top,s=n.bottom,l=s<0,d=a>r;l&&t.push(i);d&&o.push(i);l||d||e.push(i)});return{above:t,visible:e,below:o}}function ee(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function oe(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function ie(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}});e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}function re(t,e,o,i){function r(o){t=o;e=Math.round(t*i)}function n(o){e=o;t=Math.round(e/i)}var a=this.options,s=a.floatingMinHeight,l=a.floatingMaxHeight,d=a.floatingMinWidth,c=a.floatingMaxWidth,u=a.moduleAPI.getIndents,h=u&&u(),p=h.top,f=h.bottom,g=p+f,m=o.clientWidth,v=document.documentElement,b=v.clientHeight,y=v.clientWidth,A=ae(c,m),w=ae(d,m),_=ae(l,b),S=ae(s,b);w&&t<w&&r(w);S&&e+g<S&&n(S-g);A&&t>A&&r(A);y&&t>y&&r(y);_&&e+g>_&&n(_-g);return{width:t,height:e}}function ne(){var t=this.Et,e=this.Dt,o=this.options,i=o.floatingHCenter,r=o.floatingTop,n=o.floatingRight,a=o.floatingBottom,s=o.floatingLeft,l=o.moduleAPI,d=l.getAdHeight,c=l.getAdWidth,u=l.getIndents,h=d&&d(),p=c&&c();if(!(h&&p&&e&&t))return null;var f=e.getBoundingClientRect(),g=f.width,m=f.height,v=f.left,b=f.top,y=u&&u(),A=y.top,w=y.bottom,_=y.outsideWidth,S=y.outsideHeight,M=h+A+w,O="";if(i){var I=(g-_)/2;O+="translateX("+Object(Xn.u)(I)+") "}else s?O+="translateX("+Object(Xn.u)(s)+") ":n&&(O+="translateX(calc("+Object(Xn.u)(g)+" - "+Object(Xn.u)(n)+" - "+Object(Xn.u)(_)+")) ");r?O+="translateY("+Object(Xn.u)(r)+") ":a&&(O+="translateY(calc("+Object(Xn.u)(m)+" - "+Object(Xn.u)(a)+" - "+Object(Xn.u)(M)+")) ");this.logger.trace(this[Ys]+' calcFloatingWidthAndPosition() transform="'+O+'"');return{width:Object(Xn.u)(_),height:Object(Xn.u)(S),top:Object(Xn.u)(b),left:Object(Xn.u)(v),transform:O}}function ae(t,e){var o=Object(Xn.x)(t);return o&&o*e||+t}function se(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function le(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function de(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}});e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}function ce(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function ue(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function he(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}});e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}function pe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function fe(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function ge(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}});e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}function me(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function ve(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function be(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function ye(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}});e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}function Ae(t,e){Ln.b.trace(Dl+".scrollTo("+t+", "+(void 0===e?"undefined":Ol(e))+")");var o=void 0;e&&(kl=e);var i=function i(){var r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;if((!Pl||kl)&&jl){o=o||r;var n=Math.min(1,(r-o)/1e3*2),a=(jl-window.scrollY)*n;if(n>0&&Math.abs(a)<.05){Ln.b.trace(Dl+".scrollTo("+t+") Calling callback  ("+(void 0===e?"undefined":Ol(e))+")");kl&&kl();window.scrollTo(window.scrollX,jl);kl=null;jl=null;return}window.scrollTo(window.scrollX,Math.round(window.scrollY+a));window.requestAnimationFrame(i)}};if(!Pl&&!jl){jl=t;window.requestAnimationFrame(i)}jl=t}function we(){Ln.b.trace(Dl+" @resize");this.dt()}function _e(){var t=this.Ct(),e=t.moduleTop,o=t.visiblePercent,i=this.options.closeFactor;this.ct();!Pl&&!jl&&o>1-i&&window.scrollTo(window.scrollX,e);if(Gn.e){var r=this.module,n=r.O("volume"),a=.6*(window.innerHeight-document.querySelector("html").clientHeight);Object(qn.c)(n,{marginBottom:a+"px"})}}function Se(){Ln.b.trace(Dl+" @AdLoaded",2);var t=this.module,e=this.slot,o=t.getAdAspectRatio();if(!o)throw new Error(Dl+" Invalid aspect ratio  ("+o+")");var i=t.O("iframe");this.wrapper=t.O("wrapper");Object(qn.c)(i,{position:"absolute",left:0,bottom:0,width:"100%"});Object(qn.c)(e,{display:"",transform:"translate3d(0,0,0)"});this.xt(t);this.Y(window,"resize",this.onResize);this.Y(window,"scroll",this.onScroll);this.Y(window,"touchstart",this.onTouchStart,{passive:!0});this.Y(window,"touchend",Nl,{passive:!0});this.Y(this.wrapper,"touchstart",this.onTouchStart,{passive:!0});this.Y(this.wrapper,"touchend",Nl,{passive:!0});this.ct();this.dt()}function Me(){Ln.b.trace(Dl+" @AdVideoStart",2);this.dt();this.It();this.ct()}function Oe(){Ln.b.trace(Dl+" @AdResumed",2);this.ct()}function Ie(){var t=this.module,e=t.getAdSkippableState();Ln.b.trace(Dl+" @AdSkippableStateChange("+e+")",2);this.ct()}function Ee(){var t=this;Ln.b.trace(Dl+" @AdStopped",2);var e=this.module,o=this.Ct(),i=o.moduleBottom;if(o.visiblePercent>0){Tl=function(){Pl=!1;t.Tt(i,function(){e.S()})};Pl||Nl()}else e.S()}function De(){Ln.b.trace(Dl+" @touchstart");Pl=!0;jl=null;this.Y(window,"touchend",this.onTouchEnd);this.Y(this.wrapper,"touchend",this.onTouchEnd)}function Ce(){Ln.b.trace(Dl+" @touchend");Pl=!1;this.J(window,"touchend",this.onTouchEnd);this.J(this.wrapper,"touchend",this.onTouchEnd);var t=this.options.closeFactor,e=this.Ct(),o=e.visiblePercent,i=e.moduleTop;if(this.waitingForInitialScroll&&o>t){this.Tt(i);this.waitingForInitialScroll=!1}this.It();this.ct()}function xe(t,e){t.raw=e;return t}function Te(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Pe(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function je(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}});e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}function ke(){var t=this,e=this.module;this.logger.trace(this[ql]+".initOverlayControls()");var o=e.O("wrapper"),i=this.Pt(),r=i?i.getSize():{},n=r.width,a=void 0===n?0:n,s=r.height,l=void 0===s?0:s;this.jt=Object(qn.b)(o,"div",{position:"absolute",zIndex:2,left:0,top:0,width:a+"px",height:l+"px",fontSize:0,color:"#333",borderRadius:"4px",boxShadow:"none",transitionProperty:"top, width, height",transitionDuration:"0ms",transitionTimingFunction:"ease-out",visibility:"hidden",background:"transparent",opacity:0},null,function(){return e.skipAd()});this.jt.classList.add("___overlay___");Re.call(this);Fe.call(this);var d=void 0;this.updateAfterTransitionEndWithBind=d=function(e){t.logger.none(t[ql]+".updateAfterTransitionEnd() propertyName="+(e&&e.propertyName),2,"lightgreen");var o=e||{},i=o.propertyName;if("height"===i||"width"===i){var r=0^t.jt.offsetWidth,n=0^t.jt.offsetHeight,a=t.overlayControlsTargetWidth,s=t.overlayControlsTargetHeight;t.logger.trace(t[ql]+".updateAfterTransitionEnd() isManualCheck="+(e&&e.manualCheck)+" propertyName="+(e&&e.propertyName)+" width="+r+" overlayControlsTargetWidth="+a+" height="+n+" overlayControlsTargetHeight="+s+" mainTransitionWasFinished="+t.mainTransitionWasFinished+" mainTransitionWasStarted="+t.mainTransitionWasStarted,2);if(!(!a||!s||!t.mainTransitionWasStarted||!e||"height"!==e.propertyName&&"width"!==e.propertyName||Math.abs(n-s)>5||Math.abs(r-a)>5)){t.mainTransitionWasFinished=!0;t.mainTransitionWasStarted=!1;t.logger.none(t[ql]+".updateAfterTransitionEnd() mainTransitionWasStarted="+t.mainTransitionWasStarted);setTimeout(function(){t.update(!1,!1);var e=t.kt,o=t.Rt,i=t.options.thumbnailBackgroundColor;e&&Object(qn.c)(e,{opacity:1});Object(qn.c)(o,{backgroundColor:i})},1)}}}.bind(this);setTimeout(function(){t.Y(t.jt,"transitionend",d)},1)}function Re(){var t=this.options.transitionDuration;this.logger.trace(this[ql]+".initThumbnail()");this.Rt=Object(qn.b)(this.jt,"div",{position:"relative",zIndex:2,width:"100%",height:"100%",borderRadius:"4px 0 0 4px",textAlign:"center",overflow:"hidden",opacity:.95,backgroundColor:"transparent",transitionProperty:"top, width, height",transitionDuration:t+"ms",transitionTimingFunction:"ease-out",display:"flex",alignItems:"center",justifyContent:"center"});this.Rt.className="___thumbnailWrapper___";this.kt=Object(qn.b)(this.Rt,"div",{height:"auto",width:"auto",zIndex:1,color:"grey",lineHeight:1.2,opacity:0,transition:"all "+t+"ms ease-out"},os(Wl))}function Fe(){var t=this.options.transitionDuration;this.logger.trace(this[ql]+".initCountdown()");var e=this.Ft=Object(qn.b)(this.jt,"div",{position:"absolute",zIndex:1,top:0,right:"34%",width:"34%",height:"100%",visibility:"hidden",display:"flex",flex:"0 0 auto",flexDirection:"column",justifyContent:"space-evenly",alignItems:"center",boxSizing:"border-box",background:"white",borderRadius:"0 4px 4px 0",fontSize:"2.7vh",transition:"all "+t+"ms ease-out",transitionDelay:1.5*t+"ms"});e.className="___skipAd___";this.Nt=Object(qn.b)(e,"div",{display:"none",paddingTop:0,paddingBottom:0,paddingLeft:"5%",paddingRight:"5%",lineHeight:1,textAlign:"center"});this.Vt=Object(qn.b)(e,"div",{textAlign:"center"});var o=this.Lt=Object(qn.b)(this.Vt,"div",{display:"flex",justifyContent:"center",alignItems:"center",fontSize:"10px",fontWeight:"bold",width:"2vh",height:"2vh",lineHeight:1,borderRadius:"50%",backgroundColor:"#d3d3d3",boxSizing:"border-box"});o.className="___countdownValueText___";setTimeout(function(){return Object(qn.c)(o,{transition:"all 250ms"})},1)}function Ne(t,e){var o=this.jt,i=this.Rt,r=this.options,n=r.left,a=r.top,s=r.transitionDuration;this.logger.trace(this[ql]+".updateOverlayControls()");var l=0^parseFloat(t),d=0^parseFloat(e);this.overlayControlsTargetWidth=t;this.overlayControlsTargetHeight=e;this.logger.log(this[ql]+".updateOverlayControls() blockWidth:"+l+" blockHeight:"+d,2,"brown");s&&Object(qn.c)(o,{opacity:1});Object(qn.c)([o,i],{transitionDuration:s+"ms"});setTimeout(function(){Object(qn.c)(o,{left:n,top:a,width:Object(Xn.u)(l),height:Object(Xn.u)(d)});Object(qn.c)(i,{width:"66%"});!s&&Object(qn.c)(o,{opacity:1})},1);this.Pt()||Object(qn.c)(o,{transition:"width 1ms, height 1ms",left:"-"+t})}function Ve(t){var e=this;this.logger.trace(this[ql]+".updateThumbnail()");var o=this.kt;return Le.call(this).then(function(i){e.logger.trace(e[ql]+".updateThumbnail() gotThumbnail="+i);o&&Object(qn.c)(o,{fontSize:parseInt(t,10)/6+"px"});return i})}function Le(){function t(){var t=this,e=this.Rt,o=this.kt;if(!e)return Promise.resolve(!1);var i=this.zt;return new Promise(function(r){if(o){o.remove();delete t.kt}var n=null;if(i){n=t.Wt=Object(qn.b)(e,"img",{position:"relative",height:"100%",zIndex:2});n.src=i}r(n)})}var e=this;return this.Wt?Promise.resolve(this.Wt):this.zt?t.call(this):new Promise(function(o){var i=e.Pt(),r=i&&i.getThumbnail&&i.getThumbnail();if(!r){e.logger.warn(e[ql]+".updateThumbnail() "+(i?"currentPlayer did not return thumbnailImage ":"Can not found currentPlayer"));return o(!1)}e.logger.log(e[ql]+".getThumbnail() Got currentPlayer",2,"green");Object(Xn.C)(r).then(function(t){return"error"!==t.type?e.zt=r:null}).then(function(){return t.call(e)}).then(function(t){return o(!!t)});return o(!0)})}function ze(t){if(this.mainTransitionWasFinished){var e=this.jt,o=this.Ft,i=this.Nt,r=this.Wt,n=this.Lt,a=this.options,s=a.left,l=a.transitionDuration,d=a.boxShadow,c=e.clientHeight;this.logger.trace(this[ql]+".updateCountdown() img["+e.clientWidth+":"+c+"]");(Gn.f||c<=55||!r)&&(t=!1);var u=t?c/2:c/1.5;Object(qn.c)(i,{display:t?"":"none"});Object(qn.c)(e,{boxShadow:d});Object(qn.c)(o,{visibility:"visible"});if(this.Pt()){Object(qn.c)(e,{transition:"none"});Object(qn.c)(i,{transition:"none"});Object(qn.c)(o,{fontSize:c/6+"px",transition:"width 0ms, transform "+l/2+"ms ease-out",transform:"translateX(98%)"})}else{Object(qn.c)(e,{left:s,transition:"all "+l+"ms ease-out"});Object(qn.c)(o,{flexDirection:"row",width:"100%",right:"0",transition:"none"})}Object(qn.c)(n,{fontSize:u/2+"px",width:u+"px",height:u+"px"})}else this.logger.trace(this[ql]+'.updateCountdown() event "transitionend" for overlayControls can be not occurs')}function We(){var t=this.module,e=this.options.width;this.logger.trace(this[ql]+".calculateBlockSize()");var o=t.getAdWidth(),i=o*(parseInt(e,10)/100);return{blockWidth:i+"px",blockHeight:i/2.5+"px"}}function He(){var t=this.jt,e=this.Lt,o=this.options,i=o.countdownColor,r=o.countdownBackgroundColor,n=o.countdownHoverColor,a=o.countdownBackgroundHoverColor;this.Y(t,"mouseenter",function(){Object(qn.c)(t,{cursor:"pointer"});Object(qn.c)(e,{backgroundColor:a,color:n})});this.Y(t,"mouseleave",function(){Object(qn.c)(t,{cursor:"auto"});Object(qn.c)(e,{backgroundColor:r,color:i})})}function Ue(){this.ot(this.TIMER_NAME)}function Be(t){var e=this.jt;Object(qn.c)(e,{visibility:"visible",opacity:1});t.setAdSkippableState(!1);Xe.call(this)}function qe(){this.logger.trace(this[ql]+" @AdVideoComplete",2);this.ot(this.TIMER_NAME)}function Xe(){var t=this;this.rt(this.TIMER_NAME,function(){Ye.call(t);Xe.call(t)},Xl)}function Ge(){var t=this.getAdDuration()||0,e=this.getAdElapsedTime()||0,o=this.M("skipAdCountdown","duration")||t;return{time:Math.round(Math.min(t,o)-e),skipTime:o,adDuration:t}}function Ye(){var t=this.module,e=this.Nt,o=this.Lt,i=Ge.call(t),r=i.time,n=i.skipTime,a=i.adDuration;this.logger.none(this[ql]+" @AdRemainingTimeChange "+r+":"+n+":"+a,2);if(r>0){e.innerHTML=os(Hl);o.innerHTML=""+r}if(r<=0&&n<=a&&!this.Ht){this.Ht=!0;this.logger.trace(this[ql]+" It's time to show play button");t.setAdSkippableState(!0);e.innerHTML=os(Ul);Object(qn.c)(o,{display:"block"});o.innerHTML=Ll.a;He.call(this)}ze.call(this,!0)}function Je(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Qe(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function Ze(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}});e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}function Ke(){this.logger.none(Zl+" @scroll");this.ct()}function $e(){this.logger.trace(Zl+" @AdLoaded",2);this.Y(document,"visibilitychange",eo.bind(this),!1);this.ct()}function to(){this.logger.trace(Zl+" @AdSizeChange",2);var t=this.module,e=this.collapsingThumbnail;t.Ut(["pausing","paused","resuming","playing"])&&e.update(!0)}function eo(){var t=this.module,e=document,o=e.visibilityState;this.logger.trace(Zl+" @visibilitychange ("+o+")",2);"hidden"===o?t.Ut("playing")&&t.pauseAd({invoker:this,method:"onVisibilityChange"}):this.ct()}function oo(){this.logger.trace(Zl+" @AdVideoStart",2);ao.call(this,!0);this.ct()}function io(){this.logger.trace(Zl+" @AdStarted",2);this.ct()}function ro(){this.logger.trace(Zl+" @AdStopped",2);ao.call(this,!1)}function no(){var t=this;this.logger.trace(Zl+" @AdDestroyed",2);ao.call(this,!1);var e=this.options.destroyTimeout;setTimeout(function(){return t.S()},e)}function ao(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],e=this.slot,o=this.options.playerPlaybackClass;e&&o&&(t?e.classList.add(o):e.classList.remove(o))}function so(t,e){var o=this.vqPlayer;this.logger.trace(Zl+" Got "+e+" from player");o.subscribe(t,e)}function lo(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function co(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function uo(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}});e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}function ho(){var t=this;window.context.reportRenderedEntityIdentifier&&window.context.reportRenderedEntityIdentifier("videonow");this.adLoaded=!0;var e=this.lastPostponedAction;e&&e();setTimeout(function(){return t.ft()},1)}function po(){var t=this;if(window.context.renderStart){var e=this.options.moduleAPI.getIndents,o=e&&e()||{},i=o.outsideWidth,r=o.outsideHeight;if(i&&r){Ln.b.log(this[rd]+".onAdStarted() renderStart("+i+", "+r+")",2,"green");window.context.onResizeSuccess(function(e,o){Ln.b.trace(t[rd]+".onAdStarted:onResizeSuccess("+e+", "+o+")");setTimeout(function(){return t.ft()},1)});window.context.renderStart({width:i,height:r})}}}function fo(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function go(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function mo(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}});e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}function vo(){var t=this;Ln.b.trace(dd+" @resize");(window.savedRequestAnimationFrame||requestAnimationFrame)(function(){return t.Bt()})}function bo(){Ln.b.trace(dd+" @AdLoaded",2);this.module.startAd()}function yo(){var t=this;Ln.b.trace(dd+" @AdVideoStart",2);this.Bt();Object(qn.c)(document.body,{overflow:"hidden"});Object(qn.c)(this.overlayNode,{visibility:"",zIndex:2147483647});if(!window.savedRequestAnimationFrame){window.savedRequestAnimationFrame=window.requestAnimationFrame;window.requestAnimationFrame=function(e){t.savedRequestAnimationFrameCallbacks.push(e)}}}function Ao(){Ln.b.trace(dd+" @AdDestroyed",2);this.qt();Ln.b.trace(dd+" Restoring DOM elements");Object(qn.c)(document.body,{overflow:""});if(window.savedRequestAnimationFrame){window.requestAnimationFrame=window.savedRequestAnimationFrame;this.savedRequestAnimationFrameCallbacks.forEach(requestAnimationFrame);window.savedRequestAnimationFrame=null;this.savedRequestAnimationFrameCallbacks=[]}}function wo(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function _o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function So(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function Mo(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}});e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}function Oo(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Io(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function Eo(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}});e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}function Do(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Co(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function xo(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}});e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}function To(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Po(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function jo(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}});e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}function ko(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Ro(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function Fo(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}});e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}function No(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Vo(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function Lo(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}});e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}function zo(){var t=this.module,e=this.invisible,o=t.O(oc);if(o||e){var i=t.getAdSkippableState();this.logger.trace(ic+" @AdSkippableStateChange()) adSkippableState="+i,2);var r=null;if(o){Object(qn.c)(o,{display:i?"block":"none"});r=Object(Xn.j)(o).offsetWidth}t.trigger("AdSkipAdPositionChanged",{offsetWidth:r})}}function Wo(t,e){t.raw=e;return t}function Ho(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Uo(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function Bo(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}});e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}function qo(){var t=this.totalTimeCountdown,e=this.invisible,o=this.reservedSkipAdTimerHandler,i=this.moduleAPI,r=i.getAdElapsedTime,n=i.getControlNode,a=i.getAdRemainingTime,s=i.getAdSkippableState,l=i.getAdDuration,d=this.timeBeforeSkip||0,c=s(),u=a(),h=l();if(u>h&&!o){this.logger.error(hc+" adRemainingTimeChecker():remainingTime("+u+") is greater than adDuration("+h+") timeBeforeSkip="+d+" sec");this.reservedSkipAdTimerHandler=this.rt(fc,Go.bind(this),1e3*d)}this.logger.none(hc+" adRemainingTimeChecker():\ninvisible="+e+"\nadSkippableState="+c+"\ntimeBeforeSkip="+d+"\nadDuration="+h+"\nremainingTime="+u+"\ntotalTimeCountdown="+t+" ",2,"pink");if((d===1/0||d>h)&&!t||c&&(!t||t&&!u))return!1;if(u<0)return!0;var p=n(uc);this.logger.none(hc+" adRemainingTimeChecker():skipAdCountdown="+p,2,"pink");if(!p&&!e)return!1;var f=r(),g=0!==h?Math.round(Math.min(h,d)-f):u,m=g>0?g:Math.round(u);this.logger.none(hc+" @AdRemainingTimeChange "+g+":"+d+":"+h+" adElapsedTime="+f,1,"cyan");if(!e){p.innerHTML=this.isSmallSizeModule?os(lc,m):g>0&&d!==1/0&&d<=h?os(dc,m):os(cc,m);Object(qn.c)(p,{display:"block"})}if(!this.targetTimeWasReached&&(!u||g<=0&&(d<=h||0===h))){this.logger.trace(hc+" Target time reached");Go.call(this);this.targetTimeWasReached=!0}return!0}function Xo(){this.logger.trace(hc+" @AdVideoComplete");this.logger.log(hc+" Video complete, countdown target time is not reached",1);Go.call(this)}function Go(){var t=this.totalTimeCountdown,e=this.invisible,o=this.moduleAPI,i=o.getControlNode,r=o.setAdSkippableState,n=o.getAdRemainingTime;this.starting=!1;r(!0);if(!e){var a=n(),s=i(uc);if(s&&(!t||t&&!a)){Object(qn.c)(s,{display:"none"});this.ot(pc)}}}function Yo(){var t=this;if(!this.starting){this.starting=!0;var e=this.moduleAPI||{},o=e.getAdDuration,i=e.addVPAIDEventListener,r=e.removeVPAIDEventListener,n=o&&o();if(n){this.logger.trace(hc+" @AdStarted: adDuration="+n+", so check adRemainingTime and call invokeRemainingTimeChecker()");Jo.call(this)}else{this.logger.trace(hc+" @AdStarted: invokeRemainingTimeChecker() will be invoked in event AdDurationChange ");var a=i("AdDurationChange",function(){r("AdDurationChange",a);t.logger.trace(hc+" @AdDurationChange: calls waitAdRemainingTimeAndCallInvokeRemainingTimeChecker()");setTimeout(Jo.bind(t,0),1)},this)}}}function Jo(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;if(t>10)this.logger.warn(hc+".waiteAdRemainingTimeAndCallInvokeRemainingTimeChecker()("+t+"): fail to call invokeRemainingTimeChecker() - to many attempts("+t+")");else{var e=this.moduleAPI||{},o=e.getAdRemainingTime,i=e.getAdDuration,r=i&&i();if(o&&o()&&r)Qo.call(this);else{this.logger.trace(hc+".waitAdRemainingTimeAndCallInvokeRemainingTimeChecker(): next attempt("+t+") to call invokeRemainingTimeChecker after 150 ms");setTimeout(Jo.bind(this,t+1),150)}}}function Qo(){var t=this;this.rt(pc,function(){qo.call(t)&&Qo.call(t)},gc)}function Zo(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Ko(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function $o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}});e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}function ti(){this.logger.trace(Ic+" @AdVideoComplete Clearing updateVolume timeout ("+this.Xt+")",2);this.cancelVolumeUpdate()}function ei(){this.logger.trace(Ic+" @AdDestroyed Clearing updateVolume timeout ("+this.Xt+")",2);this.cancelVolumeUpdate()}function oi(){var t=this.O(Oc),e=Math.ceil(this.getAdVolume());t.innerHTML=Ec(e)}function ii(){var t=this.getAdExpanded(),e=this.getAdVolume();this.setAdVolume(+t?e:0,{step:1});this.logger.trace(Ic+" onAdExpandedChange() adExpanded="+t+" adVolume="+e)}function ri(){oi.call(this)}function ni(){this.logger.trace(Ic+" @AdAudioDisabled",2);var t=this.O(Oc);Object(qn.c)(t,qn.l)}function ai(){var t=this.vpaid.hasAudio;if(void 0===t){t=this.vpaid.getAdVolume()>-1}var e=this.O(Oc);e&&Object(qn.c)(e,{display:t?"block":"none"})}function si(t){var e=this;if(!this.mouseEventsAlreadySet){this.logger.trace(Ic+" initMouseEvents()");var o=t.O("container");this.Y(o,"mouseenter",function(){e.logger.trace(Ic+" @mouseleave adVolume(1)");t.setAdVolume(1,{invoker:e})});this.Y(o,"mouseleave",function(){e.logger.trace(Ic+" @mouseleave adVolume(0)");t.setAdVolume(0,{invoker:e})});this.mouseEventsAlreadySet=!0}}function li(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function di(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function ci(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}});e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}function ui(){var t=this.O(jc);Object(qn.c)(t,{display:""})}function hi(){var t=this.O(jc);Object(qn.c)(t,{display:"none"})}function pi(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function fi(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function gi(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}});e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}function mi(){var t=this.O(Lc);t&&Object(qn.c)(t,{width:"0%"})}function vi(){var t=this.O(Lc);t&&Object(qn.c)(t,{width:"100%"})}function bi(){var t=this.O(Lc);if(t){var e=this.getAdDuration(),o=this.getAdRemainingTime(),i=1-o/e;Object(qn.c)(t,{width:100*i+"%"})}}function yi(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Ai(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function wi(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}});e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}function _i(t,e){Ln.b.trace(Bc+" @AdSizeChange",2);var o=this.O(Uc),i=this.O("callButton"),r=this.getAdWidth(),n=e/t,a=Math.min(r*Qc,t),s=Math.min(a*n,e),l=this.format.isFloatingMode(),d=0;if(l){d=Jc;if(!i){a+=2*Yc;s+=2*Yc}}Object(qn.c)(o,{left:d+"px",backgroundSize:a+"px "+s+"px",width:a+"px",height:s+"px"});this.rt("callButtonIsReady",Mi.bind(this),0)}function Si(){var t=this.O(Uc);Object(qn.c)(t,{visibility:"visible"})}function Mi(){var t=this.O(Uc),e=this.O("callButton"),o=(e&&e.offsetHeight||0)-t.offsetHeight;if(o>0){var i=window.getComputedStyle(e),r=i.marginTop;Object(qn.c)(t,{marginTop:o/2+parseInt(r,10)+"px"})}}function Oi(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Ii(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function Ei(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}});e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}function Di(){Ln.b.trace(iu+" @AdSizeChange",2);var t=this.O(ou),e=this.O("advLogo"),o=this.getAdWidth(),i=e?fu:0,r=e&&e.offsetWidth||0,n=getComputedStyle(t),a=n.borderWidth,s=2*parseInt(a,10),l=this.format.isFloatingMode(),d=Math.min(o*pu,uu),c=o*hu;o<gu&&(c=o-r-i-2*bu-s);var u=0;if(l){c=o-r-i-2*bu-s-20;d=uu;u=mu}Object(qn.c)(t,{right:u+"px",width:c+"px",height:d+"px"});this.rt("advLogoIsReady",xi.bind(this),0)}function Ci(){var t=this.O(ou);Object(qn.c)(t,{visibility:"visible"})}function xi(){var t=this.O(ou),e=this.O("advLogo"),o=(e&&e.offsetHeight||0)-t.offsetHeight;if(o>0){var i=getComputedStyle(e),r=i.marginTop;Object(qn.c)(t,{marginTop:o/2+parseInt(r,10)+"px"})}}function Ti(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Pi(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function ji(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}});e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}function ki(){Ln.b.trace(Mu+" @AdSizeChange",2);var t=this.O(Su),e=this.format.isFloatingMode(),o=e?"hidden":"visible",i=this.getAdWidth(),r=i*(Gn.f?xu:Tu);Object(qn.c)(t,{width:r+"px",visibility:o});Fi.call(this)}function Ri(){var t=this.O(Su);Object(qn.c)(t,{visibility:"visible"})}function Fi(){var t=this.O(Su),e=this.O("title"),o=e?parseInt(getComputedStyle(e).height,10):0,i=parseInt(getComputedStyle(t).width,10),r=(this.M(Su,"position")||Pu).toLowerCase(),n=this.getAdWidth(),a=this.getAdHeight(),s=this.M(Su,"marginV")||"10%",l=this.M(Su,"marginH")||"5%",d={};~r.indexOf("top")?d.top=Object(Xn.u)(Ni(l,a)+o):~r.indexOf("bottom")&&(d.bottom=Object(Xn.u)(Ni(s,a)));~r.indexOf("left")?d.left=Object(Xn.u)(Ni(l,n)):~r.indexOf("right")?d.right=Object(Xn.u)(Ni(l,n)):d.left=Object(Xn.u)(.5*n-i/2);Object(qn.c)(t,d)}function Ni(t,e){var o=Object(Xn.x)(t);return null!=o?o*e:parseFloat(t)}function Vi(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Li(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function zi(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}});e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}function Wi(t,e){var o=t.O(Nu),i=t.O("iframe"),r=t.O("wrapper"),n=t.format.isFloatingMode();if(this.Gt!==n){var a=Object(Xn.j)(r),s=a.outsideHeight,l=Vu+zu;if(n){Object(qn.c)(o,{display:"none"});Object(qn.c)(r,{marginBottom:Object(Xn.u)(e)});Object(qn.c)(i,{height:Object(Xn.u)(Object(Xn.j)(r).outsideHeight)})}else if(!this.Yt){Object(qn.c)(o,{display:"block"});Object(qn.c)(r,{marginBottom:Object(Xn.u)(e+l)});Object(qn.c)(i,{height:Object(Xn.u)(Object(Xn.j)(r).outsideHeight)})}s!==Object(Xn.j)(r).outsideHeight&&t.trigger("slotSizeChanged")}this.Gt=n}function Hi(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Ui(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function Bi(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}});e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}function qi(t){var e=t.O(Uu);e&&Object(qn.c)(e,{display:"block"});if(++this.attemptsCounter>this.attemptLimit){var o=t.vpaid;o&&o.skipAd()||!t.Ut(["destroyed","destroying"])&&t.skipAd()}}function Xi(t){var e=t.O(Uu);this.attemptsCounter=0;e&&Object(qn.c)(e,{display:"none"})}function Gi(t){var e=t.getAdRemainingTime();if(e<0)Xi.call(this,t);else{if(t.Ut("playing")&&e===this.oldCurrentTime){this.logger.warn(Bu+".videoProgress() getAdRemainingTime returns the same time. Spinner is visible. currentTime="+e+" oldCurrentTime="+this.oldCurrentTime);qi.call(this,t)}else Xi.call(this,t);this.oldCurrentTime=e}}function Yi(t){this.logger.trace(Bu+" onVideoStart() @AdVideoStart or @AdPlaying",2);clearInterval(this.videoProgressId);this.videoProgressId=setInterval(Gi.bind(this,t),1e3)}function Ji(t){clearInterval(this.videoProgressId);Xi.call(this,t)}function Qi(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Zi(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function Ki(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}});e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}function $i(t,e){try{var o=localStorage.getItem(e);if(null===o){o=1+Math.floor(Math.random()*t);localStorage.setItem(e,o)}return""+o}catch(e){return""+(t+1)}}function tr(){return""+(1+Math.floor(100*Math.random()))}function er(t){var e=/\s*,\s*/i,o=t&&t.querySelector('Extension[type="'+nh+'"]');if(o){this.logger.trace(ah+" parseVnProhibitedWords");var i=Object(Xn.B)(o),r=Object(Xn.m)(o,"global"),n=Object(Xn.m)(o,"important"),a=Object(Xn.m)(o,"fatal"),s=o&&o.querySelector("words"),l=s&&Object(Xn.o)(s).replace(/[,\s]+$/g,"").split(e).join("|"),d=Object(Xn.o)(o,"selector")||"",c=o.querySelectorAll("blockedMetrics");return{options:i,pattern:l,global:r,selector:d,trackings:c&&Array.from(c).map(function(t){return Object(Xn.o)(t)}),fatal:a,important:n}}return null}function or(t){var e=void 0;try{e=window.top.document.querySelectorAll(t);e&&e.length||(e=window.top.document.querySelectorAll("body"))}catch(t){}if(!e||!e.length)try{e=document.querySelectorAll(t)}catch(t){}e&&e.length||(e=document.querySelectorAll("body"));return Array.from(e).map(function(t){return t.innerText||t.textContent}).join("\n")}function ir(t){var e=this.getAPI&&this.getAPI().logger||Ln.b,o={controls:{},global:!1},i=t&&t.querySelector('Extension[type="vnControls"]');if(i){o.global=Object(Xn.m)(i,"global");var r=i.querySelectorAll("control");r&&Array.from(r).forEach(function(t){var i={},r=t.getAttribute("id");i.id=r;i.parsePoint=!0;try{var n=Object(Xn.o)(t);n&&(i.css=JSON.parse(n));t&&t.getAttributeNames&&t.getAttributeNames().forEach(function(e){return i[e]=t.getAttribute(e)});var a=i.global;i.global=a&&("true"===a||"1"===a)}catch(t){e.warn(ph+" Failed to parse CSS JSON of control "+r+" ("+t+")")}r&&(o.controls[r]=i)})}return o}function rr(t){this.logger.trace(mh+".parseVnBrowserCache()");var e=t&&t.querySelector('Extension[type="'+gh+'"]');if(e){return{enabled:"true"===e.getAttribute("enabled"),global:"true"===e.getAttribute("global"),important:"true"===e.getAttribute("important")}}return null}function nr(t){var e=ar(t);return{skipTime:e.skipTime,global:e.global,strict:e.strict,important:e.important}}function ar(t){if(!t)return{skipTime:null,strict:!1};var e=null,o=t.querySelector("Linear[skipoffset]"),i=o&&o.getAttribute("skipoffset");i&&(e=~i.indexOf("%")?sr(t,i):Object(Xn.y)(i));var r=t.querySelector('Extension[type="skipTime2"]')||t.querySelector('Extension[type="skipTime"]'),n="true"===(r&&r.getAttribute("strict")),a="true"===(r&&r.getAttribute("global")),s="true"===(r&&r.getAttribute("important"));e=e||Object(Xn.y)(Object(Xn.o)(r,"","0"));return{skipTime:e,strict:n,global:a,important:s}}function sr(t,e){var o=Object(Vn.c)(t),i=.01*parseInt(e.substr(0,2),10);return o&&Math.floor(Object(Xn.y)(o)*i)||NaN}function lr(){var t=this.getAdAspectRatio(),e=this.O("wrapper"),o=Object(qn.b)(e,"div",yh({display:"none",position:"absolute",zIndex:5,bottom:t<=1?"10%":"25%",left:"50%",transform:"translateX(-50%)",padding:"5px",borderRadius:"3px",color:"white",background:"rgba(0, 0, 0, 0.3)",fontSize:"10pt",lineHeight:1.3,textAlign:"center",whiteSpace:"pre",pointerEvents:"none"},this.Jt(Ah,"css")));this.Qt(Ah,{node:o})}function dr(){var t=this.O("subtitle");Object(qn.c)(t,{display:"none"});t.innerHTML=""}function cr(t){var e=this.O("subtitle"),o=this.getAdElapsedTime(),i=t.find(function(t){var e=t.startTime,i=t.endTime;return e<=o&&o<i});if(i){Object(qn.c)(e,{display:""});e.innerHTML=i.text}else{Object(qn.c)(e,{display:"none"});e.innerHTML=""}}function ur(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function hr(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function pr(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}});e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}function fr(t){var e=t.vnAfterplay;e&&e.S();t.vnAfterplay=null;return new Rh({module:t}).init(t)}function gr(t){this.logger.trace(kh+".parseVnAfterPlay()");var e=t&&t.querySelector('Extension[type="'+jh+'"]');if(e){var o={};o.fgColor=Object(Xn.o)(e,"color","white");o.bgColor=Object(Xn.o)(e,"bgColor","black");o.timeout=Object(Xn.y)(Object(Xn.o)(e,"time"));var i=e.querySelector("replay");if(i){var r=Object(Xn.o)(i,"label","Воспроизвести еще раз"),n={},a=i.querySelectorAll("clickTracking");n.clicks=a&&Array.from(a).map(function(t){return Object(Xn.o)(t)});o.replay={title:r,trackings:n}}var s=e.querySelector("close");if(s){var l=s&&Object(Xn.o)(s,"label","Закрыть"),d={},c=s.querySelectorAll("clickTracking");d.clicks=c&&Array.from(c).map(function(t){return Object(Xn.o)(t)});o.close={title:l,trackings:d}}var u=e.querySelector("advertiser");if(u){var h=Object(Xn.o)(u,"label","Перейти на сайт рекламодателя"),p=Object(Xn.o)(u,"url")||Object(Xn.o)(t,"ClickThrough"),f={};if(Object(Xn.o)(u,"clickTracking",!1)){var g=u.querySelectorAll("clickTracking");f.clicks=g&&Array.from(g).map(function(t){return Object(Xn.o)(t)})}else{var m=t.querySelectorAll("VideoClicks ClickTracking");f.clicks=m&&Array.from(m).map(function(t){return Object(Xn.o)(t)})}o.advertiser={title:h,url:p,trackings:f}}var v=e.querySelector("featured");if(v){o.featured={html:Object(Xn.o)(v,null,"")}}o.global=Object(Xn.m)(t,"global");o.important=Object(Xn.m)(t,"important");o.parsePoint=!0;return o}return null}function mr(t,e){var o=this;this.logger.trace(kh+" Afterplay");t.Zt("afterplay");var i=10*(Gn.f&&window.devicePixelRatio||0),r=e.fgColor,n=e.bgColor,a=t.O("iframe"),s=t.O("wrapper"),l=t.O("skipAd"),d=t.M("skipAd","afterplay"),c=t.Jt(jh,"css")||{},u=Object(qn.b)(s,"div",Ph({position:"absolute",zIndex:4,top:0,right:0,bottom:0,left:0,overflow:"hidden"},c)),h=e.advertiser,p=e.replay,f=e.close,g=p||h||f,m=Object(qn.b)(u,"div",{display:g?"flex":"block",width:"100%",height:"100%",fontSize:100-i+"%",lineHeight:1.5,fill:r,stroke:r,color:r,backgroundColor:n,userSelect:"none"});d&&l&&Object(qn.c)(l,{display:"none"});if(g){var v=Object(qn.b)(m,"div",{flex:"1 1 50%",display:"flex",flexFlow:"column nowrap",justifyContent:"center"});v.className="afterplay-controls";var b=function(t,e,o,r){var n=Object(qn.b)(t,"div",{display:"flex",alignItems:"center",width:"100%",padding:"2% 4%",cursor:"pointer",boxSizing:"border-box"},null,r);Object(qn.b)(n,"div",{width:"50px",height:"50px",transform:"scale("+(1-i/100)+")"},e);Object(qn.b)(n,"div",{width:"100%",paddingLeft:"10px",boxSizing:"border-box"},o);if(!Gn.f){n.addEventListener("mouseenter",function(){return Object(qn.c)(n,{opacity:.8})});n.addEventListener("mouseleave",function(){return Object(qn.c)(n,{opacity:1})})}return n},y=this.afterplayTimeoutId;if(p){var A=p.trackings;b(v,Ch.a,p.title,function(){o.logger.trace(kh+"::Replay @click Clearing updateVolume timeout ("+y+")");clearTimeout(y);Object(qn.u)(u);var e=A||{},i=e.clicks;i&&t.Kt(i);t.setAdVolume(1,{step:1});t.$t();d&&l&&Object(qn.c)(l,{display:"block"})}).className="___vn-replay-control_replay___"}if(h){var w=h.title,_=h.url,S=h.trackings;_&&b(v,tu.a,w,function(){o.logger.trace(kh+"::Advertiser @click Clearing updateVolume timeout ("+y+")");clearTimeout(y);var e=S||{},i=e.clicks;i&&t.Kt(i);Object(Xn.v)(_)})}if(f){var M=f.trackings;b(v,Th.a,f.title,function(){o.logger.trace(kh+"::Close @click Clearing updateVolume timeout ("+y+")");clearTimeout(y);var e=M||{},i=e.clicks;i&&t.Kt(i);t.S()})}}var O=e.featured;if(O){var I=O.html,E=g?{flex:"1 1 50%"}:{},D=Object(qn.b)(m,"div",E);D.className="afterplay-featured";Object(qn.b)(D,"div",{height:"100%",overflow:"auto"},I);var C=D.getElementsByTagName("script");if(C){a.contentWindow.VIDEONOW={subscribe:t.subscribe.bind(t)};!function(t,e){!function o(i){var r=C.item(i);if(r)if(r.src){var n=e.createElement("script");n.src=r.src;n.onload=o.bind(this,i+1);var a=e.getElementsByTagName("head")[0];try{a.appendChild(n)}catch(t){this.logger.warn(kh+' Failed to execute featured script src="'+n.src+'" ('+t+")")}}else{try{t.eval(r.innerHTML)}catch(t){this.logger.warn(kh+" Failed to execute featured script ("+t+")")}o(i+1)}}(0)}(a.contentWindow,a.contentDocument)}}var x=e.timeout;if(x&&x<1/0){this.logger.log(kh+" Afterplay auto close timeout "+1e3*x+"ms");this.afterplayTimeoutId=setTimeout(function(){o.logger.log(kh+" Afterplay auto close timeout reached",1);t.S()},1e3*x)}}function vr(){var t=this.afterplayTimeoutId;this.logger.trace(kh+" @AdDestroyed Clearing auto close timeout ("+t+")",2);clearTimeout(t)}function br(t){(this.logger||Ln.b).trace(".parseVnFormat()");var e=t&&t.querySelector('Extension[type="vnFormat"]');if(e){return{name:e.getAttribute("name"),global:Object(Xn.m)(e,"global"),important:Object(Xn.m)(e,"important"),options:Object(Xn.B)(e)}}return null}function yr(t){this.logger.trace(Wh+".parseVnBrowserCache()");var e=t&&t.querySelector('Extension[type="'+zh+'"][caching="true"]');if(e){var o="true"===e.getAttribute("global"),i="true"===e.getAttribute("important");return{serverUrl:e.getAttribute("serverUrl"),strict:"true"===e.getAttribute("strict"),global:o,important:i}}return null}function Ar(t){this.logger.trace(""+Bh);var e=t&&t.querySelector('Extension[type="'+Uh+'"]'),o=Object(Xn.m)(e,"global"),i=Object(Xn.m)(e,"important"),r={},n=function(t){var n=e&&e.querySelector(t);if(n){var a=Object(Xn.m)(n),s=wr(n,"global"),l=wr(n,"important");r[t]={url:a,important:_r(i,l),global:_r(o,s)}}};n("debug");n("passed");n("select");n("impression");r.impression||(r.impression={url:null,global:o});return r}function wr(t,e){var o=t.getAttribute(e);return"true"===o||"false"!==o&&null}function _r(t,e){return null==t?e:null==e?t:t&&e}function Sr(t){return new Promise(function(e){(t&&t.getAPI&&t.getAPI().logger||Ln.b).trace(""+Yh);var o=(t.te()||{})[Gh]||{},i=o.functionUrl,r=o.functionText,n=o.important,a=o.global;(i||r||n||a)&&t.Qt(Gh,{functionUrl:i,functionText:r,important:n},a);e(t)})}function Mr(t){this.logger.trace(Yh+" parseVnNoAdExtension()");var e=t&&t.querySelector('Extension[type="vnNoAd"]'),o=e&&e.querySelector("function"),i=e&&e.querySelector("scriptUrl"),r=Object(Xn.m)(e,"global"),n=Object(Xn.m)(e,"important");if(i){var a=Object(Xn.m)(i);this.logger.trace(Yh+" functionUrl:"+a+" global="+r+" important="+n);return{functionUrl:a,important:n,global:r}}if(o){var s=Object(Xn.m)(o);this.logger.trace(Yh+" function:"+s+" global="+r+" important="+n);return{functionText:s,important:n,global:r}}return null}function Or(t,e){var o=t.format,i=t.getAPI&&t.getAPI().logger||Ln.b;return new Promise(function(r,n){i.trace(Yh+" Executing");o.canExecuteNoAd&&!o.canExecuteNoAd()&&n(new Error(Yh+" runNoAd(). canceled "));var a=e||{},s=a.functionText,l=a.functionUrl;if(s&&s.length){var d=document.createElement("script");d.innerHTML=s;document.body.appendChild(d);r(t)}else if(l&&l.length){if(l){var c=decodeURIComponent(l);Object(Xn.t)(c).then(function(){i.trace(Yh+" script "+c+" was successfully loaded");r(t)}).catch(function(t){console.warn(Yh+" fail load script "+c+" "+t);n(t)})}}else n(new Error(Yh+" runNoAd(). No exists any function to execute"))})}function Ir(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Er(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function Dr(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}});e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}function Cr(t){var e=t.vnAdEvents;e&&e.S();t.vnAdEvents=null;return new Qh({module:t}).init(t)}function xr(t){var e=t&&t.querySelector('Extension[type="vnAdEvents"]'),o=e&&e.querySelector("function"),i=e&&e.querySelector("scriptUrl"),r=i&&decodeURIComponent(i),n=Object(Xn.m)(e,"global"),a=Object(Xn.m)(e,"handlerName"),s=Object(Xn.m)(e,"events"),l=s&&s.length,d=l?"*"===s?"*":s.split(/[\s+,]/):null;return{global:n,handlerName:a,events:d&&d.length?"*"===d?Zh:Zh.filter(function(t){return d.indexOf(t)>-1}):null,vnFunction:o,vnScriptUrl:r}}function Tr(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Pr(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function jr(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}});e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}function kr(t){var e=t.vnPageChanged;e&&e.S();t.vnPageChanged=null;return new tp({module:t}).init()}function Rr(t){var e=t&&t.querySelector('Extension[type="'+Kh+'"]'),o=Object(Xn.m)(e,"eventName"),i=Object(Xn.m)(e,"handlerName");return{global:Object(Xn.m)(e,"global"),important:Object(Xn.m)(e,"important"),eventName:o,handlerName:i}}function Fr(t){var e=t&&t.querySelector('Extension[type="'+ep+'"]');if(e){return{options:Object(Xn.B)(e),global:Object(Xn.m)(e,"global")}}return null}function Nr(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Vr(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Lr(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function zr(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}});e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}function Wr(){this.logger.warn(" global timeout timed out");this.ot(hp);this.ot(up);this.trigger("AdSkipped");this.trigger("AdError",Vn.a.GENERAL_VPAID_ERROR,"Call to initAd() timed out");this.S()}function Hr(){this.globalTimeoutProvider&&this.globalTimeoutProvider.pause();if(!this.Ut(["destroying","destroyed"])){this.Zt("loaded");this.logger.trace(" @AdLoaded adVolume="+this.adVolume,2);_n.call(this,"AdLoaded");var t=this.Jt("videobackground","css");if(!Object(Xn.s)(t)){var e=this.O("videoSlot");e&&Object(qn.c)(e,t)}var o=this.options,i=o||{},r=i.viqeoParentSlotClassName,n=this.M("vnShowViqeo");if(!n||r&&document.getElementsByClassName(r).length){if(this.startAdShouldBeInvoked){this.startAdShouldBeInvoked=!1;this.startAd()}}else{var a=this.O("slot"),s=a&&a.parentElement||a,l=Object(qn.n)(s,"div",{});l.className=r+" vn-module__"+this.mainModuleId;var d=this.data.map(function(t){return t.parameters}),c={},u="vn_module_"+this.mainModuleId,h=JSON.stringify(d);try{sessionStorage.setItem(u,h);c.key=u}catch(t){}c.parameters=d;c.disableExtensions=["vnShowViqeo"];wn.call(this,sp({},n.options,{parent:l},{vnData:JSON.stringify(c)}));this.ee()}}}function Ur(){var t=this;this.logger.trace(" @AdStarted",2);this.globalTimeoutProvider&&this.globalTimeoutProvider.stop();if(!this.Ut(["stopping,","stopped","destroying","destroyed"])){this.Zt("started");var e=this.adWidth,o=this.adHeight,i=this.viewMode,r=this.vpaid;r&&e&&o&&r.resizeAd(e,o,i);this.oe("creativeView");var n=this.O("container");if(n&&"1"!==getComputedStyle(n).zIndex&&this.isVpaidJs()){var a=n.querySelectorAll('[style *= "absolute"]'),s=Math.max.apply(Math,Array.prototype.map.call(a||[0],function(t){return t&&t.style&&+t.style.zIndex||0}));if(s>0){this.logger.warn(".onAdStarted() external vpaid override vnControls by elements with z-index="+s+". Fixed it by increasing z-index of ours vnControls");var l=this.format;this.ie.forEach(function(e){var o=e.getName(),i=t.O(o);if(i&&i.style&&i.style.zIndex){var r=+i.style.zIndex;if(!isNaN(r)){i.style.zIndex=r+s;"container"===o&&l&&l.setZIndex&&l.setZIndex(r+s)}}})}}vn.call(this)}}function Br(){this.logger.trace(" @AdStopped",2);this.Zt("stopped");this.re||this.Qt("videoSlot",{node:null});_n.call(this,"AdStopped")}function qr(){this.logger.trace(" @AdSkipped",2);this.oe("skip");_n.call(this,"AdSkipped");this.logger.log(".onAdSkipped() trigger('AdStopped')",1);this.trigger("AdStopped");var t=this.M("skipAd","afterplay")&&this.Ut("afterplay");this.logger.trace(".onAdSkipped() vnIsAfterplay="+t);if(!t){this.oe("close");this.S()}}function Xr(){this.adSkippableState=this.vpaid.getAdSkippableState();this.logger.trace(" @AdSkippableStateChange adSkippableState="+this.adSkippableState,2)}function Gr(){this.logger.log(" @AdSizeChange");if(!this.re){var t=this.vpaid.getAdWidth(),e=this.vpaid.getAdHeight();if(t<this.getAdWidth()||e<this.getAdHeight()){this.logger.trace(" @AdSizeChange making resize videoContainer width="+t+", height="+e,2);kn.call(this,t,e)}}}function Yr(){this.logger.trace(" @AdLinearChange adLinear="+this.vpaid.getAdLinear(),2)}function Jr(){var t=this.vpaid;this.adRemainingTime=t&&t.getAdRemainingTime()||0;this.adDuration=t&&t.getAdDuration()||0;this.logger.trace("@AdDurationChange adRemainingTime="+this.adRemainingTime+" this.adDuration="+this.adDuration,2)}function Qr(){this.logger.trace(" @AdExpandedChange adExpanded="+(this.adExpanded=this.vpaid.getAdExpanded()),2)}function Zr(){this.logger.none(" @AdRemainingTimeChange",2);var t=this.vpaid;this.adRemainingTime=t&&t.getAdRemainingTime();this.adDuration=t&&t.getAdDuration()}function Kr(){var t=this.vpaid.getAdVolume();this.logger.trace(" @AdVolumeChange adVolume="+t.toFixed(2),2);if(this.adVolume.toFixed(2)!==(100*t).toFixed(2)){if(this.Ut("playing")){this.adVolume>0&&0===t&&this.oe("mute");0===this.adVolume&&t>0&&this.oe("unmute")}this.adVolume=t}}function $r(){this.logger.trace(" @AdImpression",2);this.ne=!0;_n.call(this,"AdImpression");this.oe("Impression");this.postImpressionData()}function tn(){this.logger.trace(" @AdVideoStart",2);this.Zt("playing");_n.call(this,"AdVideoStart");this.oe("start")}function en(){this.logger.trace(" @AdVideoFirstQuartile",2);_n.call(this,"AdVideoFirstQuartile");this.oe("firstQuartile")}function on(){this.logger.trace(" @AdVideoMidpoint",2);_n.call(this,"AdVideoMidpoint");this.oe("midpoint")}function rn(){this.logger.trace(" @AdVideoThirdQuartile",2);_n.call(this,"AdVideoThirdQuartile");this.oe("thirdQuartile")}function nn(){this.logger.trace(" @AdVideoCompleteTrackOnly",2);this.oe("complete");this.ae=!0}function an(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.logger.trace(" @AdVideoComplete",2);this.Zt("complete");_n.call(this,"AdVideoComplete");this.logger.trace(" @AdVideoComplete (propagating delayed by trackers)");if(!this.ne){var o="Get @AdVideoComplete but not get @AdImpression media="+this.se;this.logger.error(".onAdVideoFirstQuartile() "+o);this.le({code:Vn.a.AD_IMPRESSION_NOT_HAPPENED_ERROR,message:o})}this.de();var i=!1!==e.shouldDestroy;(this.ae&&Promise.resolve()||this.oe("complete")).then(function(){t.logger.trace(" @AdVideoComplete (propagating AdVideoComplete)");t.trigger("AdVideoComplete");if(t.Ut("stopped")&&i)t.S();else{var e=t.format,o=t.vnAfterplay;(!o||!o.isActive())&&e&&e.hide&&e.hide();var r=t.options||{},n=r.beforeStopAdTimeout,a=function e(){t.unsubscribe(e,"AdStopped");clearTimeout(s);t.Ut("stopped")&&i&&t.S()},s=setTimeout(function(){t.unsubscribe(a,"AdStopped");t.Ut("stopped")&&i&&t.S();t.Ut("stopping")&&i&&t.subscribeOnce(function(){return t.S()},"AdStopped")},n);t.subscribe(a,"AdStopped");t.stopAd()}})}function sn(t,e,o){this.logger.trace(" @AdClickThru("+t+", "+e+", "+o+") pauseStartedByVPAID="+this.pauseWasStartedByVPAID,2);this.oe("ClickTracking");var i=this.M("videoclick","action");if(!this.Ut(["paused","paused"])||this.pauseWasStartedByVPAID||this.pausedWasStartedByVisibilityChange){this.Ut("playing")&&this.pauseAd();o&&(t?Object(Xn.v)(t):this.data.forEach(function(t){var e=t.parameters;return Object(Xn.v)(e.ClickThrough)}));this.trigger("AdClickThru",t,e,!1);"close"===i&&this.skipAd()}else this.resumeAd()}function ln(){this.logger.trace(" @AdInteraction",2)}function dn(){this.logger.trace(" @AdUserAcceptInvitation",2)}function cn(){this.logger.trace(" @AdUserMinimize",2)}function un(){this.logger.trace(" @AdUserClose",2);this.S()}function hn(){this.pauseWasStartedByVPAID=!this.Ut("pausing");this.logger.trace(" @AdPaused pauseWasStartedByVPAID="+this.pauseWasStartedByVPAID,2);this.Zt("paused");this.oe("pause");_n.call(this,"AdPaused")}function pn(){this.logger.trace(" @AdPlaying",2);_n.call(this,"AdPlaying");if(this.Ut("resuming")){this.Zt("playing");this.oe("resume")}}function fn(t){this.logger.log(" @AdLog("+t+")",2)}function gn(t,e){this.logger.warn(" @AdError("+t+", "+e+")");this.le({code:t,message:e});this.ce()}function mn(t){this.trigger("vnFormatStateChanged",t);t&&"isFloating"in t&&(this.adIgnoreSizeErrorState=!0===t.isFloating)}function vn(){var t=this;this.rt(dp,function(){bn.call(t)&&vn.call(t)},cp)}function bn(){var t=this.getAdRemainingTime();if(this.adRemainingTime!==t){this.adRemainingTime=t;this.vpaid.trigger("AdRemainingTimeChange")}return!0}function yn(){var t=this.O("wrapper"),e=Object(Xn.j)(t),o=e.paddingTop,i=this.O("title"),r=this.O("logo");if(t&&o&&i&&0===i.getBoundingClientRect().height&&r&&0===r.getBoundingClientRect().height){Object(qn.c)(t,{paddingTop:0});this.trigger("slotSizeChanged")}}function An(t){var e=Object(Xn.z)(Object(Xn.k)(window,document))||{},o=e.expandOnAdLoaded,i=e.showObservableNode,r=e.startAdTimeout,n=e.vpaidInitAdTimeout,a=e.dataRequestTimeout;i&&Object(Xn.h)(t,{format:{options:{showObservableNode:!0}}});o&&Object(Xn.h)(t,{format:{options:{forcedExpandOnAdLoadedValue:"true"===o||"1"===o}}});r&&(this.options.startAdTimeout=r);n&&(this.options.vpaidInitAdTimeout=n);a&&(this.options.dataRequestTimeout=a)}function wn(t){function e(){i&&window.removeEventListener("onViqeoLoad",i);try{var e=sp({},t);e.parent=Object(qn.p)(e.parent)&&e.parent.tagName+"."+e.parent.className||"";this.logger.log("showViqeo() -> VIQEO.createPlayer("+JSON.stringify(e,null,"\t")+")")}catch(t){this.logger.error(".appendViqeo() can't show VIQEO start parameters: "+t)}window.VIQEO.createPlayer(t)}var o=this,i=null;Object(Xn.t)("https://cdn.viqeo.tv/js/vq_starter.js").then(function(){if(window.VIQEO)e.call(o);else{window.onViqeoLoad=e.bind(o);window.addEventListener("onViqeoLoad",i=e.bind(o))}})}function _n(t){window!==window.top&&parent.postMessage(t,"*")}function Sn(){var t=this,e=["startAd","stopAd","pauseAd","resumeAd","skipAd"];this.ue||window!==window.top&&(this.ue=this.Y(window,"message",function(o){var i=o.data;e.filter(function(t){return t===i}).forEach(function(e){t.logger.log('window listener get command "'+e+'"');t[e].call(t)})}))}function Mn(){var t=this;this.logger.trace(".checkInventoryObserving");var e=this.format,o=this.reachInventories,i=this.visibleInventoryWasSent,r=!(i||!e)&&e.getReachInventoryFactory();if(r){var n=r.id,a=r.waiterCreator,s=On.call(this),l=o[n]=sp({},r,{waiter:null,reached:!1,tracked:!1,trackingUrls:s});l.waiter=a().then(function(){l.reached=!0;In.call(t)});this.logger.trace(".checkInventoryObserving with id="+n+" ")}}function On(){this.logger.track(".getVisibleInventoryUrls()");return this.data.reduce(function(t,e){var o=e.parameters;return t.concat(o.Trackings&&o.Trackings.vnVisibleInventory||[])},[])}function In(){var t=this,e=this.reachInventories,o=Object.keys(e);return!this.visibleInventoryWasSent&&o&&o.length?new Promise(function(i){return o.reduce(function(o,r){return o.then(function(o){if(!1===o)return En.call(t,e[r]);if(!0===o){Dn.call(t);i()}return Promise.resolve(null)}).catch(function(o){t.logger.error(".trackReachedInventories() error: "+(o&&o.message||o));return En.call(t,e[r])})},Promise.resolve(!1))}):Promise.resolve()}function En(t){var e=this;if(!this.visibleInventoryWasSent&&!t.tracked&&t.reached&&t.waiter){this.logger.trace(".trackReachedInventory",2);var o=t.trackingUrls&&t.trackingUrls.length?t.trackingUrls:this.M("Trackings","vnVisibleInventory")||[];t.tracked=!0;Cn.call(this,t);if(!o.length)return Promise.resolve(!1);this.visibleInventoryWasSent=!0;return this.Kt(o).then(function(){var t=o.length>1?"and "+(o.length-1)+" visibleInventory's urls":"";e.logger.trace(".trackReachedInventory() "+(o.length&&o[0])+" "+t+" were tracked successfully",2,"brown");return!0}).catch(function(){e.logger.warn(".trackReachedInventory() "+o.length+" visibleInventory's urls were not tracked ms")})}return Promise.resolve(!1)}function Dn(){var t=this;this.logger.log(".destroyVisibleInventories",1);var e=this.reachInventories,o=Object.keys(e);o&&o.length&&o.forEach(function(o){return Cn.call(t,e[o])})}function Cn(t){var e=t.destroy;this.logger.trace(".trackReachedInventory() destroy visible inventory object("+t.id+")");e&&e()}function xn(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",o=t.code,i=t.fatal;o&&this.le(t);this.logger.error(e+(o?" code="+o+" ":" ")+"("+t+", Fatal: "+!!i+")");i?this.ee():this.ce()}function Tn(t){var e=Error("Wrong ad width was detected: "+t);e.code=Vn.a.AD_SIZE_ERROR;e.message=t;e.fatal=!1;return e}function Pn(t){var e=t&&t.querySelector("Ad > InLine > Creatives > Creative > Linear > AdParameters");return e?Object(Xn.o)(e):null}function jn(t){var e=this.environmentVars,o=this.options.minSlotWidthPercent,i=this.O("slot")||e.slot,r=Object(Xn.n)(window),n=r&&Object(Xn.i)(r)||Object(Xn.G)(window),a=n&&n.querySelector("body"),s=Object(qn.g)(i,a).reverse(),l=a;s.length&&s.forEach(function(t){l===a&&t.offsetWidth!==a.offsetWidth&&(l=t)});l.documentElement&&(l=l.documentElement);var d=t>0&&t/l.offsetWidth<o,c="\n    Width: "+t+";\n    Viewport: "+(r?r.innerWidth:"Unknown")+";\n    Container width: "+l.offsetWidth+";\n    Ratio: "+t/l.offsetWidth;return{error:d,message:d&&c||null}}function kn(t,e){this.logger.trace(".setVideoContainerSize("+t+", "+e+")");var o=this.O("videoContainer");o&&Object(qn.c)(o,{width:Object(Xn.u)(t),height:Object(Xn.u)(e),marginLeft:Object(Xn.u)(-t/2),marginTop:Object(Xn.u)(-e/2)})}function Rn(t,e){var o=this.O("wrapper");o&&Object(qn.c)(o,{width:Object(Xn.u)(t),height:Object(Xn.u)(e)});return o}function Fn(t,e,o){t&&e&&o&&(t[e]=(t[e]||[]).concat(o))}function Nn(t,e){var o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:.1;return Math.abs(t-e)>o}Object.defineProperty(e,"__esModule",{value:!0});var Vn=o(4),Ln=o(0),zn=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var o=arguments[e];for(var i in o)Object.prototype.hasOwnProperty.call(o,i)&&(t[i]=o[i])}return t},Wn="::VpaidProxy",Hn=Wn,Un=function(t){function e(){var o=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};i(this,e);var n=o&&o.ancestor&&o.ancestor+":"+Wn||"Module::"+Wn,a=o&&(o.logger||o.module&&o.module.logger||o.moduleAPI&&o.moduleAPI.logger)||Ln.b,s=r(this,t.call(this,zn({},o,{ancestor:n,logger:a})));s[Hn]=n;s.lastPendingVolumeCommand=[];return s}n(e,t);e.prototype.getAdLinear=function(){return Object(Vn.e)(this.vpaid)?this.vpaid.getAdLinear():this.adLinear};e.prototype.getAdWidth=function(){return Object(Vn.e)(this.vpaid)?this.vpaid.getAdWidth():this.adWidth};e.prototype.getAdHeight=function(){return Object(Vn.e)(this.vpaid)?this.vpaid.getAdHeight():this.adHeight};e.prototype.getAdAspectRatio=function(){return Object(Vn.e)(this.vpaid)&&this.vpaid.getAdAspectRatio?this.vpaid.getAdAspectRatio():t.prototype.getAdAspectRatio.call(this)};e.prototype.getAdExpanded=function(){return Object(Vn.e)(this.vpaid)?this.vpaid.getAdExpanded():this.adExpanded};e.prototype.getAdSkippableState=function(){return Object(Vn.e)(this.vpaid)?this.vpaid.getAdSkippableState():this.adSkippableState};e.prototype.getAdRemainingTime=function(){return Object(Vn.e)(this.vpaid)?this.vpaid.getAdRemainingTime():this.adRemainingTime};e.prototype.getAdDuration=function(){return Object(Vn.e)(this.vpaid)?this.vpaid.getAdDuration():this.adDuration};e.prototype.getAdVolume=function(){return Object(Vn.e)(this.vpaid)?this.vpaid.getAdVolume():this.adVolume};e.prototype.getAdCompanions=function(){return Object(Vn.e)(this.vpaid)?this.vpaid.getAdCompanions():this.adCompanions};e.prototype.getAdIcons=function(){return Object(Vn.e)(this.vpaid)?this.vpaid.getAdIcons():this.adIcons};e.prototype.handshakeVersion=function(t){return Object(Vn.e)(this.vpaid)?this.vpaid.handshakeVersion(t):t};e.prototype.initAd=function(t,e,o,i,r,n){this.trigger("AdError",Vn.a.GENERAL_VPAID_ERROR,"Abstract method call")};e.prototype.resizeAd=function(t,e){var o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this.viewMode;this.logger.trace("VpaidProxy.resizeAd("+t+", "+e+")");this.adWidth=t;this.adHeight=e;this.viewMode=o;return Object(Vn.e)(this.vpaid)&&this.vpaid.resizeAd(t,e,o)};e.prototype.startAd=function(){try{return Object(Vn.e)(this.vpaid)&&this.vpaid.startAd()}catch(t){this.trigger("AdError",Vn.a.GENERAL_VPAID_ERROR,""+t)}return!1};e.prototype.stopAd=function(){return Object(Vn.e)(this.vpaid)&&this.vpaid.stopAd()};e.prototype.pauseAd=function(){return Object(Vn.e)(this.vpaid)&&this.vpaid.pauseAd()};e.prototype.resumeAd=function(){return Object(Vn.e)(this.vpaid)&&this.vpaid.resumeAd()};e.prototype.expandAd=function(){return Object(Vn.e)(this.vpaid)&&this.vpaid.expandAd()};e.prototype.collapseAd=function(){return Object(Vn.e)(this.vpaid)&&this.vpaid.collapseAd()};e.prototype.skipAd=function(){return Object(Vn.e)(this.vpaid)&&this.vpaid.skipAd()};e.prototype.setAdVolume=function(t,e){if(this.vpaid){var o=this.lastPendingVolumeCommand.length;this.lastPendingVolumeCommand=[];this.logger.log("VpaidPoxy:setAdVolume("+t+") executes IMMEDIATELY and clears list of pending command ("+o+")");return Object(Vn.e)(this.vpaid)&&this.vpaid.setAdVolume(t,e)}this.lastPendingVolumeCommand.push(this.setAdVolume.bind(this,t,e));this.logger.log("VpaidPoxy:setAdVolume("+t+") as pending command ("+this.lastPendingVolumeCommand.length+")")};e.prototype.S=function(){t.prototype.S.call(this);this.lastPendingVolumeCommand=[];var e=this.vpaid;if(e&&"function"==typeof e.S)try{e.S()}catch(t){this.logger.warn(this[Hn]+"._destroy() vpaid._destroy() error: "+(t&&(t.message||t)))}this.vpaid=null};e.prototype.getModuleOptions=function(){return Promise.resolve({format:{expandOnAdLoaded:!1}})};return e}(Vn.b),Bn=Un,qn=o(2),Xn=o(1),Gn=o(3),Yn=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var o=arguments[e];for(var i in o)Object.prototype.hasOwnProperty.call(o,i)&&(t[i]=o[i])}return t},Jn="VpaidJs",Qn=Jn,Zn=function(t){function e(){var o=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};a(this,e);var i=o&&o.ancestor&&o.ancestor+":"+Jn||"Module::"+Jn;(o&&(o.logger||o.module&&o.module.logger||o.moduleAPI&&o.moduleAPI.logger)||Ln.b).trace(i+".constructor()");var r=s(this,t.call(this,Yn({},o,{ancestor:i})));r[Qn]=i;var n=o.jsmedia,l=n.width,d=n.height;r.adDuration=n.duration||0;r.adWidth=l;r.adHeight=d;r.wasClicked=!1;var c=new Xn.a;r.vpaidLoadPromise=c.promise;r.vpaidLoadResolve=c.resolve;var u=new Xn.a;r.lt=u.promise;r.st=u.resolve;r.observer=null;return r}l(e,t);e.prototype.initAd=function(t,e,o,i){var r=this,n=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{},a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:{};this.logger.log(Jn+".initAd()");var s=this.options.module,l=this.vpaid;if(l){this.logger.log(Jn+".initAd() vpaid is exists, invokes vpaid.initAd()");var u=a.videoSlot;if(!u){u=d.call(this,s,u);s.Qt("videoSlot",{node:u})}c.call(this,l,u);l.initAd(t,e,o,i,n,Yn({},a,{videoSlot:u}));this.trigger("AdLoaded");return Promise.resolve()}return new Promise(function(l,u){var h=n.AdParameters,p=a.iframe,f=r.options.jsmedia,g=p.contentDocument.body,m=document.createElement("script");m.src=f.src;r.Y(m,"load",function(){var f=p&&p.contentWindow,g=f.getVPAIDAd;if("function"==typeof g){var m={duration:r.adDuration};try{var v=h.replace(/\n+/g," "),b=JSON.parse(v);b.vnVpaidProvider&&(m.vnVpaidProvider=b.vnVpaidProvider)}catch(t){r.logger.none(r[Qn]+".initAd() JSON.parse(AdParameters) throws exception")}var y=r.vpaid=g(m);if(Object(Vn.e)(y)){r.logger.log(r[Qn]+".initAd() Successfully retrieved VPAID instance by getVPAIDAd()");r.vpaidLoadResolve(y);var A=r.videoSlot=d.call(r,s,a.videoSlot);s.O("videoSlot")||s.Qt("videoSlot",{node:A});c.call(r,y,A);try{var w=s.maxSkipTime;n&&n.AdParameters&&n.AdParameters.replace&&(n.AdParameters=n.AdParameters.replace("[MAXSKIPTIME]",w||""));y.initAd(t,e,o,i,n,Yn({},a,{videoSlot:A}));~y.toString().indexOf("Module")&&y.setOptions({isInsideTextContent:!0});l(r)}catch(t){r.logger.warn(r[Qn]+".initAd() Internal error "+t);var _=Error("Internal VpaidJs error ("+t+") stack:"+t.stack);_.code=Vn.a.VPAID_JS_ERRORvpaidCreator;u(_)}}else{var S="External script returned invalid VPAID instance ("+y+")";r.logger.warn(r[Qn]+".initAd() "+S);var M=Error(S);M.code=Vn.a.VPAID_JS_ERROR;u(M)}}else{var O="External script did not provide valid getVPAIDAd() method ("+g+")";r.logger.warn(r[Qn]+".initAd() "+O);var I=Error(O);I.code=Vn.a.VPAID_JS_ERROR;u(I)}});r.Y(m,"error",function(){var t="Error loading external script ("+m.src+")";r.logger.warn(r[Qn]+".initAd() ("+t+")");var e=Error(t);e.code=Vn.a.VPAID_JS_ERROR;u(e)});g.appendChild(m)})};e.prototype.S=function(){this.logger.trace(this[Qn]+".destroy()");t.prototype.S.call(this)};e.prototype.activateMuteChangingEnable=function(){this.vpaid&&(this.wasClicked=!0)};e.prototype.isMutedChangeEnableActivated=function(){return this.vpaid&&this.wasClicked};e.prototype.getModuleOptions=function(){var e=t.prototype.getModuleOptions.call(this);return this.vpaidLoadPromise.then(function(t){var o=t.getModuleOptions?t.getModuleOptions():Promise.resolve({});return Promise.all([e,o]).then(function(t){return Yn({},t&&t.length?t[0]:{},t&&t.length>1?t[1]:{})})})};e.prototype.getLinkedVpaid=function(){return this.vpaidLoadPromise};e.create=function(t,o){return new Promise(function(i,r){var n=t.MediaFiles,a=t.adParameters,s=t.rawDuration,l=t.duration,d=n["application/javascript"]&&n["application/javascript"][0];if(d&&d.src&&!o.isMediaUrlBlocked(d.src)){(o&&o.getAPI&&o.getAPI().logger||Ln.b).log(Jn+".create("+d.src+")");o.setSelectedCreative(d.src,s,a);i(new e({module:o,jsmedia:Yn({},d,{duration:l}),moduleAPI:o.getAPI()}))}r()})};return e}(Bn),Kn=Zn,$n=o(17),ta=function(){function t(e){u(this,t);this.bytes=new Uint8Array(e);this.length=this.bytes.length;this.writePos=this.bytes.length;this.index=0}t.prototype.nextBits=function(t){var e=this.index>>3,o=8-this.index%8;if(o>=t)return this.bytes[e]>>o-t&255>>8-t;var i=(this.index+t)%8,r=this.index+t-1>>3,n=this.bytes[e]&255>>8-o;for(e+=1;e<r;e+=1){n<<=8;n|=this.bytes[e]}if(i>0){n<<=i;n|=this.bytes[e]>>8-i}else{n<<=8;n|=this.bytes[e]}return n};t.prototype.getBits=function(t){var e=this.nextBits(t);this.index+=t;return e};t.prototype.findNextMPEGStartCode=function(){for(var e=this.index+7>>3;e<this.writePos;e+=1)if(0===this.bytes[e]&&0===this.bytes[e+1]&&1===this.bytes[e+2]){this.index=e+4<<3;return this.bytes[e+3]}this.index=this.writePos<<3;return t.NOT_FOUND};t.prototype.advance=function(t){return this.index+=t};t.prototype.nextBytesAreStartCode=function(){var t=this.index+7>>3;return t>=this.writePos||0===this.bytes[t]&&0===this.bytes[t+1]&&1===this.bytes[t+2]};return t}(),ea=ta,oa={SEQUENCE:179,SLICE_FIRST:1,SLICE_LAST:175,PICTURE:0,EXTENSION:181,USER_DATA:178},ia={I:1,P:2,B:3},ra=new Uint8Array([8,16,19,22,26,27,29,34,16,16,22,24,27,29,34,37,19,22,26,27,29,34,34,38,22,22,26,27,29,34,37,40,22,26,27,29,32,35,40,48,26,27,29,32,35,40,48,58,26,27,29,34,38,46,56,69,27,29,35,38,46,56,69,83]),na=new Uint8Array([16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16]),aa={DEFAULT_NON_INTRA_QUANT:na,DEFAULT_INTRA_QUANT:ra},sa=new Int8Array([3,6,0,-1,9,0,0,0,1,0,0,17]),la=new Int8Array([3,6,0,9,12,0,0,0,10,15,18,0,0,0,2,21,24,0,0,0,8,27,30,0,33,36,0,-1,39,0,0,0,18,0,0,26,0,0,1,0,0,17]),da=new Int8Array([3,6,0,9,15,0,12,18,0,24,21,0,0,0,12,27,30,0,0,0,14,39,42,0,36,33,0,0,0,4,0,0,6,54,48,0,45,51,0,0,0,8,0,0,10,-1,57,0,0,0,1,60,63,0,0,0,30,0,0,17,0,0,22,0,0,26]),ca=[null,sa,la,da],ua=new Int16Array([3,6,0,9,12,0,0,0,1,15,18,0,21,24,0,27,30,0,33,36,0,0,0,3,0,0,2,39,42,0,45,48,0,0,0,5,0,0,4,51,54,0,57,60,0,0,0,7,0,0,6,63,66,0,69,72,0,75,78,0,81,84,0,-1,87,0,-1,90,0,93,96,0,99,102,0,105,108,0,111,114,0,0,0,9,0,0,8,117,120,0,123,126,0,129,132,0,135,138,0,0,0,15,0,0,14,0,0,13,0,0,12,0,0,11,0,0,10,141,-1,0,-1,144,0,147,150,0,153,156,0,159,162,0,165,168,0,171,174,0,177,180,0,183,-1,0,-1,186,0,189,192,0,195,198,0,201,204,0,207,210,0,213,216,0,219,222,0,0,0,21,0,0,20,0,0,19,0,0,18,0,0,17,0,0,16,0,0,35,0,0,34,0,0,33,0,0,32,0,0,31,0,0,30,0,0,29,0,0,28,0,0,27,0,0,26,0,0,25,0,0,24,0,0,23,0,0,22]),ha={I:sa,P:la,B:da,TYPE_TABLE:ca,ADDRESS_INCREMENT:ua},pa=new Uint8Array([32,44,42,38,32,25,17,9,44,62,58,52,44,35,24,12,42,58,55,49,42,33,23,12,38,52,49,44,38,30,20,10,32,44,42,38,32,25,17,9,25,35,33,30,25,20,14,7,17,24,23,20,17,14,9,5,9,12,12,10,9,7,5,2]),fa=new Uint8Array([0,1,8,16,9,2,3,10,17,24,32,25,18,11,4,5,12,19,26,33,40,48,41,34,27,20,13,6,7,14,21,28,35,42,49,56,57,50,43,36,29,22,15,23,30,37,44,51,58,59,52,45,38,31,39,46,53,60,61,54,47,55,62,63]),ga=new Int32Array([3,6,0,12,9,0,0,0,1,21,24,0,18,15,0,39,27,0,33,30,0,42,36,0,0,0,257,60,66,0,54,63,0,48,57,0,0,0,513,51,45,0,0,0,2,0,0,3,81,75,0,87,93,0,72,78,0,96,90,0,0,0,1025,69,84,0,0,0,769,0,0,258,0,0,1793,0,0,65535,0,0,1537,111,108,0,0,0,1281,105,102,0,117,114,0,99,126,0,120,123,0,156,150,0,162,159,0,144,147,0,129,135,0,138,132,0,0,0,2049,0,0,4,0,0,514,0,0,2305,153,141,0,165,171,0,180,168,0,177,174,0,183,186,0,0,0,2561,0,0,3329,0,0,6,0,0,259,0,0,5,0,0,770,0,0,2817,0,0,3073,228,225,0,201,210,0,219,213,0,234,222,0,216,231,0,207,192,0,204,189,0,198,195,0,243,261,0,273,240,0,246,237,0,249,258,0,279,276,0,252,255,0,270,282,0,264,267,0,0,0,515,0,0,260,0,0,7,0,0,1026,0,0,1282,0,0,4097,0,0,3841,0,0,3585,315,321,0,333,342,0,312,291,0,375,357,0,288,294,0,-1,369,0,285,303,0,318,363,0,297,306,0,339,309,0,336,348,0,330,300,0,372,345,0,351,366,0,327,354,0,360,324,0,381,408,0,417,420,0,390,378,0,435,438,0,384,387,0,0,0,2050,396,402,0,465,462,0,0,0,8,411,399,0,429,432,0,453,414,0,426,423,0,0,0,10,0,0,9,0,0,11,0,0,5377,0,0,1538,0,0,771,0,0,5121,0,0,1794,0,0,4353,0,0,4609,0,0,4865,444,456,0,0,0,1027,459,450,0,0,0,261,393,405,0,0,0,516,447,441,0,516,519,0,486,474,0,510,483,0,504,498,0,471,537,0,507,501,0,522,513,0,534,531,0,468,477,0,492,495,0,549,546,0,525,528,0,0,0,263,0,0,2562,0,0,2306,0,0,5633,0,0,5889,0,0,6401,0,0,6145,0,0,1283,0,0,772,0,0,13,0,0,12,0,0,14,0,0,15,0,0,517,0,0,6657,0,0,262,540,543,0,480,489,0,588,597,0,0,0,27,609,555,0,606,603,0,0,0,19,0,0,22,591,621,0,0,0,18,573,576,0,564,570,0,0,0,20,552,582,0,0,0,21,558,579,0,0,0,23,612,594,0,0,0,25,0,0,24,600,615,0,0,0,31,0,0,30,0,0,28,0,0,29,0,0,26,0,0,17,0,0,16,567,618,0,561,585,0,654,633,0,0,0,37,645,648,0,0,0,36,630,636,0,0,0,34,639,627,0,663,666,0,657,624,0,651,642,0,669,660,0,0,0,35,0,0,267,0,0,40,0,0,268,0,0,266,0,0,32,0,0,264,0,0,265,0,0,38,0,0,269,0,0,270,0,0,33,0,0,39,0,0,7937,0,0,6913,0,0,7681,0,0,4098,0,0,7425,0,0,7169,0,0,271,0,0,274,0,0,273,0,0,272,0,0,1539,0,0,2818,0,0,3586,0,0,3330,0,0,3074,0,0,3842]),ma=new Int8Array([6,3,0,12,9,0,18,15,0,24,21,0,0,0,2,0,0,1,0,0,0,30,27,0,0,0,3,36,33,0,0,0,4,42,39,0,0,0,5,48,45,0,0,0,6,51,-1,0,0,0,7,0,0,8]),va=new Int8Array([6,3,0,18,15,0,9,12,0,0,0,1,0,0,2,27,24,0,21,30,0,0,0,0,36,33,0,0,0,4,0,0,3,39,42,0,0,0,5,0,0,6,48,45,0,51,-1,0,0,0,7,0,0,8]),ba=new Int16Array([3,6,0,12,9,0,0,0,0,18,15,0,24,21,0,0,0,-1,0,0,1,27,30,0,36,33,0,0,0,2,0,0,-2,42,45,0,48,39,0,60,54,0,0,0,3,0,0,-3,51,57,0,-1,69,0,81,75,0,78,63,0,72,66,0,96,84,0,87,93,0,-1,99,0,108,105,0,0,0,-4,90,102,0,0,0,4,0,0,-7,0,0,5,111,123,0,0,0,-5,0,0,7,114,120,0,126,117,0,0,0,-6,0,0,6,153,162,0,150,147,0,135,138,0,156,141,0,129,159,0,132,144,0,0,0,10,0,0,9,0,0,8,0,0,-8,171,198,0,0,0,-9,180,192,0,168,183,0,165,186,0,174,189,0,0,0,-10,177,195,0,0,0,12,0,0,16,0,0,13,0,0,14,0,0,11,0,0,15,0,0,-16,0,0,-12,0,0,-14,0,0,-15,0,0,-11,0,0,-13]),ya=new Int16Array([6,3,0,9,18,0,12,15,0,24,33,0,36,39,0,27,21,0,30,42,0,60,57,0,54,48,0,69,51,0,81,75,0,63,84,0,45,66,0,72,78,0,0,0,60,105,120,0,132,144,0,114,108,0,126,141,0,87,93,0,117,96,0,0,0,32,135,138,0,99,123,0,129,102,0,0,0,4,90,111,0,0,0,8,0,0,16,0,0,44,150,168,0,0,0,28,0,0,52,0,0,62,183,177,0,156,180,0,0,0,1,165,162,0,0,0,61,0,0,56,171,174,0,0,0,2,0,0,40,153,186,0,0,0,48,192,189,0,147,159,0,0,0,20,0,0,12,240,249,0,0,0,63,231,225,0,195,219,0,252,198,0,0,0,24,0,0,36,0,0,3,207,261,0,243,237,0,204,213,0,210,234,0,201,228,0,216,222,0,258,255,0,264,246,0,-1,282,0,285,291,0,0,0,33,0,0,9,318,330,0,306,348,0,0,0,5,0,0,10,279,267,0,0,0,6,0,0,18,0,0,17,0,0,34,339,357,0,309,312,0,270,276,0,327,321,0,351,354,0,303,297,0,294,288,0,300,273,0,342,345,0,315,324,0,336,333,0,363,375,0,0,0,41,0,0,14,0,0,21,372,366,0,360,369,0,0,0,11,0,0,19,0,0,7,0,0,35,0,0,13,0,0,50,0,0,49,0,0,58,0,0,37,0,0,25,0,0,45,0,0,57,0,0,26,0,0,29,0,0,38,0,0,53,0,0,23,0,0,43,0,0,46,0,0,42,0,0,22,0,0,54,0,0,51,0,0,15,0,0,30,0,0,39,0,0,47,0,0,55,0,0,27,0,0,59,0,0,31]),Aa={PREMULTIPLIER_MATRIX:pa,ZIG_ZAG:fa,DCT_COEFF:ga,DCT_DC_SIZE_CHROMINANCE:ma,DCT_DC_SIZE_LUMINANCE:va,MOTION:ba,CODE_BLOCK_PATTERN:ya},wa=function(){function t(e,o,i,r){h(this,t);this.hasDecoded=!1;this.hasDecodeColor=!1;this.buffer=e;this.width=o;this.height=i;this.blockData=new Int32Array(64);this.zeroBlockData=new Int32Array(64);this.intraQuantMatrix=aa.DEFAULT_INTRA_QUANT;this.nonIntraQuantMatrix=aa.DEFAULT_NON_INTRA_QUANT;this.mbWidth=this.width+15>>4;this.mbHeight=this.height+15>>4;this.mbSize=this.mbWidth*this.mbHeight;this.codedWidth=this.mbWidth<<4;this.codedHeight=this.mbHeight<<4;this.codedSize=this.codedWidth*this.codedHeight;this.halfWidth=this.mbWidth<<3;this.halfHeight=this.mbHeight<<3;this.quarterSize=this.codedSize>>2;var n=window.Uint8ClampedArray||window.Uint8Array;if(!window.Uint8ClampedArray){this.copyBlockToDestination=this.copyBlockToDestinationClamp;this.addBlockToDestination=this.addBlockToDestinationClamp}if(r){this.forwardY=r.currentY;this.forwardY32=r.currentY32;this.forwardCr=r.currentCr;this.forwardCr32=r.currentCr32;this.forwardCb=r.currentCb;this.forwardCb32=r.currentCb32;this.currentY=r.forwardY;this.currentY32=r.forwardY32;this.currentCr=r.forwardCr;this.currentCr32=r.forwardCr32;this.currentCb=r.forwardCb;this.currentCb32=r.forwardCb32}else{this.currentY=new n(this.codedSize);this.currentY32=new Uint32Array(this.currentY.buffer);this.currentCr=new n(this.codedSize>>2);this.currentCr32=new Uint32Array(this.currentCr.buffer);this.currentCb=new n(this.codedSize>>2);this.currentCb32=new Uint32Array(this.currentCb.buffer);this.forwardY=new n(this.codedSize);this.forwardY32=new Uint32Array(this.forwardY.buffer);this.forwardCr=new n(this.codedSize>>2);this.forwardCr32=new Uint32Array(this.forwardCr.buffer);this.forwardCb=new n(this.codedSize>>2);this.forwardCb32=new Uint32Array(this.forwardCb.buffer)}this.quantizerScale=0;this.sliceBegin=!1;this.macroblockAddress=0;this.mbRow=0;this.mbCol=0;this.macroblockType=0;this.macroblockIntra=!1;this.macroblockMotFw=!1;this.motionFwH=0;this.motionFwV=0;this.motionFwHPrev=0;this.motionFwVPrev=0}t.prototype.decodePicture=function(){for(var t=0;;){t=this.buffer.findNextMPEGStartCode();if(-1===t)return!1;if(t===oa.PICTURE)break}this.buffer.advance(10);this.pictureCodingType=this.buffer.getBits(3);this.buffer.advance(16);if(this.pictureCodingType<=0||this.pictureCodingType>=ia.B)return!1;if(this.pictureCodingType===ia.P){this.fullPelForward=this.buffer.getBits(1);this.forwardFCode=this.buffer.getBits(3);if(0===this.forwardFCode)return!1;this.forwardRSize=this.forwardFCode-1;this.forwardF=1<<this.forwardRSize}do{t=this.buffer.findNextMPEGStartCode()}while(t===oa.EXTENSION||t===oa.USER_DATA);for(;t>=oa.SLICE_FIRST&&t<=oa.SLICE_LAST;){this.decodeSlice(255&t);t=this.buffer.findNextMPEGStartCode()}this.hasDecoded=!0;return!0};t.prototype.decodeSlice=function(t){this.sliceBegin=!0;this.macroblockAddress=(t-1)*this.mbWidth-1;this.motionFwH=this.motionFwHPrev=0;this.motionFwV=this.motionFwVPrev=0;this.dcPredictorY=128;this.dcPredictorCr=128;this.dcPredictorCb=128;this.quantizerScale=this.buffer.getBits(5);for(;this.buffer.getBits(1);)this.buffer.advance(8);do{this.decodeMacroblock()}while(!this.buffer.nextBytesAreStartCode())};t.prototype.decodeMacroblock=function(){for(var t=0,e=this.readCode(ha.ADDRESS_INCREMENT);34===e;)e=this.readCode(ha.ADDRESS_INCREMENT);for(;35===e;){t+=33;e=this.readCode(ha.ADDRESS_INCREMENT)}t+=e;if(this.sliceBegin){this.sliceBegin=!1;this.macroblockAddress+=t}else{if(this.macroblockAddress+t>=this.mbSize)return!1;if(t>1){this.dcPredictorY=128;this.dcPredictorCr=128;this.dcPredictorCb=128;if(this.pictureCodingType===ia.P){this.motionFwH=this.motionFwHPrev=0;this.motionFwV=this.motionFwVPrev=0}}for(;t>1;){this.macroblockAddress+=1;this.mbRow=this.macroblockAddress/this.mbWidth|0;this.mbCol=this.macroblockAddress%this.mbWidth;this.copyMacroblock(this.motionFwH,this.motionFwV,this.forwardY,this.forwardCr,this.forwardCb);t-=1}this.macroblockAddress+=1}this.mbRow=this.macroblockAddress/this.mbWidth|0;this.mbCol=this.macroblockAddress%this.mbWidth;this.macroblockType=this.readCode(ha.TYPE_TABLE[this.pictureCodingType]);this.macroblockIntra=1&this.macroblockType;this.macroblockMotFw=8&this.macroblockType;0!=(16&this.macroblockType)&&(this.quantizerScale=this.buffer.getBits(5));if(this.macroblockIntra){this.motionFwH=this.motionFwHPrev=0;this.motionFwV=this.motionFwVPrev=0}else{this.dcPredictorY=128;this.dcPredictorCr=128;this.dcPredictorCb=128;this.decodeMotionVectors();this.copyMacroblock(this.motionFwH,this.motionFwV,this.forwardY,this.forwardCr,this.forwardCb)}for(var o=0!=(2&this.macroblockType)?this.readCode(Aa.CODE_BLOCK_PATTERN):this.macroblockIntra?63:0,i=0,r=32;i<6;i++){0!=(o&r)&&this.decodeBlock(i);r>>=1}};t.prototype.readCode=function(t){var e=0;do{e=t[e+this.buffer.getBits(1)]}while(e>=0&&0!==t[e]);return t[e+2]};t.prototype.copyMacroblock=function(t,e,o,i,r){var n=void 0,a=void 0,s=void 0,l=void 0,d=void 0,c=void 0,u=void 0,h=void 0,p=void 0,f=this.currentY32,g=this.currentCb32,m=this.currentCr32;n=this.codedWidth;a=n-16;s=t>>1;l=e>>1;d=1==(1&t);c=1==(1&e);u=((this.mbRow<<4)+l)*n+(this.mbCol<<4)+s;h=this.mbRow*n+this.mbCol<<2;p=h+(n<<2);var v,b,y,A;if(d)if(c)for(;h<p;){b=o[u]+o[u+n];u++;for(v=0;v<4;v++){y=o[u]+o[u+n];u++;A=b+y+2>>2&255;b=o[u]+o[u+n];u++;A|=b+y+2<<6&65280;y=o[u]+o[u+n];u++;A|=b+y+2<<14&16711680;b=o[u]+o[u+n];u++;A|=b+y+2<<22&4278190080;f[h++]=A}h+=a>>2;u+=a-1}else for(;h<p;){b=o[u++];for(v=0;v<4;v++){y=o[u++];A=b+y+1>>1&255;b=o[u++];A|=b+y+1<<7&65280;y=o[u++];A|=b+y+1<<15&16711680;b=o[u++];A|=b+y+1<<23&4278190080;f[h++]=A}h+=a>>2;u+=a-1}else if(c)for(;h<p;){for(v=0;v<4;v++){A=o[u]+o[u+n]+1>>1&255;u++;A|=o[u]+o[u+n]+1<<7&65280;u++;A|=o[u]+o[u+n]+1<<15&16711680;u++;A|=o[u]+o[u+n]+1<<23&4278190080;u++;f[h++]=A}h+=a>>2;u+=a}else for(;h<p;){for(v=0;v<4;v++){A=o[u];u++;A|=o[u]<<8;u++;A|=o[u]<<16;u++;A|=o[u]<<24;u++;f[h++]=A}h+=a>>2;u+=a}n=this.halfWidth;a=n-8;s=t/2>>1;l=e/2>>1;d=1==(t/2&1);c=1==(e/2&1);u=((this.mbRow<<3)+l)*n+(this.mbCol<<3)+s;h=this.mbRow*n+this.mbCol<<1;p=h+(n<<1);var w,_,S,M,O,I;if(d)if(c)for(;h<p;){w=i[u]+i[u+n];M=r[u]+r[u+n];u++;for(v=0;v<2;v++){_=i[u]+i[u+n];O=r[u]+r[u+n];u++;S=w+_+2>>2&255;I=M+O+2>>2&255;w=i[u]+i[u+n];M=r[u]+r[u+n];u++;S|=w+_+2<<6&65280;I|=M+O+2<<6&65280;_=i[u]+i[u+n];O=r[u]+r[u+n];u++;S|=w+_+2<<14&16711680;I|=M+O+2<<14&16711680;w=i[u]+i[u+n];M=r[u]+r[u+n];u++;S|=w+_+2<<22&4278190080;I|=M+O+2<<22&4278190080;m[h]=S;g[h]=I;h++}h+=a>>2;u+=a-1}else for(;h<p;){w=i[u];M=r[u];u++;for(v=0;v<2;v++){_=i[u];O=r[u++];S=w+_+1>>1&255;I=M+O+1>>1&255;w=i[u];M=r[u++];S|=w+_+1<<7&65280;I|=M+O+1<<7&65280;_=i[u];O=r[u++];S|=w+_+1<<15&16711680;I|=M+O+1<<15&16711680;w=i[u];M=r[u++];S|=w+_+1<<23&4278190080;I|=M+O+1<<23&4278190080;m[h]=S;g[h]=I;h++}h+=a>>2;u+=a-1}else if(c)for(;h<p;){for(v=0;v<2;v++){S=i[u]+i[u+n]+1>>1&255;I=r[u]+r[u+n]+1>>1&255;u++;S|=i[u]+i[u+n]+1<<7&65280;I|=r[u]+r[u+n]+1<<7&65280;u++;S|=i[u]+i[u+n]+1<<15&16711680;I|=r[u]+r[u+n]+1<<15&16711680;u++;S|=i[u]+i[u+n]+1<<23&4278190080;I|=r[u]+r[u+n]+1<<23&4278190080;u++;m[h]=S;g[h]=I;h++}h+=a>>2;u+=a}else for(;h<p;){for(v=0;v<2;v++){S=i[u];I=r[u];u++;S|=i[u]<<8;I|=r[u]<<8;u++;S|=i[u]<<16;I|=r[u]<<16;u++;S|=i[u]<<24;I|=r[u]<<24;u++;m[h]=S;g[h]=I;h++}h+=a>>2;u+=a}};t.prototype.decodeMotionVectors=function(){var t,e,o=0;if(this.macroblockMotFw){t=this.readCode(Aa.MOTION);if(0!==t&&1!==this.forwardF){o=this.buffer.getBits(this.forwardRSize);e=(Math.abs(t)-1<<this.forwardRSize)+o+1;t<0&&(e=-e)}else e=t;this.motionFwHPrev+=e;this.motionFwHPrev>(this.forwardF<<4)-1?this.motionFwHPrev-=this.forwardF<<5:this.motionFwHPrev<-this.forwardF<<4&&(this.motionFwHPrev+=this.forwardF<<5);this.motionFwH=this.motionFwHPrev;this.fullPelForward&&(this.motionFwH<<=1);t=this.readCode(Aa.MOTION);if(0!==t&&1!==this.forwardF){o=this.buffer.getBits(this.forwardRSize);e=(Math.abs(t)-1<<this.forwardRSize)+o+1;t<0&&(e=-e)}else e=t;this.motionFwVPrev+=e;this.motionFwVPrev>(this.forwardF<<4)-1?this.motionFwVPrev-=this.forwardF<<5:this.motionFwVPrev<-this.forwardF<<4&&(this.motionFwVPrev+=this.forwardF<<5);this.motionFwV=this.motionFwVPrev;this.fullPelForward&&(this.motionFwV<<=1)}else if(this.pictureCodingType===ia.P){this.motionFwH=this.motionFwHPrev=0;this.motionFwV=this.motionFwVPrev=0}};t.prototype.decodeBlock=function(t){var e,o=0;if(this.macroblockIntra){var i,r;if(t<4){i=this.dcPredictorY;r=this.readCode(Aa.DCT_DC_SIZE_LUMINANCE)}else{i=4===t?this.dcPredictorCr:this.dcPredictorCb;r=this.readCode(Aa.DCT_DC_SIZE_CHROMINANCE)}if(r>0){var n=this.buffer.getBits(r);this.blockData[0]=0!=(n&1<<r-1)?i+n:i+(-1<<r|n+1)}else this.blockData[0]=i;t<4?this.dcPredictorY=this.blockData[0]:4===t?this.dcPredictorCr=this.blockData[0]:this.dcPredictorCb=this.blockData[0];this.blockData[0]<<=8;e=this.intraQuantMatrix;o=1}else e=this.nonIntraQuantMatrix;for(var a=0;;){var s=0,l=this.readCode(Aa.DCT_COEFF);if(1===l&&o>0&&0===this.buffer.getBits(1))break;if(65535===l){s=this.buffer.getBits(6);a=this.buffer.getBits(8);0===a?a=this.buffer.getBits(8):128===a?a=this.buffer.getBits(8)-256:a>128&&(a-=256)}else{s=l>>8;a=255&l;this.buffer.getBits(1)&&(a=-a)}o+=s;var d=Aa.ZIG_ZAG[o];o++;a<<=1;this.macroblockIntra||(a+=a<0?-1:1);a=a*this.quantizerScale*e[d]>>4;0==(1&a)&&(a-=a>0?1:-1);a>2047?a=2047:a<-2048&&(a=-2048);this.blockData[d]=a*Aa.PREMULTIPLIER_MATRIX[d]}var c,u,h;if(t<4){c=this.currentY;h=this.codedWidth-8;u=this.mbRow*this.codedWidth+this.mbCol<<4;0!=(1&t)&&(u+=8);0!=(2&t)&&(u+=this.codedWidth<<3)}else{c=4===t?this.currentCb:this.currentCr;h=(this.codedWidth>>1)-8;u=(this.mbRow*this.codedWidth<<2)+(this.mbCol<<3)}if(this.macroblockIntra)if(1===o){this.copyValueToDestination(this.blockData[0]+128>>8,c,u,h);this.blockData[0]=0}else{this.IDCT();this.copyBlockToDestination(this.blockData,c,u,h);this.blockData.set(this.zeroBlockData)}else if(1===o){this.addValueToDestination(this.blockData[0]+128>>8,c,u,h);this.blockData[0]=0}else{this.IDCT();this.addBlockToDestination(this.blockData,c,u,h);this.blockData.set(this.zeroBlockData)}o=0};t.prototype.IDCT=function(){var t,e,o,i,r,n,a,s,l,d,c,u,h,p,f,g,m,v,b,y=this.blockData;for(b=0;b<8;++b){t=y[32+b];e=y[16+b]+y[48+b];o=y[40+b]-y[24+b];n=y[8+b]+y[56+b];a=y[24+b]+y[40+b];i=y[8+b]-y[56+b];r=n+a;s=y[0+b];h=(473*i-196*o+128>>8)-r;l=h-(362*(n-a)+128>>8);d=s-t;c=(362*(y[16+b]-y[48+b])+128>>8)-e;u=s+t;p=d+c;f=u+e;g=d-c;m=u-e;v=-l-(473*o+196*i+128>>8);y[0+b]=r+f;y[8+b]=h+p;y[16+b]=g-l;y[24+b]=m-v;y[32+b]=m+v;y[40+b]=l+g;y[48+b]=p-h;y[56+b]=f-r}for(b=0;b<64;b+=8){t=y[4+b];e=y[2+b]+y[6+b];o=y[5+b]-y[3+b];n=y[1+b]+y[7+b];a=y[3+b]+y[5+b];i=y[1+b]-y[7+b];r=n+a;s=y[0+b];h=(473*i-196*o+128>>8)-r;l=h-(362*(n-a)+128>>8);d=s-t;c=(362*(y[2+b]-y[6+b])+128>>8)-e;u=s+t;p=d+c;f=u+e;g=d-c;m=u-e;v=-l-(473*o+196*i+128>>8);y[0+b]=r+f+128>>8;y[1+b]=h+p+128>>8;y[2+b]=g-l+128>>8;y[3+b]=m-v+128>>8;y[4+b]=m+v+128>>8;y[5+b]=l+g+128>>8;y[6+b]=p-h+128>>8;y[7+b]=f-r+128>>8}};t.prototype.copyBlockToDestination=function(t,e,o,i){for(var r=0;r<64;r+=8,o+=i+8){e[o+0]=t[r+0];e[o+1]=t[r+1];e[o+2]=t[r+2];e[o+3]=t[r+3];e[o+4]=t[r+4];e[o+5]=t[r+5];e[o+6]=t[r+6];e[o+7]=t[r+7]}};t.prototype.addBlockToDestination=function(t,e,o,i){for(var r=0;r<64;r+=8,o+=i+8){e[o+0]+=t[r+0];e[o+1]+=t[r+1];e[o+2]+=t[r+2];e[o+3]+=t[r+3];e[o+4]+=t[r+4];e[o+5]+=t[r+5];e[o+6]+=t[r+6];e[o+7]+=t[r+7]}};t.prototype.copyValueToDestination=function(t,e,o,i){for(var r=0;r<64;r+=8,o+=i+8){e[o+0]=t;e[o+1]=t;e[o+2]=t;e[o+3]=t;e[o+4]=t;e[o+5]=t;e[o+6]=t;e[o+7]=t}};t.prototype.addValueToDestination=function(t,e,o,i){for(var r=0;r<64;r+=8,o+=i+8){e[o+0]+=t;e[o+1]+=t;e[o+2]+=t;e[o+3]+=t;e[o+4]+=t;e[o+5]+=t;e[o+6]+=t;e[o+7]+=t}};t.prototype.copyBlockToDestinationClamp=function(t,e,o,i){for(var r=0,n=0;n<8;n++){for(var a=0;a<8;a++){var s=t[r++];e[o++]=s>255?255:s<0?0:s}o+=i}};t.prototype.addBlockToDestinationClamp=function(t,e,o,i){for(var r=0,n=0;n<8;n++){for(var a=0;a<8;a++){var s=t[r++]+e[o];e[o++]=s>255?255:s<0?0:s}o+=i}};t.prototype.YCbCrToRGBA=function(){for(var t,e,o,i,r,n=this.currentY,a=this.currentCb,s=this.currentCr,l=this.currentRGBA.data,d=0,c=this.codedWidth,u=this.codedWidth+(this.codedWidth-this.width),h=0,p=this.halfWidth-(this.width>>1),f=0,g=4*this.width,m=4*this.width,v=this.width>>1,b=this.height>>1,y=0;y<b;y++){for(var A=0;A<v;A++){t=a[h];e=s[h];h++;o=e+(103*e>>8)-179;i=(88*t>>8)-44+(183*e>>8)-91;r=t+(198*t>>8)-227;var w=n[d++],_=n[d++];l[f]=w+o;l[f+1]=w-i;l[f+2]=w+r;l[f+3]=255;l[f+4]=_+o;l[f+5]=_-i;l[f+6]=_+r;l[f+7]=255;f+=8;var S=n[c++],M=n[c++];l[g]=S+o;l[g+1]=S-i;l[g+2]=S+r;l[g+3]=255;l[g+4]=M+o;l[g+5]=M-i;l[g+6]=M+r;l[g+7]=255;g+=8}d+=u;c+=u;f+=m;g+=m;h+=p}this.hasDecodeColor=!0};t.prototype.fillArray=function(t,e){for(var o=0,i=t.length;o<i;o++)t[o]=e};return t}(),_a=wa,Sa=function t(){p(this,t)},Ma=Sa;Sa.SHADER_FRAGMENT_YCBCRTORGBA=["precision mediump float;","uniform sampler2D YTexture;","uniform sampler2D CBTexture;","uniform sampler2D CRTexture;","varying vec2 texCoord;","void main() {","float y = texture2D(YTexture, texCoord).r;","float cr = texture2D(CBTexture, texCoord).r - 0.5;","float cb = texture2D(CRTexture, texCoord).r - 0.5;","gl_FragColor = vec4(","y + 1.4 * cr,","y + -0.343 * cb - 0.711 * cr,","y + 1.765 * cb,","1.0",");","}"].join("\n");Sa.SHADER_FRAGMENT_LOADING=["precision mediump float;","uniform float loaded;","varying vec2 texCoord;","void main() {","float c = ceil(loaded-(1.0-texCoord.y));","gl_FragColor = vec4(c,c,c,1);","}"].join("\n");Sa.SHADER_VERTEX_IDENTITY=["attribute vec2 vertex;","varying vec2 texCoord;","void main() {","texCoord = vertex;","gl_Position = vec4((vertex * 2.0 - 1.0) * vec2(1, -1), 0.0, 1.0);","}"].join("\n");var Oa=function(){function t(e){f(this,t);this.canvas=e.canvas}t.prototype.init=function(t,e){if(this.initWebGL()){this.render=this.renderFrameGL;this.gl.useProgram(this.program);this.gl.viewport(0,0,t,e)}else{this.canvasCtx=this.canvas.getContext("2d");this.render=this.renderFrame2D}};t.prototype.renderFrame2D=function(t){t.decodePicture();if(!t.hasDecodeColor){t.currentRGBA=document.createElement("canvas").getContext("2d").getImageData(0,0,t.width,t.height);t.YCbCrToRGBA()}this.canvasCtx.putImageData(t.currentRGBA,0,0)};t.prototype.renderFrameGL=function(t){t.decodePicture();var e=this.gl,o=new Uint8Array(t.currentY.buffer),i=new Uint8Array(t.currentCr.buffer),r=new Uint8Array(t.currentCb.buffer);e.activeTexture(e.TEXTURE0);e.bindTexture(e.TEXTURE_2D,this.YTexture);e.texImage2D(e.TEXTURE_2D,0,e.LUMINANCE,t.codedWidth,t.height,0,e.LUMINANCE,e.UNSIGNED_BYTE,o);e.activeTexture(e.TEXTURE1);e.bindTexture(e.TEXTURE_2D,this.CBTexture);e.texImage2D(e.TEXTURE_2D,0,e.LUMINANCE,t.halfWidth,t.height/2,0,e.LUMINANCE,e.UNSIGNED_BYTE,i);e.activeTexture(e.TEXTURE2);e.bindTexture(e.TEXTURE_2D,this.CRTexture);e.texImage2D(e.TEXTURE_2D,0,e.LUMINANCE,t.halfWidth,t.height/2,0,e.LUMINANCE,e.UNSIGNED_BYTE,r);e.drawArrays(e.TRIANGLE_STRIP,0,4)};t.prototype.initWebGL=function(){var t=void 0;try{t=this.gl=this.canvas.getContext("webgl")||this.canvas.getContext("experimental-webgl");this.glbuffer=t.createBuffer();t.bindBuffer(t.ARRAY_BUFFER,this.glbuffer);t.bufferData(t.ARRAY_BUFFER,new Float32Array([0,0,0,1,1,0,1,1]),t.STATIC_DRAW);this.program=t.createProgram();t.attachShader(this.program,this.compileShader(t.VERTEX_SHADER,Ma.SHADER_VERTEX_IDENTITY));t.attachShader(this.program,this.compileShader(t.FRAGMENT_SHADER,Ma.SHADER_FRAGMENT_YCBCRTORGBA));t.linkProgram(this.program);if(!t.getProgramParameter(this.program,t.LINK_STATUS))throw new Error(t.getProgramInfoLog(this.program));t.useProgram(this.program);this.YTexture=this.createTexture(0,"YTexture");this.CBTexture=this.createTexture(1,"CBTexture");this.CRTexture=this.createTexture(2,"CRTexture");var e=t.getAttribLocation(this.program,"vertex");t.enableVertexAttribArray(e);t.vertexAttribPointer(e,2,t.FLOAT,!1,0,0);this.loadingProgram=t.createProgram();t.attachShader(this.loadingProgram,this.compileShader(t.VERTEX_SHADER,Ma.SHADER_VERTEX_IDENTITY));t.attachShader(this.loadingProgram,this.compileShader(t.FRAGMENT_SHADER,Ma.SHADER_FRAGMENT_LOADING));t.linkProgram(this.loadingProgram);t.useProgram(this.loadingProgram);e=t.getAttribLocation(this.loadingProgram,"vertex");t.enableVertexAttribArray(e);t.vertexAttribPointer(e,2,t.FLOAT,!1,0,0)}catch(t){return!1}return!!t};t.prototype.compileShader=function(t,e){var o=this.gl,i=o.createShader(t);o.shaderSource(i,e);o.compileShader(i);if(!o.getShaderParameter(i,o.COMPILE_STATUS))throw new Error(o.getShaderInfoLog(i));return i};t.prototype.createTexture=function(t,e){var o=this.gl,i=o.createTexture();o.bindTexture(o.TEXTURE_2D,i);o.texParameteri(o.TEXTURE_2D,o.TEXTURE_MAG_FILTER,o.LINEAR);o.texParameteri(o.TEXTURE_2D,o.TEXTURE_MIN_FILTER,o.LINEAR);o.texParameteri(o.TEXTURE_2D,o.TEXTURE_WRAP_S,o.CLAMP_TO_EDGE);o.texParameteri(o.TEXTURE_2D,o.TEXTURE_WRAP_T,o.CLAMP_TO_EDGE);o.uniform1i(o.getUniformLocation(this.program,e),t);return i};return t}(),Ia=Oa,Ea=[null,23.976,24,25,29.97,30,50,59.94,60],Da=Ea,Ca=function(){function t(){g(this,t);this.data=new Uint8Array(0);this.lastIndex=0}t.prototype.push=function(e){this.data=t.merge(this.data,e)};t.prototype.getData=function(){for(var t=[],e=void 0,o=this.lastIndex;o<this.data.length;o+=1)if(0===this.data[o]&&0===this.data[o+1]&&1===this.data[o+2]){var i=this.data[o+3];if(i===oa.PICTURE)t.push(o);else if(i===oa.SEQUENCE&&this.data.length-(o+4)>32){var r=new ea(this.data.slice(o+4,32)),n=r.getBits(12),a=r.getBits(12),s=r.getBits(4),l=Da[r.getBits(4)];n&&a&&(e={width:n,height:a,aspectRatio:s,fps:l})}}var d=[];if(t.length>1)for(var c=0;c<t.length-1;c+=1){d.push(new ea(this.data.slice(t[c],t[c+1])));this.lastIndex=t[c+1]}return{frames:d,metaData:e}};t.prototype.getTailData=function(){return this.data.slice(this.lastIndex,this.data.length)};t.merge=function(t,e){var o=new Uint8Array(t.length+e.length);o.set(t);o.set(e,t.length);return o};return t}(),xa=Ca,Ta=30,Pa=function(t){function e(){var o=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};m(this,e);var i=v(this,t.call(this));i.canvas=o.canvas;i.finished=!1;i.currentRenderFrame=0;i.hasStop=!0;i.timeoutId=null;i.buffer=new xa;i.renderEngine=new Ia(o);i.currentTime=0;i.fps=Ta;i.frames=[];i.messagesData=[];i.duration=0;i.lastRenderTime=Date.now();i.firstPacketTimeout=o.firstPacketTimeout||500;return i}b(e,t);e.prototype.createFrame=function(t){this.frames.push(new _a(t,this.width,this.height,this.frames[this.frames.length-1]))};e.prototype.setMetaData=function(t){if(t){var e=t.width,o=t.height,i=t.fps;i&&(this.fps=i);if(e&&o&&this.width!==e&&this.height!==o){this.width=e;this.height=o;this.canvas.width=this.width;this.canvas.height=this.height;this.renderEngine.init(this.width,this.height)}}};e.prototype.decodeMessage=function(){var t=this;if(this.frames.length-this.currentRenderFrame>this.fps/2)setTimeout(this.decodeMessage.bind(this),0);else{var e=this.messagesData.shift();if(e){this.buffer.push(new Uint8Array(e));var o=this.buffer.getData(),i=o.frames;this.setMetaData(o.metaData);i.forEach(function(e){return t.createFrame(e)});Date.now()-this.lastRenderTime>=1e3/this.fps&&this.nextFrame()}}};e.prototype.createSocket=function(t){var e=this,o=new WebSocket(t);o.binaryType="arraybuffer";var i=function(t){e.messagesData.push(t.data);setTimeout(e.decodeMessage.bind(e),0)};o.addEventListener("message",function t(r){clearTimeout(o.firstPacketWaitingTimeoutId);var n=new ea(r.data);e.decodeInitPackage(n);o.removeEventListener("message",t);o.addEventListener("message",i)});o.firstPacketWaitingTimeoutId=setTimeout(function(){e.trigger("error","jsmpeg.createSocket() Websocket did not get a first packet during "+e.firstPacketTimeout+" ms")},this.firstPacketTimeout);return o};e.prototype.processSocket=function(t){var e=this;try{this.client=this.createSocket(t);this.client.addEventListener("error",function(){e.trigger("error","jsmpeg.init() Websocket initialization error")});this.client.addEventListener("close",function(){e.finished=!0})}catch(t){this.trigger("error","jsmpeg.init() Websocket create error")}};e.prototype.processFile=function(t){var e=this;Object(Xn.F)(t,{options:{withCredentials:!1,responseType:"arraybuffer"}}).then(function(t){e.buffer.push(new Uint8Array(t.target.response));var o=e.buffer.getData(),i=o.frames;e.setMetaData(o.metaData);i.forEach(function(t){return e.createFrame(t)});e.duration=e.frames.length/e.fps;e.trigger("onDecodeInitPackage")}).catch(function(){e.trigger("error","jsmpeg.pricessFile("+t+") Failed to load resource")})};e.prototype.init=function(t){/^wss?:\/\//.test(t)?this.processSocket(t):this.processFile(t)};e.prototype.decodeInitPackage=function(t){t.getBits(32);this.setMetaData({width:t.getBits(16),height:t.getBits(16),fps:t.getBits(8)||Ta});this.trigger("onDecodeInitPackage")};e.prototype.play=function(){if(this.hasStop){this.hasStop=!1;this.startAnimation()}};e.prototype.pause=function(){this.hasStop=!0;this.timeoutId&&window.clearTimeout(this.timeoutId)};e.prototype.stop=function(){this.currentRenderFrame=0;this.currentTime=0;this.pause()};e.prototype.timeUpdate=function(){this.trigger("timeupdate",{target:{currentTime:this.currentTime,duration:this.duration}})};e.prototype.nextFrame=function(){var t=this.frames[this.currentRenderFrame];if(t&&!this.hasStop){this.lastRenderTime=Date.now();this.renderEngine.render(t);this.currentTime=this.currentRenderFrame/this.fps;this.currentRenderFrame+=1;this.timeUpdate()}};e.prototype.startAnimation=function(){if(!this.hasStop)if((this.finished||this.duration>0)&&this.currentRenderFrame>=this.frames.length-1&&0===this.messagesData.length)this.trigger("ended");else{this.timeoutId=setTimeout(this.startAnimation.bind(this),1e3/this.fps);this.nextFrame()}};return e}($n.a),ja=Pa,ka=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var o=arguments[e];for(var i in o)Object.prototype.hasOwnProperty.call(o,i)&&(t[i]=o[i])}return t},Ra="Module::VpaidCanvas",Fa=function(t){function e(){var o=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};y(this,e);Ln.b.trace(Ra+".constructor()");var i=A(this,t.call(this,ka({},o,{ancestor:Ra}))),r=o.duration,n=o.mpgmedia,a=n.width,s=n.height;i.adDuration=r;i.adWidth=a;i.adHeight=s;return i}w(e,t);e.prototype.initAd=function(e,o,i,r){var n=this,a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{},s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:{};t.prototype.initAd.call(this,e,o,i,r,a,s);var l=this.options,d=l.mpgmedia,c=l.mp4media,u=l.mp3media,h=l.duration;this.setAdVolume(0);this.adDuration=h;this.videoSlot=this.videoSlot||s.videoSlot;this.audioSlot=this.audioSlot||s.audioSlot;var p=this.canvas;if(!Object(qn.p)(p,"canvas")){p=this.canvas=document.createElement("canvas");this.Y(p,"click",C.bind(this));Object(qn.c)(p,{width:e+"px",height:o+"px"});s.slot.appendChild(p);this.he(u&&u.src,c&&c.src)}var f=this.jsmpeg=new ja({canvas:p,firstPacketTimeout:1200});this.Q(f,"timeupdate",D.bind(this));this.Q(f,"onDecodeInitPackage",E.bind(this));this.Q(f,"ended",function(){var t=n.getAdExpanded();f.ended=!0;if(!t){n.collapseAd();n.trigger("AdVideoComplete")}});this.Q(f,"error",function(t){n.trigger("AdError",Vn.a.GENERAL_VPAID_ERROR,String(t))},"error");f.init(d&&d.src);this.Q(this,"AdVolumeChange",S.bind(this));this.Q(this,"AdVideoStart",M.bind(this));this.Q(this,"AdVideoComplete",O.bind(this));return Promise.resolve(this)};e.prototype.resizeAd=function(e,o,i){var r=this.jsmpeg,n=this.canvas,a=this.environmentVars,s=this.options.mpgmedia,l=s.scalable,d=a||{},c=d.forceAspectRatio,u=d.slot,h=this.getAdAspectRatio(),p=c||s.maintainAspectRatio,f=void 0;if(r&&r.width&&h&&l&&a&&a.slot){var g=r.width>r.height,m=e>o,v=void 0;if(null===p){var b=s.width/s.height,y=e/o;p=100-100*(y<b?y/b:b/y)>10}!0===p&&(v=e/o<r.width/r.height);!1===p&&(v=e/o>r.width/r.height);g!==m&&(v=!0);m&&!g&&(v=!1);f=v?{width:e,height:e*h}:{height:o,width:o/h}}else f={width:s.width,height:s.height};Object(Xn.d)(n,f,u,{width:e,height:o});return t.prototype.resizeAd.call(this,e,o,i)};e.prototype.startAd=function(){var e=this.jsmpeg,o=this.videoSlot;this.getAdExpanded()?o&&o.play():e.play();return t.prototype.startAd.call(this)};e.prototype.stopAd=function(){var e=this.jsmpeg,o=this.videoSlot;this.getAdExpanded()?o&&o.pause():e.pause();return t.prototype.stopAd.call(this)};e.prototype.pauseAd=function(){var e=this.jsmpeg,o=this.videoSlot,i=this.getAdExpanded();e.pause();i&&o&&o.pause();return t.prototype.pauseAd.call(this)};e.prototype.resumeAd=function(){var e=this.jsmpeg,o=this.videoSlot,i=this.getAdExpanded();e.play();i&&o&&o.play();return t.prototype.resumeAd.call(this)};e.prototype.expandAd=function(){var e=this.jsmpeg,o=this.videoSlot;if(!this.getAdExpanded()&&o){o.currentTime=e.currentTime;Object(qn.r)(this.videoSlot);this.setAdExpanded(!0)}return t.prototype.expandAd.call(this)};e.prototype.collapseAd=function(){var e=this,o=this.jsmpeg,i=this.videoSlot;if(this.getAdExpanded()&&i){i.pause();setTimeout(function(){"function"==typeof i.webkitExitFullscreen&&i.webkitExitFullscreen();o.ended&&e.trigger("AdVideoComplete")},50)}return t.prototype.collapseAd.call(this)};e.prototype.skipAd=function(){this.stopAd();return t.prototype.skipAd.call(this)};e.prototype.getAdAspectRatio=function(){var t=this.adWidth,e=this.adHeight,o=this.jsmpeg,i=o||this.options.mpgmedia,r=i.width,n=i.height;return r&&n?n/r:t&&e?e/t:9/16};e.prototype.S=function(){Ln.b.trace(Ra+".destroy()");t.prototype.S.call(this);this.jsmpeg.at={};this.jsmpeg=null};e.prototype.he=function(t,e){Ln.b.trace(Ra+" Initializing secondary audio/video slot");var o=void 0,i=void 0;if(t){o=this.videoSlot=this.audioSlot||document.createElement("audio");i=t}else{if(!e){this.pe();return}o=this.videoSlot=this.videoSlot||document.createElement("video");o.playsInline=!0;i=e}this.environmentVars.slot.appendChild(o);o.src=i;Object(qn.c)(o,{display:"none"});this.Y(o,"volumechange",this.trigger.bind(this,"AdVolumeChange"));this.Y(o,"loadeddata",I.bind(this));this.Y(o,"webkitendfullscreen",this.collapseAd.bind(this));this.Y(o,"ended",this.collapseAd.bind(this));this.Y(o,"error",this.pe.bind(this));Ln.b.trace(Ra+".initAudioVideo() Starting secondary audio/video slot");o.load()};e.prototype.pe=function(){Ln.b.warn(Ra+" Failed to initialize secondary audio/video slot");this.videoSlot=null;this.trigger("AdAudioDisabled")};e.create=function(t,o){var i=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=o&&o.getAPI&&o.getAPI()||{},n=r.getControlData;return new Promise(function(r){var a=t.MediaFiles,s=t.duration,l=t.rawDuration,d=a["video/mp4"]&&a["video/mp4"][0],c=d&&d.src,u=c&&o.isMediaUrlBlocked(d.src),h=a["audio/mp3"]&&a["audio/mp3"][0],p=n&&n("vnCache")||{serverUrl:"",strict:!1};if(!i&&c&&!u&&(Gn.b||!p.strict&&Gn.a))throw new Error;var f=o.format&&o.format.fe&&o.format.fe().viewportWidth||0,g=a["video/mpeg"],m=g&&g.filter(function(t){return t.src&&!o.isMediaUrlBlocked(t.src)}).reduce(function(t,e){return Math.abs(t.width-f)<Math.abs(e.width-f)?t:e}),v=void 0;if(m){var b=m.width,y=void 0;if(b&&f&&!1===m.scalable&&(y=Math.abs(b-f)/f)>.1){Ln.b.log(Ra+" difference between viewportWidth && mediaWidth more than 10% ("+y+"). Set media.scalable = true");m.scalable=!0}v=Promise.resolve(m)}else{if(!c||u||!p||!p.serverUrl)throw new Error;Ln.b.trace(Ra+".create() Querying cache server");var A=Object(Xn.b)(p.serverUrl,{url:d.src});Ln.b.track(Ra+" request vnCache ("+A+")");v=Object(Xn.F)(A).then(function(t){return JSON.parse(t.target.responseText)}).catch(function(){throw new Error("Cache server did not provide playable data")}).then(function(t){return t.video})}v.then(function(t){Ln.b.log(Ra+".create("+t.src+")");o.setSelectedCreative(t.src,l);var i=new e({module:o,mpgmedia:t,mp3media:h,mp4media:d,duration:s,moduleAPI:o.getAPI()});r(i)})})};return e}(Vn.b),Na=Fa,Va=o(18),La=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var o=arguments[e];for(var i in o)Object.prototype.hasOwnProperty.call(o,i)&&(t[i]=o[i])}return t},za="Module::VpaidImg",Wa=function(t){function e(){var o=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};x(this,e);Ln.b.trace(za+".constructor()");var i=T(this,t.call(this,La({},o,{ancestor:za})));i.image=null;i.originalSize={};i.ge=new Va.a({duration:i.options.duration,VPAID_API:{trigger:i.trigger.bind(i)},logger:i.logger});return i}P(e,t);e.prototype.initAd=function(e,o,i,r){var n=this,a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{},s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:{};t.prototype.initAd.call(this,e,o,i,r,a,s);var l=this.options.media,d=this.image;if(!Object(qn.p)(d,"img")){var c=this.image=document.createElement("img");this.Y(c,"click",k.bind(this));this.Y(c,"load",j.bind(this));this.Y(c,"error",function(t){n.trigger("AdError",Vn.a.GENERAL_VPAID_ERROR,String(t))});s.slot.appendChild(c);c.src=l.src;this.Q(this,"error",function(t){n.trigger("AdError",Vn.a.GENERAL_VPAID_ERROR,String(t))},"error")}return Promise.resolve(this)};e.prototype.getModuleOptions=function(){return Promise.resolve({destroyControls:["spinner","volume","play"],controlsActions:[{name:"container",action:function(t){t&&Object(qn.c)(t,{backgroundColor:"transparent"})}}]})};e.prototype.resizeAd=function(e,o,i){var r=this.image,n=this.environmentVars,a=this.originalSize,s=n||{},l=s.slot;Ln.b.trace(za+".resizeAd("+e+", "+o+") image.width="+(r&&r.width));if(r&&r.width&&n&&n.slot){var d=r.width,c=a||{},u=c.width;if(d>e||d<=e&&u>=d){var h=Math.min(e,a.width);if(h!==d){r.width=h;Ln.b.trace(za+".resizeAd("+e+", "+o+") change image size image.width="+r.width+" image.height="+r.height,2,"brown")}}var p=r.width,f=r.height;this.trigger("slotSizeChanged",{shouldNotResize:!0,height:f,width:p});t.prototype.resizeAd.call(this,p,f,i);Object(Xn.d)(null,{width:p,height:f},l,{width:e,height:f});this.trigger("slotSizeChanged",{shouldNotResize:!0,width:null})}};e.prototype.startAd=function(){Ln.b.log(za+" startAd()",2,"blue");this.ge.start();this.trigger("AdDurationChange");t.prototype.startAd.call(this);this.trigger("AdImpression");this.trigger("AdVideoStart")};e.prototype.stopAd=function(){this.ge.stop();return t.prototype.stopAd.call(this)};e.prototype.pauseAd=function(){this.ge.stop();return t.prototype.pauseAd.call(this)};e.prototype.resumeAd=function(){this.ge.start();return t.prototype.resumeAd.call(this)};e.prototype.skipAd=function(){this.stopAd();return t.prototype.skipAd.call(this)};e.prototype.getAdAspectRatio=function(){var t=this.adWidth,e=this.adHeight,o=this.image,i=o||this.options.media,r=i.width,n=i.height;return r&&n?n/r:t&&e?e/t:9/16};e.prototype.getAdRemainingTime=function(){return this.ge.getAdRemainingTime()};e.prototype.S=function(){Ln.b.trace(za+".destroy()");this.ge.S();t.prototype.S.call(this)};e.create=function(t,o){return new Promise(function(i){var r=t.MediaFiles,n=t.rawDuration,a=t.duration,s=o.format&&o.format.fe&&o.format.fe().viewportWidth||0,l=(r["image/png"]||[]).concat(r["image/jpg"]||[]).concat(r["image/gif"]||[]),d=l&&l.filter(function(t){return t.src}).reduce(function(t,e){return Math.abs(t.width-s)<Math.abs(e.width-s)?t:e});if(!d)throw new Error;Ln.b.log(za+".create("+d.src+")");o.setSelectedCreative(d.src,n);i(new e({module:o,media:d,duration:a}))})};return e}(Vn.b),Ha=Wa,Ua=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var o=arguments[e];for(var i in o)Object.prototype.hasOwnProperty.call(o,i)&&(t[i]=o[i])}return t},Ba="::VpaidVideo",qa={startTime:0},Xa=function(t){function e(){var o=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};R(this,e);var i=o&&(o.logger||o.module&&o.module.logger||o.moduleAPI&&o.moduleAPI.logger)||Ln.b;i.trace(Ba+".constructor()");var r=F(this,t.call(this,Ua({},qa,o,{ancestor:Ba,logger:i}))),n=o.mp4media,a=n.width,s=n.height;r.adWidth=a;r.adHeight=s;r.startedVideotWithoutSound=null;r.startVideoWithSoundFailed=null;r.setAdVolumeCounter=0;var l=new Xn.a;r.playerSuccessfullyStartedPromise=l.promise;r.playerSuccessfullyStartedResolve=l.resolve;return r}N(e,t);e.prototype.initAd=function(e,o,i,r){var n=this,a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{},s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:{};t.prototype.initAd.call(this,e,o,i,r,a,s);var l=void 0,d=s.videoSlotCanAutoPlay||a.videoSlotCanAutoPlay;this.videoSlotCanAutoPlay=d;"true"===d||"1"===d?this.videoSlotCanAutoPlay=!0:"false"!==d&&"false"!==d||(this.videoSlotCanAutoPlay=!1);this.videoSlot=s.videoSlot;this.logger.trace(Ba+".initAd() environmentVars.videoSlot="+s.videoSlot+" videoSlotCanAutoPlay is "+this.videoSlotCanAutoPlay+" useExistsVideoSlot="+this.useExistsVideoSlot+" videoSlot="+this.videoSlot,2);var c=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:n.videoSlot,i=arguments.length>1&&void 0!==arguments[1]&&arguments[1];n.logger.trace(Ba+".initAd.videoStart()",2);Object(qn.c)(t,{width:e+"px",height:o+"px"});t.src=n.options.mp4media.src;Object(qn.c)(t,{display:i?"hidden":""});t.load()};return new Promise(function(e,o){if(Object(qn.p)(s.videoSlot,"video")){l=s.videoSlot;n.logger.track(Ba+".initAd() Using environmentVars.videoSlot, videoSlotCanAutoPlay is "+n.videoSlotCanAutoPlay)}l=n.me(s.slot,l);c(l,!0);var i=Object(qn.r)(l);if(i){var r=n.Y(l,"error",function(t){var e=B(t),i=e.code,r=e.message,n=Error(r);n.code=i;o(n)}),a=function(){return i.then(function(){l.pause();n.startedVideotWithoutSound=l.muted;var o=n.getAdVolume();t.prototype.setAdVolume.call(n,o,{forceTrigger:!0});r&&n.J(l,"error",r);r=null;n.Y(l,"error",U.bind(n));n.logger.log(Ba+" initAd() video.play() startPromise() video has been started successfully. Set it in pause. videoSlot.muted="+l.muted+" videoSlot.volume="+l.volume+" super.setAdVolume("+o+")",2,"green");n.playerSuccessfullyStartedResolve(l);e(n)})};n.logger.trace(Ba+" initAd() video.play() return promise");a().catch(function(t){n.startedVideotWithoutSound=null;n.startVideoWithSoundFailed=!0;var e=Ba+" initAd("+n+") failed video autoplay with videoSlot.muted="+l.muted+" videoSlot.volume="+l.volume;n.logger.warn(e+" error:"+(t&&t.message||t));if(!l.muted||l.volume){n.adVolume=0;n.videoSlotCanAutoPlay=!1;l.muted=!0;l.volume=0;n.logger.log(Ba+" initAd(). One more try start media with videoSlot.muted="+l.muted+" videoSlot.volume=0("+l.volume+") paused="+l.paused,1);i=Object(qn.r)(l);a().then(function(){n.startedVideotWithoutSound=!0}).catch(function(t){var e=Ba+" initAd("+n+") failed video autoplay err="+t;n.logger.error(e);o(Object(Xn.f)(t,e,Vn.a.FAIL_MEDIA_START))})}else o(Object(Xn.f)(t,e,Vn.a.FAIL_MEDIA_START))})}else if(void 0===i){n.logger.warn(Ba+" initAd() video.play() do not return promise");if(l.paused){var d="failed video autoplay";n.logger.error(Ba+" initAd() "+d);var u=Error(""+d);u.code=Vn.a.FAIL_MEDIA_START;o(u)}else{n.logger.log(Ba+" initAd() video autoplay started",1);e(n)}}else{n.logger.error(Ba+" initAd() element is neither video nor audio tag");o()}})};e.prototype.me=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if(!this.options)return null;var o=this.options,i=o.startTime,r=o.moduleAPI.setControlData;if(!e){e=document.createElement("video");e.muted=!1===this.videoSlotCanAutoPlay||!this.adVolume;e.currentTime=i;e.volume=e.muted?0:this.adVolume;e.playsInline=!0;Object(qn.c)(e,{width:"100%",display:"none"});t.appendChild(this.U(e));this.ve=t;this.logger.trace(Ba+"._createVideoSlot, videoSlotCanAutoPlay is "+this.videoSlotCanAutoPlay);r&&r("videoSlot",{node:e})}this.Y(e,"loadedmetadata",L.bind(this));this.Y(e,"loadeddata",V.bind(this));this.Y(e,"durationchange",z.bind(this));this.Y(e,"play",W.bind(this));this.Y(e,"volumechange",H.bind(this));this.Y(e,"click",q.bind(this));this.videoSlot=e;this.logger.log(Ba+"._createVideoSlot, videoSlot.muted="+e.muted);return e};e.prototype.resizeAd=function(e,o,i){var r=this.videoSlot,n=this.useExistsVideoSlot;this.logger.trace(Ba+".resizeAd("+e+", "+o+" useExistsVideoSlot="+n);if(n)Object(qn.c)(r,{width:e+"px",height:o+"px"});else{var a=this.videoSlot,s=this.environmentVars,l=this.options.mp4media,d=l.scalable,c=s||{},u=c.forceAspectRatio,h=c.slot,p=this.getAdAspectRatio(),f=u||l.maintainAspectRatio,g=void 0;if(p&&d&&h){var m=l.width>l.height,v=e>o,b=void 0;if(null===f){var y=l.width/l.height,A=e/o;f=100-100*(A<y?A/y:y/A)>10}!0===f&&(b=e/o<l.width/l.height);!1===f&&(b=e/o>l.width/l.height);m!==v&&(b=!0);v&&!m&&(b=!1);g=b?{width:e,height:e*p}:{height:o,width:o/p}}else g={width:l.width,height:l.height};this.logger.none(Ba+".resizeAd() adWidth="+e+" adHeight="+o+" newSlotSize="+JSON.stringify(g)+" adAspectRatio="+p,2,"blue");Object(Xn.d)(a,{width:e,height:o},h,g)}return t.prototype.resizeAd.call(this,e,o,i)};e.prototype.activateMuteChangingEnable=function(){var t=this.videoSlot;t&&(t.wasClicked=!0)};e.prototype.isMutedChangeEnableActivated=function(){return this.videoSlot&&this.videoSlot.wasClicked};e.prototype.startAd=function(){var e=this;this.logger.log(Ba+" startAd()",2,"blue");this.playerSuccessfullyStartedPromise.then(function(){e.logger.none(Ba+" startAd() playerSuccessfullyStartedPromise.then",2,"blue");var o=e.videoSlot,i=e.options.startTime;(4===o.readyState?X.call(e,o):new Promise(function(t){e.logger.trace(Ba+" startAd() video has not been downloaded yet: readyState="+o.readyState+". Waiting when will be ready.",1,"blue");o.addEventListener("canplaythrough",function i(){o.removeEventListener("canplaythrough",i);e.logger.trace(Ba+" startAd() video has been downloaded: readyState="+o.readyState+".",2);t(X.call(e,o))})})).then(function(){o.currentTime=i;Object(qn.c)(o,{display:""});t.prototype.startAd.call(e);e.Y(o,"timeupdate",W.bind(e))})})};e.prototype.stopAd=function(){var e=this.videoSlot;e&&e.pause();return t.prototype.stopAd.call(this)};e.prototype.pauseAd=function(){var e=this.videoSlot;e&&e.pause();return t.prototype.pauseAd.call(this)};e.prototype.resumeAd=function(){var e=this.videoSlot;e&&Object(qn.r)(e);return t.prototype.resumeAd.call(this)};e.prototype.expandAd=function(){this.trigger("AdError",Vn.a.GENERAL_VPAID_ERROR,"Not supported")};e.prototype.collapseAd=function(){this.trigger("AdError",Vn.a.GENERAL_VPAID_ERROR,"Not supported")};e.prototype.skipAd=function(){this.stopAd();t.prototype.skipAd.call(this)};e.prototype.setAdVolume=function(e,o){var i=this.videoSlot;if(i){this.logger.trace(Ba+" setAdVolume("+e+") videoSlot.muted="+i.muted+" startedVideotWithoutSound="+this.startedVideotWithoutSound+" startVideoWithSoundFailed="+this.startVideoWithSoundFailed+" safari="+Gn.g+" ");i.volume=e;i.muted&&e?i.paused||0!==i.currentTime?!1===this.startedVideotWithoutSound?i.muted=!1:(i.paused||i.currentTime>0)&&(i.muted=!1):i.muted=!1:i.muted||e||(i.muted=!0)}return t.prototype.setAdVolume.call(this,e,o)};e.prototype.getAdVolume=function(){var e=this.videoSlot;e&&(this.adVolume=Gn.e||Gn.g?e.muted?0:1:e.volume);return t.prototype.getAdVolume.call(this)};e.prototype.getAdRemainingTime=function(){var t=this.videoSlot;return t?t.duration-t.currentTime:0};e.prototype.getAdAspectRatio=function(){var t=this.adWidth,e=this.adHeight,o=this.options.mp4media,i=o.width,r=o.height;return i&&r?r/i:t&&e?e/t:9/16};e.prototype.S=function(){this.logger.trace(Ba+".destroy()");var e=this.ve;e&&Object(qn.p)(e)&&Object(qn.u)(e);t.prototype.S.call(this)};e.create=function(t,o){var i=o&&o.getAPI&&o.getAPI()||{},r=i.logger||Ln.b,n=i.getControlData,a=n&&n("vnCache")||{strict:!1};return new Promise(function(i,n){if(Gn.b||Gn.a&&!a.strict){var s=o.format&&o.format.fe&&o.format.fe().viewportWidth||0,l=t.MediaFiles["video/mp4"];if(!l||!l.length){n();return}var d=l.filter(function(t){return t.src&&!o.isMediaUrlBlocked(t.src)}).reduce(function(t,e){return Math.abs(t.width-s)<Math.abs(e.width-s)?t:e});if(d){r.trace(Ba+".create("+d.src+")");var c=d.width,u=void 0;if(c&&s&&!1===d.scalable&&(u=Math.abs(s-c)/s)>.1){r.trace(Ba+" difference between viewportWidth && mediaWidth more than 10% ("+u+"). Set media.scalable = true");d.scalable=!0}o.setSelectedCreative(d.src,t.rawDuration);i(new e({module:o,mp4media:d,moduleAPI:o.getAPI()}));return}}n()})};return e}(Vn.b),Ga=Xa,Ya=o(25),Ja="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Qa="        precision mediump float;        uniform sampler2D u_Sampler;        varying vec2 v_Uvpos;        void main() {                gl_FragColor = texture2D(u_Sampler, mod(v_Uvpos, vec2(1.0, 1.0)));            }    ";G.prototype.initBuffers=function(t){var e=this.gl,o=t?2:16,i=t?4:5,r=Y(o,i),n=r[0],a=r[1],s=r[2];this.sizeAttrPos=3;this.sizeAttrUvpos=2;this.nVertices=s.length;this.bufferPos=e.createBuffer();e.bindBuffer(e.ARRAY_BUFFER,this.bufferPos);e.bufferData(e.ARRAY_BUFFER,new Float32Array(n),e.STATIC_DRAW);this.bufferUvpos=e.createBuffer();e.bindBuffer(e.ARRAY_BUFFER,this.bufferUvpos);e.bufferData(e.ARRAY_BUFFER,new Float32Array(a),e.STATIC_DRAW);this.bufferIndices=e.createBuffer();e.bindBuffer(e.ELEMENT_ARRAY_BUFFER,this.bufferIndices);e.bufferData(e.ELEMENT_ARRAY_BUFFER,new Uint16Array(s),e.STATIC_DRAW)};G.prototype.initTexture=function(){var t=this.gl;this.texture=t.createTexture();t.bindTexture(t.TEXTURE_2D,this.texture);t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MAG_FILTER,t.LINEAR);t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MIN_FILTER,t.LINEAR);t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_S,t.CLAMP_TO_EDGE);t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_T,t.CLAMP_TO_EDGE);t.bindTexture(t.TEXTURE_2D,null)};G.prototype.initShaders=function(t){var e=this.gl;this.fragment=e.createShader(e.FRAGMENT_SHADER);this.vertex=e.createShader(e.VERTEX_SHADER);e.shaderSource(this.vertex,"        uniform mat4 u_Proj;        attribute vec4 a_Pos;        attribute vec2 a_Uvpos;        varying vec2 v_Uvpos;        void main() {            gl_Position = u_Proj * a_Pos;            v_Uvpos = a_Uvpos;        }    ");e.shaderSource(this.fragment,t?Qa.replace(")));","))).bgra;"):Qa);e.compileShader(this.vertex);e.compileShader(this.fragment)};G.prototype.initProgram=function(){var t=this.gl;this.program=t.createProgram();t.attachShader(this.program,this.vertex);t.attachShader(this.program,this.fragment);t.linkProgram(this.program);t.getProgramParameter(this.program,t.LINK_STATUS)||console.log("WebGL Error: Unable to initialize the shader program: "+t.getProgramInfoLog(this.program));t.useProgram(this.program);this.attrPos=t.getAttribLocation(this.program,"a_Pos");t.enableVertexAttribArray(this.attrPos);this.attrUvpos=t.getAttribLocation(this.program,"a_Uvpos");t.enableVertexAttribArray(this.attrUvpos)};G.prototype.draw=function(t){var e=this.gl;e.useProgram(this.program);e.activeTexture(e.TEXTURE0);e.bindTexture(e.TEXTURE_2D,this.texture);e.texImage2D(e.TEXTURE_2D,0,e.RGBA,e.RGBA,e.UNSIGNED_BYTE,this.src);e.viewport(0,0,this.canvas.width,this.canvas.height);var o=Ya.mat4.create();Ya.mat4.perspective(o,.4*Math.PI,this.canvas.width/this.canvas.height,.01,1e4);var i=Ya.mat4.create();Ya.mat4.fromQuat(i,t);Ya.mat4.invert(i,i);Ya.mat4.rotateY(i,i,-Math.PI/2);var r=Ya.mat4.create();Ya.mat4.mul(r,o,i);e.uniformMatrix4fv(e.getUniformLocation(this.program,"u_Proj"),!1,r);e.bindBuffer(e.ARRAY_BUFFER,this.bufferPos);e.vertexAttribPointer(this.attrPos,this.sizeAttrPos,e.FLOAT,!1,0,0);e.bindBuffer(e.ARRAY_BUFFER,this.bufferUvpos);e.vertexAttribPointer(this.attrUvpos,this.sizeAttrUvpos,e.FLOAT,!1,0,0);e.bindBuffer(e.ELEMENT_ARRAY_BUFFER,this.bufferIndices);e.drawElements(e.TRIANGLE_STRIP,this.nVertices,e.UNSIGNED_SHORT,0)};J.prototype.resize=function(t,e){if(t&&e){var o=t/e,i=Math.round(e/2),r=Math.round(i*o);this.target.height=i+i%2;this.target.width=r+r%2;console.log("S360Video.resize(): src-size=(%d,%d); dest-size=(%d,%d)",t,e,r+r%2,i+i%2)}};J.prototype.start=function(){this.webGL||(this.webGL=new G(this.src,this.target,this.bMobile,this.bIos));if(this.webGL.gl){console.log("S360Video.start():");this.drawOff();if(!this.bInited){this.bInited=!0;this.initOrientation();this.initControls()}this.resetRotation();this.bPlayDep||this.drawOn()}else console.log("WebGL Error: Unable to initialize context.")};J.prototype.stop=function(t){console.log("S360Video.stop(): bHide="+t);this.drawOff();(this.bHide||t)&&this.show(!1)};J.prototype.show=function(t){this.target.style.display=t?"block":"none"};J.prototype.drawOn=function(){if(this.webGL.gl&&!this.idRAF){console.log("S360Video.drawOn():");this.show(!0);var t=0,e=function(o){var i=o-t;t=o;if(this.bReady=this.bCanvasSrc||this.src.readyState>=2&&(!this.bIos||this.src.currentTime>.1)){var r=!o||i;r&&this.onRotmapPlayback();this.webGL.draw(this.rotOut);r&&this.onRotmapRecord()}this.idRAF=(window.savedRequestAnimationFrame||requestAnimationFrame)(e)}.bind(this);e(0);console.log(" idRAF="+this.idRAF)}};J.prototype.drawOff=function(){if(this.webGL.gl&&this.idRAF){console.log("S360Video.drawOff():");cancelAnimationFrame(this.idRAF);this.idRAF=0}};J.prototype.configRotmap=function(t){t=Q(t,{rotmapMode:"",rotmapData:null,rotmapInterval:33,rotmapFps:0});var e=["record","seek","playback"].indexOf(t.rotmapMode);this.iRotmapMode=0;if(!(this.bCanvasSrc||e<=-1||e+1>=2&&("object"!==Ja(t.rotmapData)||!t.rotmapData.length))){this.iRotmapMode=++e;this.aRotmap=e>=2?t.rotmapData:[];this.nRotmapInt=1===e&&(t.rotmapFps?1e3/t.rotmapFps:t.rotmapInterval);this.nRotmapTime0=0;this.iRotmapItem=0;console.log("S360Video.configRotmap(): iRotmapMode="+this.iRotmapMode+"; n(aRotmap)="+this.aRotmap.length+"; nRotmapInt="+this.nRotmapInt)}};J.prototype.onRotmapRecord=function(){if(this.nRotmapInt){var t=this.src,e=Math.round(1e3*t.currentTime);if(e){if(e<this.nRotmapInt){if(this.aRotmap.length)return;this.aRotmap[0]=[0].concat(Array.from(this.rotDrag))}else if(!(e-this.nRotmapTime0<this.nRotmapInt)){this.aRotmap.push([e].concat(Array.from(this.rotDrag)));this.nRotmapTime0=e}}else this.nRotmapTime0&&(this.aRotmap=[],this.nRotmapTime0=0)}};J.prototype.onRotmapPlayback=function(){if(3===this.iRotmapMode){var t=this.src,e=Math.round(1e3*t.currentTime),o=this.aRotmap[this.iRotmapItem];if(!(e<o[0])){var i=o.slice(1);this.iRotmapItem<this.aRotmap.length-1&&this.iRotmapItem++;this.setDragRotation(i)}}};J.prototype.getRotmap=function(){return 1===this.iRotmapMode&&this.aRotmap};J.prototype.seekInRotmap=function(t){if(2!==this.iRotmapMode)return!1;for(var e=this.aRotmap.length,o=0;o<e&&this.aRotmap[o][0]<t;o++)var i=this.aRotmap[o?o-1:0].slice(1);console.log("S360VideoRotationSync.seekInRotmap(): time=%d; n=%d; i=%d; rot=",t,e,o,JSON.stringify(i));this.setDragRotation(i)};J.prototype.initControls=function(){console.log("initControls():");this.initDragCtl()};J.prototype.initDragCtl=function(){function t(t){r&&t.preventDefault()}console.log("initDragCtl():");var e=this.target,o=0,i=0,r=!1;e.addEventListener("mousedown",function(t){1===t.which&&n(t,t)});e.addEventListener("mousemove",function(t){a(t,t)});window.document.body.addEventListener("mousemove",function(t){if(r&&t.target!==e){t.preventDefault();s()}});e.addEventListener("mouseup",function(t){if(r){console.log("mouseup:");s()}});e.addEventListener("mouseleave",s);e.addEventListener("touchstart",function(t){console.log("touchstart:");n(t,t.targetTouches.item(0))});e.addEventListener("touchmove",function(t){a(t,t.targetTouches.item(0))});this.touchMoveHandler=t.bind(this);window.addEventListener("touchmove",this.touchMoveHandler);e.addEventListener("touchend",function(t){console.log("touchend:");s()});var n=function(t,e){if(!r&&this.bReady){t.preventDefault();r=!0;o=e.pageX;i=e.pageY;console.log("dragStart(): pos=(%d,%d)",o,i)}}.bind(this),a=function(t,e){if(r&&this.bReady){t.preventDefault();var n=e.pageX,a=e.pageY,s=n-o,l=a-i;o=n;i=a;this.rotateAlong(.003*s,.003*l)}}.bind(this),s=function(){console.log("dragEnd():");r=!1}};J.prototype.initGyroCtl=function(){function t(t){if(this.idRAF){var o=Date.now()/1e3,i=o-e;e=o;this.rotateByGyro(t,i)}}if(window.DeviceMotionEvent){console.log("initGyroCtl():");var e=0;this.deviceMotionHandler=t.bind(this);window.addEventListener("devicemotion",this.deviceMotionHandler)}};J.prototype.initOrientation=function(){var t=K();Ya.quat.setAxisAngle(this.rotPreOrnt,Ya.vec3.fromValues(0,0,1),t*this.deg2rad);Ya.quat.identity(this.rotOrnt);console.log("S360Video.initOrientation(): angle=%d; rotPreOrnt=%s; rotOrnt=%s",t,Ya.quat.str(this.rotPreOrnt),Ya.quat.str(this.rotOrnt))};J.prototype.resetRotation=function(){Ya.quat.identity(this.rotDrag);Ya.quat.identity(this.rotGyro);Ya.quat.identity(this.rotOut);this.cX=this.cY=0;this.updateRotation();console.log("resetRotation(): rotDrag=%s; rotGyro=%s; rotPreOrnt=%s; rotOrnt=%s; rotOut=%s",Ya.quat.str(this.rotDrag),Ya.quat.str(this.rotGyro),Ya.quat.str(this.rotPreOrnt),Ya.quat.str(this.rotOrnt),Ya.quat.str(this.rotOut))};J.prototype.updateRotation=function(){this.updateOrientation();Ya.quat.copy(this.rotOut,this.rotDrag);Ya.quat.multiply(this.rotOut,this.rotOut,this.rotPreOrnt);Ya.quat.multiply(this.rotOut,this.rotOut,this.rotGyro);Ya.quat.multiply(this.rotOut,this.rotOut,this.rotOrnt);Ya.quat.normalize(this.rotOut,this.rotOut)};J.prototype.updateOrientation=function(){var t=K();if(t!==this.angleOrnt&&!this.disableRotation){this.angleOrnt=t;Ya.quat.setAxisAngle(this.rotOrnt,Ya.vec3.fromValues(0,0,1),-t*this.deg2rad);console.log("S360Video.updateOrientation(): angle=%d; rotOrnt=%s",t,Ya.quat.str(this.rotOrnt))}};J.prototype.setDragRotation=function(t){t&&4==t.length?this.rotDrag=Ya.quat.fromValues.apply(null,t):Ya.quat.identity(this.rotDrag);this.updateRotation()};J.prototype.rotateAlong=function(t,e){if(3!==this.iRotmapMode&&(t||e)){this.cX+=t;this.cY+=e;this.cY=Math.min(Math.max(this.cY,-Math.PI/2),Math.PI/2);this.rotDrag=Ya.quat.create();this.rotDrag=tt(this.cX,this.cY,0);Ya.quat.normalize(this.rotDrag,this.rotDrag);this.updateRotation()}};J.prototype.rotateByGyro=function(t,e){if(!(3===this.iRotmapMode||e>1||e<.01)&&t.rotationRate&&Z(t.rotationRate,["alpha","beta","gamma"])){var o=t.rotationRate,i=t.accelerationIncludingGravity,r=o.alpha,n=o.beta,a=o.gamma;if(Z(i,["x","y","z"])){var s=i.x,l=i.y,d=i.z;Math.abs(Ya.vec3.len(Ya.vec3.fromValues(s,l,d))-9.81)<.39&&Math.abs(d)<2.7&&(l>s?r=0:n=0)}var c=r>0?this.bAndroid?.02:1:this.bAndroid?.0191:1.0121,u=n>0?this.bAndroid?.02:1:this.bAndroid?.0191:1.0121,h=a>0?this.bAndroid?.02:1:this.bAndroid?.0195:1.0432,p=(this.bRotRateInDegs?this.deg2rad:1)*e;r=r*p*c;n=n*p*u;a=a*p*h;var f=$(r,n,a);Ya.quat.multiply(this.rotGyro,this.rotGyro,f);Ya.quat.normalize(this.rotGyro,this.rotGyro);this.updateRotation()}};J.prototype.destroy=function(){this.deviceMotionHandler&&window.removeEventListener("devicemotion",this.deviceMotionHandler);this.touchMoveHandler&&window.removeEventListener("touchmove",this.touchMoveHandler)};var Za=J,Ka={"Loading video...":"Загрузка видео...","Skip ad in {{x}} sec":"Пропустить можно через {{x}} сек","{{x}} sec":"{{x}} сек","Going after":"После рекламы","Learn more":"Подробнее",Advertisement:"Реклама","Watch video":"Смотреть видео","Watch video<br/>after ad":"Продолжение</br>после рекламы","Pull to skip<br/>{{x}}":"Тяните,<br/>чтобы пропустить<br/>{{x}}","Push to watch<br/>360 video":"Нажмите, чтобы смотреть<br/>360-градусное видео","The ad will end in {{x}} sec":"До окончания рекламы {{x}} сек"},$a={ru:Ka},ts=!1,es="en",os=function(t){for(var e=arguments.length,o=Array(e>1?e-1:0),i=1;i<e;i++)o[i-1]=arguments[i];ts||et();if("en"===es){if(String.raw)return String.raw(t,o);if(!$a[es]){var r=$a[es]={};Object.keys(Ka).forEach(function(t){r[t]=t})}}var n=t.join(""),a=$a[es],s="";Object.keys(a).forEach(function(t){if(!s&&t.replace(/{{x}}/g,"")===n){s=a[t];o&&o.forEach(function(t){s=s.replace(/{{x}}/g,t)})}});return s||String.raw(t,o)},is=o(31),rs=o.n(is),ns=ot(["Push to watch<br/>360 video"],["Push to watch<br/>360 video"]),as=ot(["Loading video..."],["Loading video..."]),ss="Module::VpaidVideo360",ls=function(t){function e(){var o=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};it(this,e);Ln.b.trace(ss+".constructor()");var i=rt(this,t.call(this,o)),r=o.duration,n=o.mpgmedia,a=o.mp4media,s=n||a||{},l=s.width,d=s.height;i.adDuration=r;i.adWidth=l;i.adHeight=d;i.adVolume=0;var c=i.planet=document.createElement("div");Object(qn.c)(c,{position:"absolute",zIndex:1,left:"50%",bottom:"50%",transform:"translate(-50%, 50%)",width:"160px",height:"160px",pointerEvents:"none",opacity:1,transition:"all 250ms ease-out"});c.innerHTML=rs.a;i.planetText=Object(qn.b)(c,"div",{position:"absolute",left:0,top:"42%",width:"100%",textAlign:"center",fontSize:"10px",lineHeight:1.1,color:"#555",opacity:1,transition:"all 150ms ease-out"},os(ns));var u=i.loadingText=document.createElement("div");Object(qn.c)(u,{position:"absolute",zIndex:2,top:"50%",left:"50%",transform:"translate(-50%, -50%)",padding:"5px 10px",lineHeight:"15px",color:"white",backgroundColor:"rgba(0, 0, 0, 0.289)",borderRadius:"3px",pointerEvents:"none",opacity:0,transition:"all 150ms ease-out"});u.innerHTML=os(as);return i}nt(e,t);e.prototype.setAdVolume=function(e,o){var i=this.videoSlot,r=this.adVolume;if(r!==e){Ln.b.trace(ss+".setAdVolume("+e+") this.adVolume="+r+" videoSlot="+i);if(i){i.volume=e;r>0&&0===e?i.muted=!0:0===r&&e>0&&(i.muted=!1);return t.prototype.setAdVolume.call(this,e,{invoker:this})}}0===r&&i&&!i.muted?i.muted=!0:r>0&&i&&i.muted&&(i.muted=!1);return null};e.prototype.initAd=function(e,o,i,r){var n=this,a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{},s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:{};t.prototype.initAd.call(this,e,o,i,r,a,s);if(this.video360Slot){this.trigger("AdLoaded");return Promise.resolve(this)}return new Promise(function(t){var i=n.options,r=i.mpgmedia,a=i.mp4media,l=i.mp3media;n.adDuration=i.duration;n.videoSlot=n.videoSlot||s.videoSlot;n.audioSlot=n.audioSlot||s.audioSlot;if(r){var d=n.canvas;if(!Object(qn.p)(d,"canvas")){d=n.canvas=document.createElement("canvas");n.Y(d,"click",dt.bind(n));Object(qn.c)(d,{width:e+"px",height:o+"px"});s.slot.appendChild(d);n.he(l&&l.src,a&&a.src);n.setAdVolume(n.getAdVolume(),{step:1,invoker:n})}var c=n.jsmpeg=new ja({canvas:d});n.Q(c,"timeupdate",lt.bind(n));n.Q(c,"onDecodeInitPackage",st.bind(n));n.Q(c,"ended",function(){var t=n.getAdExpanded();c.ended=!0;if(!t){n.collapseAd();n.trigger("AdVideoComplete")}});n.Q(c,"ended",function(t){n.trigger("AdError",Vn.a.GENERAL_VPAID_ERROR,String(t))});c.init(r&&r.src)}else{n.he(l&&l.src,a&&a.src);n.setAdVolume(n.getAdVolume(),{step:1,invoker:n})}n.Q(n,"AdVideoComplete",at.bind(n));s.slot.appendChild(n.planet);s.slot.appendChild(n.loadingText);n.trigger("AdLoaded");return t(n)})};e.prototype.resizeAd=function(e,o,i){var r=this.jsmpeg,n=this.video360Slot,a=this.canvas,s=this.environmentVars,l=this.options,d=l.mpgmedia,c=l.mp4media,u=d||c,h=u.scalable,p=u.maintainAspectRatio,f=s||{},g=f.forceAspectRatio,m=f.slot,v=this.getAdAspectRatio(),b=g||p,y=void 0,A=r||n,w=A.width,_=A.height;if(w&&v&&h&&s&&s.slot){var S=w>_,M=e>o,O=void 0;if(null===b){var I=w/_,E=e/o;b=100-100*(E<I?E/I:I/E)>10}!0===b&&(O=e/o<w/_);!1===b&&(O=e/o>w/_);S!==M&&(O=!0);M&&!S&&(O=!1);y=O?{width:e,height:e*v}:{height:o,width:o/v}}else y={width:w,height:_};a&&Object(Xn.d)(a,{width:e,height:o},m,y);return t.prototype.resizeAd.call(this,e,o,i)};e.prototype.startAd=function(){var e=this,o=this.jsmpeg,i=this.videoSlot,r=this.video360Slot;if(o){i&&r?i.play():o&&o.play();t.prototype.startAd.call(this)}else ct.call(this).then(function(o){var i=e.videoSlot;i&&o&&i.play();t.prototype.startAd.call(e)})};e.prototype.stopAd=function(){var e=this.jsmpeg,o=this.videoSlot,i=this.video360Slot;o&&i?o.pause():e&&e.pause();return t.prototype.stopAd.call(this)};e.prototype.pauseAd=function(){var e=this.jsmpeg,o=this.videoSlot,i=this.video360Slot;o&&i?o.pause():e&&e.pause();return t.prototype.pauseAd.call(this)};e.prototype.resumeAd=function(){var e=this.jsmpeg,o=this.videoSlot,i=this.video360Slot;o&&i?o.play():e&&e.play();return t.prototype.resumeAd.call(this)};e.prototype.skipAd=function(){this.stopAd();return t.prototype.skipAd.call(this)};e.prototype.getAdAspectRatio=function(){var t=this.adWidth,e=this.adHeight,o=this.jsmpeg,i=this.videoSlot,r=this.options,n=r.mpgmedia,a=r.m4media,s=o||n||i||a,l=s.width,d=s.height;return l&&d?d/l:t&&e?e/t:9/16};e.prototype.S=function(){Ln.b.trace(ss+".destroy()");t.prototype.S.call(this);var e=this.video360Slot,o=this.jsmpeg;e&&e.destroy();o&&(o.at={});this.jsmpeg=null};e.prototype.getAdRemainingTime=function(){var t=this.videoSlot;return t&&!isNaN(t.duration)?t.duration-t.currentTime:this.adRemainingTime};e.prototype.he=function(t,e){Ln.b.trace(ss+" Initializing secondary audio/video slot");var o=void 0;if(!e){this.pe();return null}o=this.videoSlot;if(!o){o=this.videoSlot=document.createElement("video");this.environmentVars.slot.appendChild(o)}o.crossOrigin="anonymous";o.playsInline=!0;o.muted=!1;o.volume=this.adVolume;Object(qn.c)(o,{display:"none"});this.Y(o,"timeupdate",lt.bind(this));this.Y(o,"ended",this.collapseAd.bind(this));this.Y(o,"error",this.pe.bind(this));return o};e.prototype.pe=function(t){Ln.b.warn(ss+" Failed to initialize secondary audio/video slot. error;"+t);this.videoSlot=null;this.trigger("AdAudioDisabled")};e.create=function(t,o){return new Promise(function(i,r){var n=t.MediaFiles,a=t.duration,s=t.rawDuration,l=n["video/mpeg"]&&n["video/mpeg"][0],d=n["video360/mp4"]&&n["video360/mp4"][0],c=n["audio/mp3"]&&n["audio/mp3"][0];if(d&&d.src&&!o.isMediaUrlBlocked(d.src)&&!(l&&l.src&&o.isMediaUrlBlocked(l.src))){Ln.b.trace(ss+".create("+d.src+")");o.setSelectedCreative(d.src,s);i(new e({module:o,mpgmedia:l,mp4media:d,mp3media:c,duration:a}))}r()})};return e}(Vn.b),ds=ls,cs=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var o=arguments[e];for(var i in o)Object.prototype.hasOwnProperty.call(o,i)&&(t[i]=o[i])}return t},us="::VpaidCreator",hs=[ds,Na,Ga,Kn,Ha],ps=Na,fs=function(){function t(e,o,i){var r=this,n=arguments.length>3&&void 0!==arguments[3]&&arguments[3];ut(this,t);this.be=!1;this.dataXml=e;this.module=i;this.logger=i&&i.getAPI&&i.getAPI().logger||Ln.b;this.logger.track(us+".vpaidCreate("+e+") onlyReservedVpaid="+n);var a=cs({},e,{adParameters:o});this.instance=n?ps.create(a,i,!0):hs.reduce(function(t,e){return t.catch(function(){var t=e.create(a,i);t&&e!==Na&&(r.be=!0);return t})},Promise.reject())}t.prototype.getVpaidPromise=function(){var t=this;return new Promise(function(e,o){var i=t.module.M("vnBrowserCache")||{},r=i.enabled;t.instance.then(function(t){return r&&t instanceof Kn&&o()||e(t)}).catch(function(){var t=new Error("There is no any vpaid");o(t)})})};t.prototype.canBackToReserveVpaid=function(){return this.be};return t}(),gs=["video/mp4","video/mpeg","audio/mp3","video360/mp4","application/x-shockwave-flash","application/javascript","external/javascript","image/png","image/jpg","image/gif","text/html"],ms=o(6),vs=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var o=arguments[e];for(var i in o)Object.prototype.hasOwnProperty.call(o,i)&&(t[i]=o[i])}return t},bs="Format[Vpaid]",ys=bs,As=function(t){function FormatBase(e,o){pt(this,FormatBase);var i=o&&o.ancestor&&o.ancestor+":"+bs||"Module::"+bs,r=o&&(o.logger||o.moduleAPI&&o.moduleAPI.logger)||Ln.b;r.trace(i+".constructor()");var n=ft(this,t.call(this,vs({},o,{ancestor:i})));n[ys]=i;n.options=o;n.module=e;n.logger=r;return n}gt(FormatBase,t);FormatBase.prototype.toString=function(){return"[object "+this.constructor.name+"]"};FormatBase.prototype.ye=function(t){this.logger.trace(this[ys]+".requestDataXml("+t+")");return Promise.resolve(t)};FormatBase.prototype.Ae=function(){this.logger.trace(this[ys]+".initDataXml()");return Promise.resolve()};FormatBase.prototype.we=function(){this.logger.trace(this[ys]+".vpaidInitAd()");return Promise.resolve()};FormatBase.prototype.getReachInventoryFactory=function(){return null};FormatBase.prototype.hasReachInventoryFactory=function(){return!1};FormatBase.prototype.S=function(){this.logger.trace(this[ys]+".destroy()");t.prototype.S.call(this)};FormatBase.prototype.abort=function(){};FormatBase.prototype.isFloatingMode=function(){return!1};FormatBase.prototype.getModuleOptions=function(){return{isInsideTextContent:!1,startingVolume:1}};return FormatBase}(ms.a),ws=As,InStream=function(t){function InStream(){mt(this,InStream);return vt(this,t.apply(this,arguments))}bt(InStream,t);return InStream}(ws),_s=InStream,Ss=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};At(this,t);this.API=e.API;this.showObservableNode=e.showObservableNode;this.isIframe=e.isIframe}t.prototype.updateModuleNodeSize=function(){throw Error("Not implemented")};t.prototype.moduleResizeAd=function(){throw Error("Not implemented")};t.prototype._e=function(t){var e=this.API,o=e.isAdHasBeenStarted,i=e.moduleAPI.getAdHeight;return!(!i||!i()||!t&&!o())};return t}(),Ms=Ss,Os=function(t){function e(o){var i;wt(this,e);var r=_t(this,t.call(this,o));r.parentElement=null;return i=r,_t(r,i)}St(e,t);e.prototype.updateModuleNodeSize=function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0],e=this.isIframe,o=this.API,i=o.getModuleNode,r=o.moduleAPI,n=r.getControlNode,a=r.trigger;if(!this._e(t))return null;var s=n&&n("iframe");s&&Object(qn.c)(s,{position:"absolute",left:0,top:0,width:"100%",height:"100%"});var l=void 0,d=void 0,c=i&&i(),u=this.parentElement=e?document.body:c&&c.parentElement;if(u){var h=Object(Xn.j)(u);l=h.insideWidth;d=h.insideHeight}if(u&&"BODY"===u.tagName){var p=Object(Xn.j)(u),f=p.top,g=p.bottom,m=p.left,v=p.right,b=p.borderTopWidth,y=p.borderRightWidth,A=p.borderBottomWidth,w=p.borderLeftWidth,_=u.clientHeight,S=u.clientWidth,M=_-f-g-b-A,O=S-m-v-w-y;Object(qn.c)(u,{height:Object(Xn.u)(M),width:Object(Xn.u)(O)})}var I=Object(Xn.j)(u),E=I.borderTopWidth,D=I.borderRightWidth,C=I.borderBottomWidth,x=I.borderLeftWidth;c&&Object(qn.c)(c,{width:Object(Xn.u)(l-x-D),height:Object(Xn.u)(d-E-C)});setTimeout(function(){return a("slotSizeChanged")},1);return{width:l,height:d}};e.prototype.moduleResizeAd=function(t,e){function o(t){k=t;F=Math.round(k*e)}function i(){F=j;k=Math.round(F/e)}var r=this.isIframe,n=this.API,a=n.getModuleNode,s=n.moduleAPI,l=s.getControlNode,d=s.resizeAd,c=s.setWrapperSize,u=s.getAdHeight,h=s.getAdWidth,p=l&&l("wrapper");if(!this.parentElement){var f=a&&a();this.parentElement=r?document.body:f&&f.parentElement}var g=this.parentElement,m=Object(Xn.j)(t),v=m.insideWidth,b=m.top,y=m.bottom,A=m.left,w=m.right,_=m.borderTopWidth,S=m.borderRightWidth,M=m.borderBottomWidth,O=m.borderLeftWidth,I=g.clientHeight-b-y-_-M,E=g.clientWidth-A-w-O-S,D=Object(Xn.j)(p),C=D.outsideHeight,x=D.insideHeight,T=D.outsideWidth,P=D.insideWidth,j=I-((C||0)-(x||0)),k=this.forceWidth||E||Math.round(v),R=this.forceHeight||Math.round(k*e),F=R;if(C>I||F>j){i();k>E&&o(E)}else if(T>E||k>E){o(E-(T-P));F>j&&i()}if(u&&(u()!==F||h()!==k)){d&&d(k,F);(j!==F||e>1&&k<E)&&c(e>1&&E||k,j);if(g&&"BODY"===g.tagName){var N=Object(Xn.j)(g),V=N.top,L=N.bottom,z=N.left,W=N.right,H=N.borderTopWidth,U=N.borderRightWidth,B=N.borderBottomWidth,q=N.borderLeftWidth,X=g.clientHeight,G=g.clientWidth,Y=X-V-L-H-B,J=G-z-W-q-U,Q=Object(Xn.j)(p),Z=Q.outsideHeight,K=Q.outsideWidth;p&&Y&&Object(qn.c)(p,{top:Object(Xn.u)(Y/2-Z/2),left:Object(Xn.u)(J/2-K/2)})}}};return e}(Ms),Is=Os,Es=function(t){function e(o){var i;Mt(this,e);var r=Ot(this,t.call(this,o));return i=r,Ot(r,i)}It(e,t);e.prototype.updateModuleNodeSize=function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0],e=this.API,o=e.getModuleNode,i=e.moduleAPI,r=i.getIndents,n=i.trigger;if(!this._e(t))return null;var a=o&&o(),s=Object(Xn.j)(a),l=s.clientWidth,d=s.clientHeight,c=r&&r(),u=c.outsideWidth,h=c.outsideHeight;Object(qn.c)(a,{width:Object(Xn.u)(u),height:Object(Xn.u)(h)});d===h&&l===u||setTimeout(function(){return n("slotSizeChanged")},1);return{width:u,height:h}};e.prototype.moduleResizeAd=function(t,e){var o=this.API.moduleAPI.resizeAd,i=Object(Xn.j)(t),r=i.insideWidth,n=i.left,a=i.right,s=document.documentElement.clientWidth-n-a,l=Math.min(s,this.forceWidth||Math.round(r)),d=this.forceHeight||Math.round(l*e);o&&o(l,d)};return e}(Ms),Ds=Es,Cs=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var o=arguments[e];for(var i in o)Object.prototype.hasOwnProperty.call(o,i)&&(t[i]=o[i])}return t},xs="Format[ContentRoll]",Ts=xs,Ps=25,js={expandOnAdLoaded:!1,playerDefaultClass:"vn-player",playerPlaybackClass:"vn-playback",playerSelectorPercent:"100%",widthElement:null,playerElement:null,playerSelectorTotalMin:1,playerDesktopStartFactor:.6,playerDesktopStopFactor:.6,playerMobileStartFactor:.5,playerMobileStopFactor:.2,expandingDuration:50,waitScroll:!0,maxSegments:1,minSegments:0,minDistance:1,destroyTimeout:5e3,shouldStartWhenLoaded:!0,doNotWatchVisibility:!1,moduleAPI:{},showObservableNode:!1,forceEnableVerticalContent:!1,ignoreCreatePlayerElement:!1},ks=0,Rs=0,Fs=function(t){function e(o){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};Et(this,e);var r=i&&i.ancestor&&i.ancestor+":"+xs||"::"+xs,n=i&&i.moduleAPI&&i.moduleAPI.logger||Ln.b;n.trace(r+".constructor()");var a=Dt(this,t.call(this,o,Cs({},js,{logger:n},{ancestor:r})));a[Ts]=r;a.ht=!1;a.mt=!1;a.Se=null;a.watchVisibility=null;a.wasExpanded=!1;a.Me=null;a.Oe=null;a.updateOptions(i);a.Ie();a.Ee();var s=a.options.moduleAPI||{},l=s.setControlData,d=s.addVPAIDEventListener;l&&l("slot",{node:a.moduleInnerNode});a.updateControlsLayout();!0===i.withoutBottomBorder&&l&&l("bottomBorder",{node:null,enableWithVPAID:"true"});var c=a.options,u=c.playerDesktopStartFactor,h=c.playerDesktopStopFactor,p=c.playerMobileStartFactor,f=c.playerMobileStopFactor;a.St=parseFloat(Gn.f?p:u);a.Mt=parseFloat(Gn.f?f:h);if(d){d("slotSizeChanged",kt.bind(a),a);d("AdPaused",function(){a.Me&&setTimeout(function(){if(a.Me){a.logger.trace(a[Ts]+" @AdPaused calling _adPausedPostponeCommand="+a.Me);a.Me();a.Me=null}},1)},a);d("AdDestroyed",Nt.bind(a),a)}return a}Ct(e,t);e.prototype.ut=function(){var t=this.options,e=t.expandOnAdLoaded,o=t.forcedExpandOnAdLoadedValue;return"boolean"==typeof o?o:e};e.prototype.updateOptions=function(t){var e=this.ht,o=this.mt,i=this.options.doNotWatchVisibility,r=this.ut();this.options=Cs({},this.options,t);"false"===this.options.shouldStartWhenLoaded&&(this.options.shouldStartWhenLoaded=!1);var n=this.ut();if(!i&&e&&!o)if(r||!0!==n){if(!0===r&&!n&&!this.De){this.Ce();this.gt()}}else{this.yt();this.pt()}};e.prototype.updateControlsLayout=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ps,e=arguments.length>1&&void 0!==arguments[1]&&arguments[1],o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;this.logger.trace(this[Ts]+" updateControlsLayout");var i=o||this.options.moduleAPI||{},r=i.setControlData,n=i.getControlNode,a=xt(t);Object.keys(a).forEach(function(t){var o=a[t];r&&r(t,{css:o});if(e){var i=n&&n(t);i&&Object(qn.c)(i,o)}})};e.prototype.getModuleOptions=function(){return{isInsideTextContent:!0,vpaidJsVideoSlotShouldBeMuted:!0}};e.prototype.ye=function(t){var e=document,o=e.body,i=e.documentElement,r=Math.max(o.scrollTop,i.scrollTop),n=document.documentElement.clientHeight,a=document.body.clientHeight,s=[],l=this.options,d=l.preloadDistance,c=l.waitScroll;c=n<a&&(!0===c||"false"!==c);this.logger.trace(this[Ts]+".requestDataXml("+t+") waitScroll="+c+" scrollTop="+r+" preloadDistance="+d);c&&0===r&&s.push(this.xe());(void 0===d&&!c||c&&0!==r)&&(d=this.options.preloadDistance=1/0);void 0!==d&&s.push(this.Te());return Promise.race(s).then(function(e){s.forEach(function(t){t.name!==e&&t.reject()});return t})};e.prototype.we=function(){this.logger.trace(this[Ts]+".vpaidInitAd()");var e=this.options.moduleAPI||{},o=e.addVPAIDEventListener,i=e.extendEnvironmentVars,r=e.getControlNode,n=e.getControlInstance;i&&i({forceAspectRatio:!Gn.f});o("AdLoaded",jt.bind(this),this);o("AdStarted",Rt.bind(this),this);o("AdVideoStart",Ft.bind(this),this);o("AdSizeChange",this.Pe.bind(this),this);var a=r("title"),s=r("logo","node");if(!(a&&"hidden"!==a.style.visibility&&"none"!==a.style.display||s&&"hidden"!==s.style.visibility&&"none"!==s.style.display)){var l=n("wrapper");l&&l.hideTopSpace()}return t.prototype.we.call(this)};e.prototype.Ie=function(){this.logger.trace(this[Ts]+".initNoAdElement()");var t=this.options.noAdElement;if(document.querySelector(t)){var e=new Error("Disabled by noAdElement ("+t+")");e.fatal=!0;throw e}};e.prototype.getAnchorElement=function(){return this.anckorElement};e.prototype.Ee=function(){var t=this;this.logger.trace(this[Ts]+".initDOM()");var e=this.options,o=this.options,i=o.moduleAPI,r=o.showObservableNode,n=o.moduleAPI,a=n.getOptions,s=n.getControlNode,l=a(),d=l.initScriptParentNode,c=e.lookupElement,u=e.scrollElement,h=e.widthElement,p=e.minSegments,f=e.maxSegments,g=e.minDistance,m=e.slotBackground,v=window,b=v.innerHeight,y=this.lookupNode=Object(qn.i)(c)||document.body,A=y.offsetHeight/(b*g);if(A<p)throw new Error(this[Ts]+" lookupNode height/segments factor ("+A.toFixed(2)+"vh) is not enough, minimum "+parseFloat(p).toFixed(2)+"vh required");if(!f)throw new Error(this[Ts]+" maxSegments is 0");var w=yt(Cs({},e,{lookupNode:y,initScriptParentNode:d}),""+this),_=w.moduleNode,S=w.moduleInnerNode,M=w.elementNode,O=w.beforeNode,I=w.afterNode,E=w.widthNode,D=w.boundariesExists,C=w.insideIframe;this.anckorElement=M||O||I;this.insideIframe=C;this.boundariesExists=D;if(!this.Se){var x={isIframe:C,showObservableNode:r,API:{moduleAPI:i,isAdHasBeenStarted:function(){return t.mt},getModuleNode:function(){return t.moduleNode}}};this.Se=D?new Is(x):new Ds(x)}Object(qn.c)(_,{position:"relative",zIndex:0,backgroundColor:m,margin:"auto"});this.moduleNode=this.U(_);this.moduleInnerNode=this.U(S);this.widthNode=Object(qn.i)(h)||E||_.parentNode;this.scrollNode=Object(qn.i)(u)||window;if(y&&y!==document.body){"static"===getComputedStyle(y).position&&(y.style.position="relative")}var T=y||document.body;this.observerForParent=new MutationObserver(function(){var e=T.clientHeight;if(void 0===t.prevParentHeight||e!==t.prevParentHeight){t.logger.trace(xs+".MutationObserver() for lookup document.body.parentHeight="+e+" prevDocumentHeight="+t.prevParentHeight);t.je(!1);if(r){clearTimeout(t.Oe);t.Oe=setTimeout(zt.bind(t,t.bt||s("container")||_),1)}}t.prevParentHeight=e});this.observerForParent.observe(T,{childList:!0,attributes:!0,characterData:!0,subtree:!0});if(!_.clientWidth){this.logger.warn(this[Ts]+"._initDOM() looks like module has been inserted inside invisible block.");Vt.call(this)}};e.prototype.xe=function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this;this.logger.trace(this[Ts]+".requestDataXmlByScroll()");var o=function(){},i=function(){},r=this.scrollNode,n=function o(){t.logger.trace(t[Ts]+" Watching for scroll is started");e.J(r,"scroll",o);i("byScroll")},a=new Promise(function(a,s){t.logger.trace(t[Ts]+" Waiting for scroll");o=s;i=a;e.Y(r,"scroll",n)});a.catch(function(){t.logger.trace(t[Ts]+" Waiting for scroll was rejected");e.J(r,"scroll",n)});return Object(Xn.h)(a,{name:"byScroll",reject:o})};e.prototype.Te=function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.options.preloadDistance,o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this;this.logger.trace(this[Ts]+".waitForMinimumDistance()");var i=function(){},r=function(){},n="byPreloadDistance",a=this.scrollNode,s=function r(){var s=t.fe(),l=s.viewportHeight,d=s.moduleTop,c=d-l;t.logger.none("_waitForMinimumDistance distance="+c+" moduleTop="+d+" viewportHeight="+l+" preloadDistance="+e);if(c<=e){t.logger.trace(t[Ts]+" Minimum distance "+e+"px reached");o.J(a,"scroll",r);i(n)}},l=new Promise(function(n,l){t.logger.trace(t[Ts]+" Waiting for minimum distance "+e+"px");r=l;i=n;o.Y(a,"scroll",s);s()});l.catch(function(){t.logger.trace(t[Ts]+" Waiting for minimum distance was rejected");o.J(a,"scroll",s)});return Object(Xn.h)(l,{name:n,reject:r})};e.prototype.hasReachInventoryFactory=function(){return!0};e.prototype.getReachInventoryFactory=function(){var t=this.scrollNode,e=this.moduleNode;return this.options.doNotWatchVisibility?null:this.ke(t,e)};e.prototype.ke=function(t,e){var o=this.options,i=o.showObservableNode,r=o.doNotWatchVisibility,n=o.moduleAPI.getMainModuleId,a=n&&n();this.logger.trace(this[Ts]+"._createReachInventoryFactory() moduleNode="+e+" doNotWatchVisibility="+r,2,"brown");if(r)return null;var s=("vn-visible-inventory-mark_"+this+"_"+ks+++" vn-module__"+a).replace(/\s+/g,"-").replace(/(\[|])/g,"_"),l=document.createElement("div");l.className=s;!0===i&&Object(qn.c)(e,{outlineWidth:"1px",outlineColor:"#4080ff",outlineStyle:"solid"});e.parentElement.insertBefore(l,e);var d=null;return{id:s,waiterCreator:function(){return new Promise(function(e){d=Object(Xn.H)(l,{threshold:[0,1e-4,.1,.999,1],registerHandle:function(e){t&&t.addEventListener("scroll",e);return{handler:e,event:"scroll",scrollNode:t}}},function(t){if(t.intersectionRatio>0){d&&d.disconnect&&d.disconnect();d=null;e()}})})},destroy:function(){d&&d.disconnect&&d.disconnect();Object(qn.u)(l)},markNode:l,moduleNode:e}};e.prototype.fe=function(){var t=this.scrollNode,e=this.moduleNode;return Object(Xn.l)(t,e)};e.prototype.Re=function(){return this.widthNode};e.prototype.ft=function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];this.logger.trace(this[Ts]+".updateModuleNodeSize()");var e=this.Se.updateModuleNodeSize(t);this.Fe();return e};e.prototype.dt=function(){this.logger.trace(this[Ts]+"._updateModuleSize()");var t=this.boundariesExists,e=this.moduleNode,o=this.options,i=o.forceEnableVerticalContent,r=o.moduleAPI,n=r.getAdAspectRatio,a=r.getControlNode,s=this.Re();if(s){var l=n&&n(),d=void 0;t&&(d=s.clientHeight/s.clientWidth);!Gn.f&&l>1&&!i&&!d&&(l=9/16);this.Ne(s,l);var c=this.De;if(this.options.showObservableNode&&!c){this.logger.none("._updateModuleSize() showGrid");clearTimeout(this.Oe);this.Oe=setTimeout(zt.bind(this,a("container")||e),1)}}else this.logger.warn(this[Ts]+"._updateModuleSize() Invalid widthNode ("+s+")")};e.prototype.Ne=function(t,e){return this.Se.moduleResizeAd(t,e)};e.prototype.ct=function(){this.At().then(this.Ve.bind(this))};e.prototype.Ve=function(t){var e=this,o=t.intersectionRatio,i=t.moduleSquare;this.logger.none(this[Ts]+"._checkModuleState() moduleSquare="+i+" intersectionRatio="+o,1);var r=this.options.doNotWatchVisibility,n=this.ut();!i&&o&&(o=0);var a=this.options.moduleAPI,s=a.addVPAIDEventListener,l=a.removeVPAIDEventListener;this.Le({intersectionRatio:o,moduleSquare:i})&&!r&&!n&&s("AdVideoStart",function(){e.yt();e.logger.trace(e[Ts]+"._checkModuleState() @AdVideoStart _switchOffObservableAdvancedNode() & _switchOnObservableCheckingToModuleNode()",1);var t=s("slotSizeChanged",function(){return i("slotSizeChanged")},e),o=setTimeout(function(){return i("timeout")},50),i=function(i){l("slotSizeChanged",t,e);clearTimeout(o);e.logger.trace(e[Ts]+"._checkModuleState() @AdVideoStart call _switchOnObservableCheckingToModuleNode() reason is "+i);e.pt()}})};e.prototype.Le=function(t){var e=t.intersectionRatio,o=t.moduleSquare;this.logger.none(this[Ts]+"._applyModuleState() intersectionRatio="+e+" moduleSquare="+o,1);var i=this.ze({intersectionRatio:e,moduleSquare:o});this.We({intersectionRatio:e,moduleSquare:o});return i};e.prototype.ze=function(t){var e=this,o=t.intersectionRatio,i=this.St,r=this.options,n=r.shouldStartWhenLoaded,a=r.moduleAPI,s=a.addVPAIDEventListener,l=a.removeVPAIDEventListener,d=a.startAd,c=a.inState,u=this.ut(),h=[c("loaded"),c("starting")],p=h[0],f=h[1],g=!1;this.logger.none(this[Ts]+"._applyModuleStateCheckStartAd() intersectionRatio="+o+" _startFactor="+i+" shouldStartWhenLoaded="+n+" starting="+f,1);if(u&&!this.wasExpanded&&p&&n){this.wasExpanded=!0;this.ft(!0);var m=s("AdVideoStart",function(){l("AdVideoStart",m);setTimeout(function(){e.ct()},1)});d&&d();g=!0}if((p&&n||f)&&o>=i){d&&d();g=!0}return g};e.prototype.We=function(t){var e=t.intersectionRatio,o=this.St,i=this.Mt,r=this.options.moduleAPI,n=r.resumeAd,a=r.pauseAd,s=r.inState;this.logger.log(this[Ts]+"._applyModuleStateCheckPausedAndPlaying inState('paused')="+s("paused")+" intersectionRatio="+e+" inState('playing')="+s("playing"));var l=[s("paused"),s("pausing"),s("playing")],d=l[0],c=l[1],u=l[2];if(e>=o)if(d){this.Me=null;n&&n()}else c&&(this.Me=function(){return n()});if(u&&e<i){this.Me=null;a&&a()}};e.prototype.hide=function(){this.vt()};e.prototype.vt=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=this.options.moduleAPI||{},o=e.addVPAIDEventListener;this.logger.trace(this[Ts]+"._closeModule()");if(!this._t){this._t=!0;this.et();o&&o("AdDestroyed",Nt.bind(this),this);var i=this.moduleNode,r=this.observerForParent;r&&r.disconnect&&r.disconnect();setTimeout(Wt.bind(this),1);var n=Ht.call(this);Object(qn.c)(i,{height:0});!0!==t.noCompensation&&n&&Ut.call(this,n)}};e.prototype.He=function(){var t=this.St,e=this.Mt,o=[];(t||0===t)&&o.push(t);!e&&0!==e||t===e||o.push(e);if(o.length){0!==t&&0!==e&&o.push(0);1!==t&&1!==e&&o.push(1)}return o.sort()};e.prototype.S=function(){this.logger.trace(this[Ts]+"._destroy()");var e=this.watchVisibility,o=this.wt,i=this.De,r=this.Ue;e&&e.disconnect&&e.disconnect();this.watchVisibility=null;o&&o.disconnect&&o.disconnect();this.wt=null;i&&i.disconnect&&i.disconnect();this.De=this;r&&r.disconnect&&r.disconnect();this.Ue=null;var n=Ht.call(this);t.prototype.S.call(this);n&&Ut.call(this,n);this.logger.log(this[Ts]+"._destroy() Destroyed")};e.prototype.abort=function(){this.logger.trace(this[Ts]+".abort()");this.options.destroyTimeout=0;this.vt({noCompensation:!0})};e.prototype.gt=function(){var t=this.options,e=t.showObservableNode,o=t.doNotWatchVisibility,i=t.moduleAPI.getMainModuleId;if(!this.bt&&!o){this.logger.trace(this[Ts]+"._switchOnObservableAdvancedNode()");var r=this.Be(),n=r.node,a=r.watcher;this.bt=this.U(n);this.bt.className=("vn-start-mark_"+this+"_"+Rs+++" vn-module__"+(i&&i())).replace(/\s+/g,"-").replace(/(\[|])/g,"_");this.De=a;if(e){clearTimeout(this.Oe);this.Oe=setTimeout(zt.bind(this,n),1)}}};e.prototype.Be=function(){var t=this.scrollNode,e=this.options.showObservableNode;this.logger.trace(this[Ts]+"._createObservableAdvancedNode()");var o=Object(qn.e)("div",{top:-9999,left:-9999,height:0,width:0,position:"absolute",zIndex:"-1",opacity:0});!0===e&&Object(qn.c)(o,{outlineWidth:"1px",outlineColor:"red",outlineStyle:"solid",opacity:1,zIndex:1});this.je(!1,o);window.document.body.appendChild(o);var i=Object(Xn.H)(o,{threshold:this.He(),registerHandle:function(e){t&&t.addEventListener("scroll",e);return{handler:e,event:"scroll",scrollNode:t}}},this.Ve.bind(this));if(e){clearTimeout(this.Oe);this.Oe=setTimeout(zt.bind(this,o),1)}return{watcher:i,node:o}};e.prototype.je=function(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,o=this.bt,i=this.moduleNode,r=this.options,n=r.showObservableNode,a=r.moduleAPI,s=a.getIndents,l=a.getVideoContainerIndents;e||(e=o);if(!Object(qn.p)(e))return null;var d=i.getBoundingClientRect(),c=void 0,u=void 0,h=0,p=l&&l()||{},f=void 0;if(p.rect&&p.clientHeight){f=p.rect;u=p.clientHeight;c=p.clientWidth}else{var g=s&&s()||{};f=g.rect;h=g.top||0;u=g.outsideHeight;c=g.outsideWidth}if(!u){var m=Lt.call(this),v=m.width,b=m.height;!u&&(u=b);!c&&(c=v)}var y="relative"===getComputedStyle(window.document.body).position,A=y?Object(Xn.j)(window.document.body):{marginLeft:0,marginTop:0,borderTopWidth:0,borderLeftWidth:0},w=A.marginLeft,_=A.marginTop,S=A.borderTopWidth,M=A.borderLeftWidth,O=window.document.documentElement.getBoundingClientRect(),I={top:Object(Xn.u)(d.top+f.top-O.top-_-S+h),left:Object(Xn.u)(d.left+f.left-O.left-w-M),height:Object(Xn.u)(u),width:Object(Xn.u)(c),pointerEvents:"none"};this.logger.trace(xs+"._updateObservableAdvancedNodePosition() ("+JSON.stringify(I,null,"\t")+")");Object(qn.c)(e,I);if(t&&n){clearTimeout(this.Oe);this.Oe=setTimeout(zt.bind(this,e),1)}return e};e.prototype.At=function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,o=this.De,i=this.bt,r=this.moduleNode,n=[];o&&i&&n.push(Object(Xn.q)(i));r&&n.push(Object(Xn.q)(r));return Promise.all(n).then(function(o){t.logger.none(t[Ts]+"._getModuleVisibility() promises.length="+n.length+" counter="+e+" values.length="+o.length+" [0].intersectionRatio="+o[0].intersectionRatio+" [0].moduleSquare="+o[0].moduleSquare+" [1].intersectionRatio="+(o.length>1&&o[1].intersectionRatio)+" [1].moduleSquare="+(o.length>1&&o[1].moduleSquare),1,"brown");if(o.length<2){t.logger.none(t[Ts]+"._getModuleVisibility() values.length="+o.length+" RETURN "+o[0],1,"brown");return o[0]}var i=o.filter(function(t){return t.intersectionRatio});t.logger.none(t[Ts]+"._getModuleVisibility() positiveRatios.length="+i.length,1,"brown");if(e<3&&!o[0].intersectionRatio&&o[1].intersectionRatio&&!o[1].moduleSquare){t.logger.none(t[Ts]+"._getModuleVisibility() RECURSION",1,"brown");return t.At(e+1)}var r=i.length?i[0]:o[0];t.logger.none(t[Ts]+"._getModuleVisibility() RETURN "+r,1,"brown");return r})};e.prototype.Pe=function(){this.logger.trace(this[Ts]+" @AdSizeChange",2);this.ft()};e.prototype.Fe=function(){this.logger.trace(this[Ts]+".resetObservableNodes())");if(this.bt){this.yt();this.gt()}else if(this.watchVisibility){this.Ce();this.pt()}};e.prototype.yt=function(){this.logger.trace(this[Ts]+".switchOffObservableAdvancedNode()");this.De&&this.De.disconnect&&this.De.disconnect();if(this.bt){this.bt.remove();this.bt=null}this.De=null};e.prototype.pt=function(){var t=this.scrollNode,e=this.moduleNode,o=this.options,i=o.showObservableNode,r=o.doNotWatchVisibility,n=o.moduleAPI.getControlNode;this.logger.trace(this[Ts]+"._switchOnObservableCheckingToModuleNode()");if(!this.watchVisibility&&!r){var a=n("videoContainer"),s=a&&a.clientHeight&&a||n("container")||e;if(!0===i){Object(qn.c)(s,{outlineWidth:"1px",outlineColor:"green",outlineStyle:"solid"});this.logger.none("._switchOnObservableCheckingToModuleNode() showGrid")}this.watchVisibility=Object(Xn.H)(s,{threshold:this.He(),registerHandle:function(e){t&&t.addEventListener("scroll",e);return{handler:e,event:"scroll",scrollNode:t}}},this.Ve.bind(this));if(i){clearTimeout(this.Oe);this.Oe=setTimeout(zt.bind(this,s),1)}}};e.prototype.Ce=function(){var t=this.watchVisibility,e=this.moduleNode,o=this.options.showObservableNode;if(t){!0===o&&Object(qn.c)(e,{outlineWidth:"0",outlineColor:"none",outlineStyle:"none"});t&&t.disconnect&&t.disconnect();this.watchVisibility=null}};e.prototype.getModuleNode=function(){return this.moduleNode};return e}(ws),Ns=Fs,Vs=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var o=arguments[e];for(var i in o)Object.prototype.hasOwnProperty.call(o,i)&&(t[i]=o[i])}return t},Ls="Format[ContinuousRoll]",zs=Ls,Ws={maxSegments:-1,playerSelectorPercent:"0%",expandOnAdLoaded:!0},Hs=0,Us=0,Bs=function(t){function e(o,i){Xt(this,e);var r=i&&i.ancestor&&i.ancestor+":"+Ls||"Module::"+Ls;(i&&i.moduleAPI&&i.moduleAPI.logger||Ln.b).trace(r+".constructor()");var n=Gt(this,t.call(this,o,Vs({},Ws,{MODULE_ID:Ls},i,{ancestor:r})));n[zs]=r;n.slotPlaceholders=[];1!==n.options.maxSegments&&n.qe();return n}Yt(e,t);e.prototype.we=function(){this.logger.trace(this[zs]+".vpaidInitAd()");var e=this.options.moduleAPI||{},o=e.addVPAIDEventListener,i=t.prototype.we.call(this);o("AdLoaded",Zt.bind(this),this);o("AdStarted",Qt.bind(this),this);o("AdVideoComplete",Jt.bind(this),this);return i};e.prototype.getReachInventoryFactory=function(){var t=this,e=this.scrollNode;if(this.options.doNotWatchVisibility)return null;var o=this.slotPlaceholders.map(function(o){return t.ke(e,o)});return{id:"vn-visible-inventory-marks-group_"+this+"_"+Hs++,waiterCreator:function(){return Promise.race(o.map(function(t){return t.waiterCreator()}))},destroy:function(){return o.forEach(function(t){t.destroy&&t.destroy()})},markNode:""}};e.prototype.It=function(){this.logger.none(this[zs]+".updateModulePosition()");var t=this.Xe();if(this.Ge!==t){this.Ge=t;this.trigger("NearestSlotPlaceholderChanged")}t&&this.Ye(t)};e.prototype.Ye=function(t){var e=this.moduleNode,o=Object(qn.q)(t,e),i=o.top,r=o.left;Object(qn.c)(e,{position:"absolute",top:Object(Xn.u)(i+2),left:Object(Xn.u)(r),visibility:""});var n=Object(Xn.j)(e),a=n.outsideHeight;Object(qn.c)(t,{height:Object(Xn.u)(a)})};e.prototype.Xe=function(){var t=window,e=t.innerHeight,o=e/2;return this.slotPlaceholders.reduce(function(t,e){var i=e.getBoundingClientRect(),r=i.top,n=i.height,a=r+n/2,s=Math.abs(a-o);return n>0&&s<t.distance?{distance:s,slotPlaceholder:e}:t},{distance:1/0,slotPlaceholder:null}).slotPlaceholder};e.prototype.At=function(){var t=this.Xe();return Object(Xn.q)(t)};e.prototype.qe=function(){var t,e=this,o=this.options,i=o.showObservableNode,r=o.playerAfter,n=o.playerElement,a=o.minDistance,s=o.maxSegments,l=o.lookupNode,d=window,c=d.scrollY,u=d.innerHeight,h=l||document.body,p=Object(qn.p)(n)?[n]:Array.from(Object(qn.j)(n,h)),f=s<0?1/0:s;(t=this.slotPlaceholders).push.apply(t,p.slice(0,f));f-=this.slotPlaceholders.length;if(f&&r){var g=this.slotPlaceholders[this.slotPlaceholders.length-1],m=u*a,v=g?g.getBoundingClientRect().top+c+m:u;Array.from(Object(qn.j)(r,h)).some(function(t){if(t.getBoundingClientRect().top+c>v){var o=document.createElement("div");f-=1;t.parentNode.insertBefore(e.U(o),t.nextSibling);e.slotPlaceholders.push(o);v+=m}return!f})}var b=te.call(this),y=b.visible,A=(y&&y.length&&y[0]).previousElementSibling,w=A&&A.getBoundingClientRect().top;Object(qn.c)(this.slotPlaceholders,{boxSizing:"border-box",paddingTop:Object(Xn.u)(2),paddingBottom:Object(Xn.u)(2),backgroundColor:"transparent"});A&&window.scrollBy(0,A.getBoundingClientRect().top-w);i&&Object(qn.c)(this.slotPlaceholders,{outlineWidth:"1px",outlineColor:"pink",outlineStyle:"solid"});this.slotPlaceholders.forEach(function(t){return t.className="vn-placeholder"})};e.prototype.vt=function(){this.logger.trace(this[zs]+"._closeModule()");t.prototype.vt.call(this);var e={height:0,paddingTop:0,paddingBottom:0},o=te.call(this),i=o.above,r=o.below,n=o.visible;setTimeout(function(){Object(qn.c)([].concat(r,n),e);if(n&&n.length){var t=(n&&n.length&&n[0]).previousElementSibling,o=t&&t.getBoundingClientRect().top;Object(qn.c)(i,e);o&&window.scrollBy(0,t.getBoundingClientRect().top-o)}},1)};e.prototype.Ot=function(){this.logger.trace(this[zs]+"._closeRestOfSlotPlaceholders()");var t=window,e=t.innerHeight;this.slotPlaceholders.forEach(function(t){var o=t.getBoundingClientRect();e-o.top<0&&Object(qn.c)(t,{height:0,paddingTop:0,paddingBottom:0})})};e.prototype.ft=function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],o=t.prototype.ft.call(this,e),i=o||{},r=i.width,n=i.height;if(r&&n){var a={width:Object(Xn.u)(r),height:Object(Xn.u)(n+2+2)},s=te.call(this),l=s.above,d=s.below,c=s.visible;Object(qn.c)([].concat(d,c),a);var u=l.map(function(t){return Object(Xn.j)(t).outsideHeight}).reduce(function(t,e){return t+e},0);Object(qn.c)(l,a);var h=l.map(function(t){return Object(Xn.j)(t).outsideHeight}).reduce(function(t,e){return t+e},0),p=h-u;window.scrollBy(0,p)}return o};e.prototype.gt=function(){var t=this,e=this.slotPlaceholders,o=this.options.doNotWatchVisibility;if(!this.bt&&!o){var i=this.bt={items:[],remove:function(){return i.items.forEach(function(t){return Object(qn.u)(t)})}},r=this.De={items:[],disconnect:function(){return r.items.forEach(function(t){t.disconnect&&t.disconnect()})}};e&&e.forEach(function(e){var o=t.Be(e),n=o.node,a=o.watcher;n.style.top=Object(Xn.u)(parseFloat(getComputedStyle(n).top)+2);var s=t.U(n);n.className=("vn-start-mark_"+t+"_"+Us++).replace(/\s+/g,"-").replace(/(\[|])/g,"_");i.items.push(s);r.items.push(a)})}};e.prototype.getModuleVisibility=function(){return this.De&&this.bt?Promise.race(this.bt.items.map(function(t){return Object(Xn.q)(t)})):Object(Xn.q)(this.moduleNode)};return e}(Ns),qs=Bs,Xs=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var o=arguments[e];for(var i in o)Object.prototype.hasOwnProperty.call(o,i)&&(t[i]=o[i])}return t},Gs="Format[FlyRoll]",Ys=Gs,Js={playerEmbeddedClass:"vn-embedded",playerFloatingClass:"vn-floating",zIndex:1,playerDesktopFactor:.5,playerMobileFactor:.5,playerDesktopStartFactor:.5,playerDesktopStopFactor:.5,playerMobileStartFactor:.5,playerMobileStopFactor:.5,floatingWidth:"200px",floatingBottom:"2%",floatingRight:"3%"},Qs={Je:0,Qe:1},Zs=!1,Ks=0,$s=function(t){function e(o){var i,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};ee(this,e);var n=r&&r.ancestor&&r.ancestor+":"+Gs||"::"+Gs;if(Zs)throw Error(n+".Format instance already active on the page");var a=r&&r.moduleAPI&&r.moduleAPI.logger||Ln.b,s=r.canFlyModeStart;r.canFlyModeStart=!0===s||"true"===s||"1"===s;a.trace(n+".constructor()");var l=oe(this,t.call(this,o,Xs({},Js,r,{ancestor:n})));l[Ys]=n;l.Ze();l.Ke();var d=l.options,c=d.floatingElement,u=d.floatingWidth,h=d.floatingTop,p=d.floatingRight,f=d.floatingBottom,g=d.floatingLeft,m=d.floatingTranslateX,v=void 0===m?0:m,b=d.floatingTranslateY,y=void 0===b?0:b;l.$e=Qs.Je;var A={position:"fixed",zIndex:2147483646,backgroundColor:"white",boxShadow:"0 0 10px black",width:Object(Xn.u)(u),top:Object(Xn.u)(h),right:Object(Xn.u)(p),bottom:Object(Xn.u)(f),left:Object(Xn.u)(g),transitionProperty:"none",transitionDuration:0,opacity:1,height:"200px",transform:"translate("+Object(Xn.u)(v)+", "+Object(Xn.u)(y)+")"},w=l.options.zIndex,_={zIndex:w,backgroundColor:"",top:0,left:0,transform:"translate(0, 0)",minWidth:"auto",maxWidth:"auto",transitionProperty:"none",transitionDuration:0,boxShadow:"none",opacity:1};l.Et=(i={},i[Qs.Je]=l.to(_),i[Qs.Qe]=l.eo(A),i);var S=Object(qn.i)(c);l.oo=parseFloat(u)||null;l.io="%"===(""+u).trim().substr(-1)&&parseFloat(u)||null;if(l.Dt=S||l.Dt){l.Y(window,"resize",function(){l.ro()});l.ro()}var M=l.options,O=M.playerDesktopFactor,I=M.playerMobileFactor;l.no=Gn.f?I:O;l.ro();return l}ie(e,t);e.prototype.to=function(t){return t||{}};e.prototype.eo=function(t){return t||{}};e.prototype.Ke=function(){};e.prototype.isFloatingMode=function(){return this.$e===Qs.Qe};e.prototype.Ee=function(){function e(){return this.U(Object(qn.b)(document.body,"div",{position:"fixed",zIndex:-1,top:0,bottom:0,left:0,right:0}))}t.prototype.Ee.call(this);var o=this.moduleNode,i=this.insideIframe,r=this.options,n=r.floatingElement,a=r.showObservableNode;if(i)throw Error(this[Ys]+"._initDOM(). Unable create flyRoll inside iframe");this.Dt=n&&Object(qn.i)(n)||e.call(this);!0===a&&Object(qn.c)(this.Dt,{outlineWidth:"1px",outlineColor:"magenta",outlineStyle:"solid"});Object(qn.c)(o,{zIndex:null});this.ro()};e.prototype.we=function(){var e=this;this.logger.trace(this[Ys]+".vpaidInitAd()");var o=t.prototype.we.call(this),i=this.options,r=i.canFlyModeStart,n=i.moduleAPI,a=n.inState,s=n.resumeAd,l=n.startAd,d=n.addVPAIDEventListener;d&&d("AdLoaded",function(){e.ao();if(!e.isFloatingMode()){e.dt();e.ft()}},this);r&&d("AdLoaded",function(){function t(){this.Z(this,"applyModuleStateCheckPausedAndPlaying",o);if(this.isFloatingMode()){this.so(Qs.Qe);a(["paused","pausing"])?s():a("playing")||l()}}e.logger.log(e[Ys]+" @AdLoaded canFlyModeStart!");e.$e=Qs.Qe;var o=e.Q(e,"applyModuleStateCheckPausedAndPlaying",t.bind(e))},this);d&&d("AdStopped",function(){e.isFloatingMode()&&e.so(Qs.Je)},this);return o};e.prototype.ft=function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(!this.isFloatingMode()){var o=this.lo,i=this.options.canFlyModeStart,r=t.prototype.ft.call(this,e||i&&o)||{},n=r.height;n&&this.ro(n)}};e.prototype.We=function(t){var e=t.intersectionRatio,o=t.moduleSquare,i=this.no,r=this.lo,n=this._t,a=this.options.moduleAPI,s=a.inState,l=a.resumeAd,d=a.pauseAd,c=a.canFlyModeStart;if(!n){var u=this.isFloatingMode();u||(this.maxEmbeddedIntersectionRatio=Math.max(e,this.lastEmbeddedIntersectionRatio||0));var h=s&&!s("loaded")||c,p=s&&s(["paused","pausing"]),f=s&&s("playing"),g=s&&s("afterplay");this.logger.none(this[Ys]+"._applyModuleStateCheckPausedAndPlaying() intersectionRatio="+e+" _floatingModeWasExists="+r+" floating="+u+" _playerFactor="+i+" playing="+f+" paused="+p+" started="+h+" this._adHasBeenStarted="+this.mt+" maxEmbeddedIntersectionRatio="+this.maxEmbeddedIntersectionRatio);p&&(u||e>=i)&&l&&l();!u&&f&&this.maxEmbeddedIntersectionRatio<i&&!r&&d&&d();h&&u&&e>=i&&this.so(Qs.Je);h&&!u&&!g&&o&&e<i&&!c&&(this.maxEmbeddedIntersectionRatio>=i||r)&&this.so(Qs.Qe);u||(this.lastEmbeddedIntersectionRatio=e);this.trigger("applyModuleStateCheckPausedAndPlaying")}};e.prototype.Ne=function(e,o){var i=this.$e;this.ao();if(i===Qs.Qe){var r=this.oo,n=this.io,a=this.options.moduleAPI.resizeAd,s=window.getComputedStyle(e),l=!n&&r||Math.round(e.clientWidth-parseFloat(s.paddingLeft)-parseFloat(s.paddingRight));if(n){this.logger.track(this[Ys]+" _moduleResizeAd() floatingWidth="+l*n/100+" moduleWidth="+l+"  _strictFloatingWidth="+r+" _floatingWidthInPercents="+n);l*=n/100}var d=Math.min(window.innerWidth,l),c=Math.min(window.innerHeight,Math.round(d*o));this.logger.log(this[Ys]+" _moduleResizeAd() width="+d+" height="+c);var u=re.call(this,d,c,e,o);d=u.width;c=u.height;this.logger.log(this[Ys]+" _moduleResizeAd() after correction width="+d+" height="+c,1);a&&a(d,c)}else t.prototype.Ne.call(this,e,o)};e.prototype.do=function(){return{top:0,left:0}};e.prototype.ro=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,e=this.$e,o=this.options.moduleAPI.getIndents,i=this.moduleInnerNode,r=o(),n=r.outsideWidth,a=t||r.outsideHeight,s=this.do(),l=s.top,d=s.left;if(i&&null!=e){Object(qn.c)(i,this.Et[e]);if(this.$e===Qs.Je){i&&Object(qn.c)(i,{top:Object(Xn.u)(l),left:Object(Xn.u)(d),visibility:""});this.logger.trace(this[Ys]+"._updateSlotSizeAndPosition() height="+a+" width="+n+" top="+l+" left="+d,2);void 0!==a&&i&&Object(qn.c)(i,{height:Object(Xn.u)(a)});void 0!==n&&i&&Object(qn.c)(i,{width:Object(Xn.u)(n)})}else{var c=ne.call(this)||{};Object(qn.c)(i,c)}}};e.prototype.ao=function(){var t=this.$e,e=this.options,o=e.playerEmbeddedClass,i=e.playerFloatingClass,r=e.moduleAPI.getControlNode,n=r&&r("slot");if(n)if(t===Qs.Qe){n.classList.remove(o);n.classList.add(i)}else{n.classList.remove(i);n.classList.add(o)}};e.prototype.Re=function(){var t=this.$e,e=this.Dt,o=this.widthNode,i=this.options.moduleAPI.getControlNode;return(t===Qs.Qe?e:o)||i&&i("slot")};e.prototype.so=function(t){this.logger.trace(this[Ys]+"._setMode("+t+")",2);if(!this._t){this.$e=t;var e=t===Qs.Qe;this.dt();this.ft();this.ro();e&&(this.lo=!0);this.ao();this.trigger("vnFormatStateChanged",{src:Gs,isFloating:e})}};e.prototype.S=function(){this.logger.log(this[Ys]+"._destroy()");this.co();t.prototype.S.call(this);this.logger.log(this[Ys]+"._destroy() Destroyed")};e.prototype.co=function(){if(Zs===this){this.logger.log(this[Ys]+"._destroy() RESET _instanceIsExist",2);Zs=!1}};e.prototype.Ze=function(){if(!Zs){this.logger.log(this[Ys]+".constructor SET _instanceIsExist",2);Zs=this}};e.prototype.ke=function(e,o){var i=this.options,r=i.canFlyModeStart,n=i.moduleAPI.getMainModuleId;this.logger.trace(this[Ys]+"._createReachInventoryFactory() canFlyModeStart="+r,2,"magenta");var a=n&&n();if(!r)return t.prototype.ke.call(this,e,o);var s=function(){return Promise.resolve()};return{id:("vn-visible-inventory-mark_"+this+"_"+Ks+++" vn-module__"+a).replace(/\s+/g,"-").replace(/(\[|])/g,"_"),waiterCreator:s,moduleNode:o}};e.prototype.He=function(){var t=this.no,e=[];if(t||0===t){e.push(t);t>.01&&e.push(t-.01);1-t>.01&&e.push(t+.01)}if(e.length){0!==t&&e.push(0);1!==t&&e.push(1)}return e.sort()};e.prototype.vt=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},o=this.$e,i=this.options.moduleAPI.getControlNode;this.co();if(o===Qs.Qe){var r=i&&i("slot");Object(qn.c)(r,{display:"none"})}t.prototype.vt.call(this,e)};e.prototype.Fe=function(){this.logger.trace(this[Ys]+".resetObservableNodes())");this.yt();this.gt();window.IntersectionObserver||this.ct()};e.prototype.Ce=function(){this.yt()};e.prototype.pt=function(){this.gt()};return e}(Ns),tl=$s,el=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var o=arguments[e];for(var i in o)Object.prototype.hasOwnProperty.call(o,i)&&(t[i]=o[i])}return t},ol="Format[FlyRollTop]",il=ol,rl={embeddedPosition:"absolute",zIndex:2147483646},nl=function(t){function e(o,i){se(this,e);var r=i&&i.ancestor&&i.ancestor+":"+ol||"::"+ol,n=le(this,t.call(this,o,el({},rl,i,{ancestor:r})));n[il]=r;return n}de(e,t);e.prototype.eo=function(t){return el({},t,{right:0,bottom:0})};e.prototype.to=function(t){return el({},t,{position:"absolute",height:0,overflow:"hidden"})};e.prototype.Ke=function(){this.moduleInnerNode=Object(Xn.n)(window).document.body.appendChild(this.moduleInnerNode.parentElement.removeChild(this.moduleInnerNode))};e.prototype.do=function(){var t=this.moduleNode;return Object(qn.s)(t)};return e}(tl),al=nl,sl=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var o=arguments[e];for(var i in o)Object.prototype.hasOwnProperty.call(o,i)&&(t[i]=o[i])}return t},ll="Format[FlyRollAlwaysFly]",dl=ll,cl={embeddedPosition:"absolute",zIndex:2147483646,ignoreCreatePlayerElement:!0,canFlyModeStart:!0},ul=function(t){function e(o,i){ce(this,e);var r=i&&i.ancestor&&i.ancestor+":"+ll||"::"+ll,n=ue(this,t.call(this,o,sl({},cl,i,{ancestor:r})));n[dl]=r;return n}he(e,t);e.prototype.do=function(){return{top:0,left:0}};e.prototype.so=function(e){if(e===Qs.Qe){this.yt();t.prototype.so.call(this,e)}};return e}(al),hl=ul,pl=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var o=arguments[e];for(var i in o)Object.prototype.hasOwnProperty.call(o,i)&&(t[i]=o[i])}return t},fl="Format[FlyRollRegular]",gl=fl,ml={zIndex:1,embeddedPosition:"relative"},vl=function(t){function e(o,i){pe(this,e);var r=i&&i.ancestor&&i.ancestor+":"+fl||"::"+fl,n=fe(this,t.call(this,o,pl({},ml,i,{ancestor:r})));n[gl]=r;return n}ge(e,t);e.prototype.to=function(t){return pl({},t,{position:"relative"})};e.prototype.do=function(){return{top:0,left:0}};return e}(tl),bl=vl,yl=function t(e,o){me(this,t);var i=o||{},r=i.alwaysFly,n=i.flyrollAbsTop;return!0===n||"true"===n?new al(e,o):!0===r||"true"===r?new hl(e,o):new bl(e,o)},Al=yl,wl=o(32),_l=o.n(wl),Sl=o(33),Ml=o.n(Sl),Ol="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Il=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var o=arguments[e];for(var i in o)Object.prototype.hasOwnProperty.call(o,i)&&(t[i]=o[i])}return t},El=function(t,e){t.raw=e;return t}(["Pull to skip<br/>",""],["Pull to skip<br/>",""]),Dl="Module::Format[SlideRoll]",Cl={playerElement:null,playerAfter:null,playerBefore:null,playerFactor:.5,closeFactor:.3,transitionDuration:0},xl={videoContainer:{boxShadow:"0 0 20px 5px rgba(0, 0, 0, 0.5)"},title:{top:"10px",left:"10px",padding:"5px 10px",lineHeight:"15px",color:"white",backgroundColor:"rgba(0, 0, 0, 0.289)",borderRadius:"3px",cursor:"default",pointerEvents:"none"},logo:{top:"5px",right:"5px",bottom:"auto",left:"auto"},play:null,skipAd:null,skipAdCountdown:{display:"none",position:"absolute",top:"auto",right:"auto",bottom:"5px",left:"50%",width:"160px",margin:"0 auto 5px auto",padding:"5px",borderRadius:"3px",backgroundColor:"rgba(0, 0, 0, 0.7)",transform:"translateX(-50%)",textAlign:"center"},subtitle:{bottom:"25%"}},Tl=void 0,Pl=void 0,jl=void 0,kl=void 0,Rl=function(t){function e(o,i){ve(this,e);Ln.b.trace(Dl+".constructor()");if(!Gn.f)throw new Error("Mobile not detected");var r=be(this,t.call(this,o,Il({},Cl,i,{ancestor:Dl})));r.waitingForInitialScroll=!0;r.onResize=we.bind(r);r.onScroll=_e.bind(r);r.onTouchEnd=Ce.bind(r);r.onTouchStart=De.bind(r);r.Tt=Ae.bind(r);return r}ye(e,t);e.prototype.Ae=function(){var t=this;return new Promise(function(e){Ln.b.trace(Dl+".initDataXml()");var o=t.module,i=t.options,r=window,n=r.innerWidth,a=yt(i,""+t),s=a.moduleNode,l=a.moduleInnerNode;t.moduleNode=t.U(s);t.moduleInnerNode=t.U(l);var d=t.slot=t.uo();Object(qn.c)(s,{position:"relative"});Object(qn.c)(l,{clip:"rect(0,0,0,0)"});var c=s.getBoundingClientRect(),u=c.left,h=c.right;Object(qn.c)(s,{marginLeft:"-"+u+"px",marginRight:"-"+(n-h)+"px"});Object.keys(xl).forEach(function(t){o.Qt(t,{css:xl[t]})});o.Qt("logo",{content:_l.a});o.Qt("slot",{node:d});t.Q(o,"AdLoaded",Se.bind(t));t.Q(o,"AdResumed",Oe.bind(t));t.Q(o,"AdVideoStart",Me.bind(t));t.Q(o,"AdSkippableStateChange",Ie.bind(t));t.Q(o,"AdStopped",Ee.bind(t));t.Q(o,"AdDestroyed",function(){return t.S()});e()})};e.prototype.S=function(){Ln.b.trace(Dl+".destroy()");t.prototype.S.call(this);var e=this.Ct(),o=e.moduleTop;window.scrollTo(window.scrollX,o);Object.assign(this,{onScroll:null,onResize:null,onTouchEnd:null,onTouchStart:null,module:null,moduleNode:null,moduleInnerNode:null,slot:null,Tt:null})};e.prototype.xt=function(){var t=this.module,e=t.O("wrapper"),o=Object(qn.b)(e,"div",{display:"none",position:"absolute",zIndex:5,top:"auto",right:"auto",bottom:"10px",left:"50%",width:"160px",margin:"0 auto",padding:"5px",borderRadius:"3px",backgroundColor:"rgba(0, 0, 0, 0.7)",transform:"translateX(-50%)",textAlign:"center",lineHeight:1,pointerEvents:"none"},os(El,Ml.a)),i=function(){var e=t.getAdSkippableState();Object(qn.c)(o,{display:e?"":"none"})};i();this.Q(t,"AdSkippableStateChange",i);t.Qt("slideToSkipAd",{node:o})};e.prototype.uo=function(){var t=this.moduleInnerNode;return Object(qn.b)(t,"div",{position:"fixed",zIndex:2147483647,left:0,bottom:0,backgroundColor:"#000",transform:"translate3d(0,0,0)"})};e.prototype.ct=function(){var t=this.module,e=this.options,o=e.playerFactor,i=e.closeFactor,r=this.Ct(),n=r.visiblePercent,a=r.moduleTop;if(!jl&&!Pl&&this.waitingForInitialScroll&&n>i){this.Tt(a);this.waitingForInitialScroll=!1}t.Ut("loaded")&&n>o&&t.startAd();t.Ut(["paused","pausing"])&&n>o&&t.resumeAd();t.Ut("playing")&&n<o&&t.pauseAd();if(t.Ut("playing")){t.getAdSkippableState()||window.scrollTo(window.scrollX,a)}};e.prototype.It=function(){var t=this.module,e=this.options.closeFactor,o=this.Ct(),i=o.visiblePercent,r=o.moduleTop,n=o.viewportTop;!Pl&&t.Ut("playing")&&i>1-e&&this.Tt(r);0===i&&r<n&&t.skipAd()};e.prototype.dt=function(){var t=this.module,e=this.moduleNode,o=this.moduleInnerNode,i=this.slot,r=window,n=r.innerWidth,a=r.innerHeight;Ln.b.trace(Dl+" updateModuleSize("+n+":"+a+")");Object(qn.c)(o,{clip:"rect(0,"+n+"px,"+a+"px,0)"});Object(qn.c)([e,i],{width:n+"px",height:a+"px"});t.resizeAd(n,a)};e.prototype.Ct=function(){var t=this.moduleNode,e=window,o=e.scrollY,i=e.innerWidth,r=e.innerHeight,n=i,a=r,s=o,l=o+r,d=t.getBoundingClientRect(),c=d.top,u=a,h=s+c,p=h+a,f=Math.max(s,h),g=Math.min(l,h+a),m=Math.max(0,Math.min(a,g-f));return{viewportWidth:n,viewportHeight:a,viewportTop:s,viewportBottom:l,moduleHeight:u,moduleTop:h,moduleBottom:p,visibleTop:f,visibleBottom:g,visibleHeight:m,visiblePercent:a&&m/a}};return e}(ws),Fl=Rl,Nl=function(){Tl&&Tl();Tl=null},Vl=o(34),Ll=o.n(Vl),zl=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var o=arguments[e];for(var i in o)Object.prototype.hasOwnProperty.call(o,i)&&(t[i]=o[i])}return t},Wl=xe(["Watch video<br/>after ad"],["Watch video<br/>after ad"]),Hl=xe(["Going after"],["Going after"]),Ul=xe(["Watch video"],["Watch video"]),Bl="Format[CollapsingThumbnail]",ql=Bl,Xl=500,Gl={left:"5%",top:"67%",width:"25%",boxShadow:"0 0 10px rgba(0, 0, 0, 0.5)",transitionDuration:350,countdownBackgroundColor:"#d3d3d3",countdownBackgroundHoverColor:"#aaa",countdownColor:"black",countdownHoverColor:"#eee",thumbnailBackgroundColor:"#f2f2f2"},Yl={wrapper:{paddingTop:0,paddingBottom:0},logo:{},skipAd:{top:0,right:0,padding:"5px",margin:"0 5px 5px 0"},skipAdCountdown:qn.l,title:{top:0,right:"40px",left:"auto",margin:"5px 0",padding:"5px",color:"white",background:"rgba(0, 0, 0, 0.27)"},vnAfterplay:{marginTop:0},play:{marginTop:0}},Jl=function(t){function e(o,i,r){Te(this,e);var n=i&&i.ancestor&&i.ancestor+":"+Bl||"Module::"+Bl,a=Pe(this,t.call(this,zl({},i,{ancestor:n})));a[ql]=n;a.module=o;a.Pt=r;a.options=zl({},Gl,i);a.TIMER_NAME=a.MODULE_ID+":RemainingTimeChange";a.adWidthPrev=null;a.mainTransitionWasStarted=!1;a.mainTransitionWasFinished=!1;return a}je(e,t);e.prototype.init=function(){var t=this,e=this.module;Le.call(this).then(function(){t.logger.trace(t[ql]+".init() we have got thumbnail")});ke.call(this);this.Q(e,"AdStarted",Be.bind(this,e));this.Q(e,"AdVideoStart",this.update.bind(this,!0,!0,!0,!1));this.Q(e,"AdVideoComplete",qe.bind(this));this.Q(e,"AdError",Ue.bind(this))};e.prototype.update=function(){function t(){function t(){this.mainTransitionWasFinished?clearInterval(e):this.updateAfterTransitionEndWithBind({propertyName:"height",manualCheck:!0})}var e=setInterval(t.bind(this),500)}var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],o=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],i=this,r=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],n=!(arguments.length>3&&void 0!==arguments[3])||arguments[3];this.logger.none(this[ql]+".update()",2,"blue");var a=this.module,s=We.call(this),l=s.blockWidth,d=s.blockHeight,c=Ge.call(a),u=c.time,h=c.duration,p=c.adDuration,f=u<=0&&h<=p;this.logger.trace(this[ql]+".update() this.mainTransitionWasStarted="+this.mainTransitionWasStarted+" this.adWidthPrev === blockWidth="+(this.adWidthPrev===l)+" forcedUpdate="+e);if(!this.mainTransitionWasStarted&&(this.adWidthPrev!==l||e)){this.mainTransitionWasStarted=!0;r&&Ve.call(this,d).then(function(t){i.logger.none(i[ql]+".update() gotThumbnail="+t+" overlay="+o+" blockWidth="+l+" blockHeight="+d);o&&Ne.call(i,l,d);n&&ze.call(i,f)});this.adWidthPrev=l;t.call(this)}};e.prototype.setZIndex=function(t){this.jt&&(this.jt.style.zIndex=t)};return e}(ms.a),Ql=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var o=arguments[e];for(var i in o)Object.prototype.hasOwnProperty.call(o,i)&&(t[i]=o[i])}return t},Zl="Module::Format[ViqeoPlayerRoll]",Kl={playerPlaybackClass:"vn-playback-viqeo-roll",destroyTimeout:5e3,playerDesktopStartFactor:.5,playerDesktopStopFactor:0,playerMobileStartFactor:.5,playerMobileStopFactor:0},$l={},td=function(t){function e(o,i){Je(this,e);i=Ql({},Kl,i,{ancestor:Zl});var r=Qe(this,t.call(this,o,i));r.slot=o.O("slot");if(!r.slot)throw Error(Zl+" player don't give the slot");Object(qn.c)(r.slot,{display:"block",opacity:0});r.ho();var n=r.options,a=n.playerDesktopStartFactor,s=n.playerDesktopStopFactor,l=n.playerMobileStartFactor,d=n.playerMobileStopFactor;r.St=parseFloat(Gn.f?l:a);r.Mt=parseFloat(Gn.f?d:s);r.vqPlayer=o.environmentVars.vqPlayer;r.scrollNode=Object(qn.i)(i.scrollElement)||window;r.collapsingThumbnail=new Jl(o,i,function(){return r.vqPlayer});return r}Ze(e,t);e.prototype.isFloatingMode=function(){var t=this.vqPlayer;return!(!t||!t.inMode("flying"))};e.prototype.ho=function(){var t=this,e=this.module,o=this.slot;e.po(Ql({},Yl,$l));this.Q(e,"AdLoaded",function(){var e=t.options.moduleAPI||{},o=e.isVpaidJs;o&&o()&&(t.collapsingThumbnail.options.transitionDuration=0);t.collapsingThumbnail.init()});this.Q(e,"AdVideoStart",function(){Object(qn.c)(t.slot,{opacity:1});Object(qn.c)(o,{zIndex:1e4,position:"relative"})})};e.prototype.setZIndex=function(t){var e=this.collapsingThumbnail;this.logger.trace(Zl+".setZIndex("+t+")");e&&e.setZIndex(t)};e.prototype.ct=function(){this.logger.none(Zl+".updateModuleState()");var t=this.module,e=this.St,o=this.Mt;Object(Xn.q)(this.slot).then(function(i){var r=i.intersectionRatio;t.Ut(["paused","pausing"])&&r>=e&&t.resumeAd();t.Ut("playing")&&r<o&&t.pauseAd()})};e.prototype.we=function(){this.logger.trace(Zl+".vpaidInitAd()");var e=this.module,o=this.scrollNode;Object(Xn.h)(e.environmentVars,{forceAspectRatio:!Gn.f});this.Q(e,"AdLoaded",$e.bind(this));this.Q(e,"AdStarted",io.bind(this));this.Q(e,"AdVideoStart",oo.bind(this));this.Q(e,"AdStopped",ro.bind(this));this.Q(e,"AdDestroyed",no.bind(this));this.Q(e,"AdSizeChange",to.bind(this));this.Y(o,"scroll",Ke.bind(this));return t.prototype.we.call(this)};e.prototype.getModuleOptions=function(){return{isInsideTextContent:!1,disableHoverAudio:!0,startingVolume:0,vpaidJsVideoSlotShouldBeMuted:!0}};e.prototype.hasReachInventoryFactory=function(){return!0};e.prototype.getReachInventoryFactory=function(){var t=this;this.logger.trace(Zl+".getReachInventoryFactory()");var e="vn-visible-inventory-mark_"+this;return{markNode:"",waiterCreator:function(){return t.fo()},destroy:null,id:e}};e.prototype.fo=function(){var t=this;this.logger.trace(Zl+".waitForAdvStart");return new Promise(function(e){so.call(t,e,"advStart")})};e.prototype.fe=function(){var t=this.vqPlayer,e=t.getModuleDimensions(),o=e.viewportHeight,i=e.viewportTop,r=e.viewportBottom,n=e.moduleTop;return{viewportHeight:o,viewportWidth:t.getSize().width,viewportTop:i,viewportBottom:r,moduleTop:n}};return e}(ws),ed=td,od=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var o=arguments[e];for(var i in o)Object.prototype.hasOwnProperty.call(o,i)&&(t[i]=o[i])}return t},id="Format[AmpRoll]",rd=id,nd={playerDefaultClass:"vn-player",playerPlaybackClass:"vn-playback",playerSelectorPercent:"100%",widthElement:null,playerElement:"#c",lookupElement:"#c",playerSelectorTotalMin:1,playerDesktopStartFactor:.6,playerDesktopStopFactor:.6,playerMobileStartFactor:.5,playerMobileStopFactor:.2,preloadDistance:190,maxSegments:1,minSegments:0,minDistance:1,destroyTimeout:5e3,doNotWatchVisibility:!0},ad=function(t){function e(o,i){lo(this,e);var r=i&&i.ancestor&&i.ancestor+":"+id||"Module::"+id;Ln.b.trace(r+".constructor()");var n=co(this,t.call(this,o,od({},nd,i,{ancestor:r})));n[rd]=r;n.lastPostponedAction=null;n.adLoaded=!1;n.intersectionRatio=0;n.unlistenObserveIntersection=null;window.context.observeIntersection&&(n.unlistenObserveIntersection=window.context.observeIntersection(n.go.bind(n)));var a=new Xn.a;n.visibleInventoryPromise=a.promise;n.visibleInventoryResolve=a.resolve;(0,n.options.moduleAPI.setControlData)("wrapper",{css:{position:"absolute"}});return n}uo(e,t);e.prototype.ye=function(t){Ln.b.trace(this[rd]+".requestDataXml("+t+")");return Promise.resolve(t)};e.prototype.we=function(){Ln.b.trace(this[rd]+".vpaidInitAd()");var e=this.module;this.Q(e,"AdLoaded",ho.bind(this));this.Q(e,"AdStarted",po.bind(this));var o=t.prototype.we.call(this);Object(Xn.h)(e.environmentVars,{forceAspectRatio:!1});return o};e.prototype.abort=function(){if(window.context.noContentAvailable){Ln.b.trace(this[rd]+".abort() invoke window.context.noContentAvailable()");window.context.noContentAvailable()}};e.prototype.S=function(){this.unlistenObserveIntersection&&this.unlistenObserveIntersection();t.prototype.S.call(this)};e.prototype.go=function(t){var e=this;t.forEach(function(t){var o=t.intersectionRatio;o>0&&e.visibleInventoryResolve();if(e.intersectionRatio!==o){e.intersectionRatio=o;e.adLoaded?e.ct():e.lastPostponedAction=e.ct.bind(e)}})};e.prototype.hasReachInventoryFactory=function(){return!0};e.prototype.getReachInventoryFactory=function(){var t=this;Ln.b.trace(this[rd]+".getReachInventoryFactory()");return{id:"vn-visible-inventory-mark_"+this,waiterCreator:function(){return t.visibleInventoryPromise},destroy:null,markNode:""}};e.prototype.Ne=function(t,e){var o=this.options.moduleAPI,i=o.resizeAd,r=o.getIndents,n=r&&r()||{},a=n.top,s=n.bottom,l=window.getComputedStyle(t),d=Math.min(window.innerWidth,Math.round(t.clientWidth-parseFloat(l.paddingLeft)-parseFloat(l.paddingRight))),c=Math.min(window.innerHeight-a-s,Math.round(d*e));i&&i(d,c)};e.prototype.canExecuteNoAd=function(){return!0};e.prototype.mo=function(){return this.intersectionRatio};e.prototype.ct=function(){this.Le({intersectionRatio:this.intersectionRatio,moduleSquare:1})};e.prototype.ft=function(){var t=this.moduleNode,e=this.options.moduleAPI,o=e.getControlNode,i=e.getIndents,r=t&&t.parentElement||{},n=r.clientWidth,a=r.clientHeight;Object(qn.c)(t,{width:Object(Xn.u)(n),height:Object(Xn.u)(a)});var s=o&&o("iframe");Object(qn.c)(s,{position:"absolute",left:0,top:0,width:"100%",height:"100%"});var l=i&&i()||{},d=l.outsideHeight,c=o&&o("wrapper"),u=c&&c.parentElement;if(u){var h=Object(Xn.j)(u),p=h.height;p=Math.min(a,p);Ln.b.trace(this[rd]+".updateModuleNodeSize("+n+":"+a+") parentHeight="+p+" outsideHeight="+d);c&&p&&Object(qn.c)(c,{top:Object(Xn.u)(p/2-d/2)})}};e.prototype.getModuleOptions=function(){return{isInsideTextContent:!0,canRunNoAd:!0}};return e}(Ns),sd=ad,ld=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var o=arguments[e];for(var i in o)Object.prototype.hasOwnProperty.call(o,i)&&(t[i]=o[i])}return t},dd="Module::Format[Overlay]",cd={},ud=function(t){function e(o,i){fo(this,e);Ln.b.trace(dd+".constructor()");if(!Gn.f)throw new Error("Mobile not detected");if(!pd)throw new Error("Fixed positioning support not detected");var r=go(this,t.call(this,o,ld({},cd,{options:i,ancestor:dd}))),n=window,a=n.innerWidth,s=n.innerHeight,l=r.overlayNode=r.U(Object(qn.b)(document.body,"div",{visibility:"hidden",position:"fixed",zIndex:-1,top:0,left:0,width:a+"px",height:s+"px",background:"rgba(0, 0, 0, .9)"}));r.Y(l,"touchmove",qn.d);o.Qt("underplay",{node:Object(qn.b)(l,"div",{position:"absolute",top:0,right:0,bottom:0,left:0,width:"100%",height:"100%"})});var d=r.slotNode=Object(qn.b)(l,"div",{position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",width:a+"px",height:"0px"});window.savedRequestAnimationFrame=null;r.savedRequestAnimationFrameCallbacks=[];o.Qt("slot",{node:d});r.Q(o,"AdLoaded",bo.bind(r));r.Q(o,"AdVideoStart",yo.bind(r));r.Q(o,"AdDestroyed",Ao.bind(r));r.Y(window,"resize",vo.bind(r));return r}mo(e,t);e.prototype.Bt=function(){var t=this.module,e=this.overlayNode,o=this.slotNode,i=this.isFullscreen,r=window,n=r.innerWidth,a=r.innerHeight,s=t.getAdAspectRatio(),l=n,d=i?a:Math.min(n*s,a);Ln.b.trace(dd+".resize("+l+"("+n+"):"+d+"("+a+")/"+s+")");Object(qn.c)(e,{width:n+"px",height:a+"px"});Object(qn.c)(o,{width:l+"px",height:d+"px"});t.resizeAd(l,d,i)};e.prototype.hide=function(){Ln.b.trace(dd+".hide()");var t=this.overlayNode;t&&Object(qn.c)(t,{height:0,opacity:0})};e.prototype.qt=function(){Ln.b.trace(dd+".close()");var t=this.slotNode,e=this.overlayNode;Object(qn.c)(t,{transition:"all 300ms ease-out"});setTimeout(function(){Object(qn.c)(t,{height:0,opacity:.5})},50);setTimeout(function(){Object(qn.u)(e)},500)};e.prototype.getModuleOptions=function(){return{isInsideTextContent:!0,vpaidJsVideoSlotShouldBeMuted:!0}};e.prototype.fullscreenSwitchOn=function(){this.isFullscreen=!0};e.prototype.getModuleNode=function(){return this.overlayNode};return e}(ws),hd=ud,pd=function(){var t=!1;if(document.createElement){var e=document.createElement("div");if(e&&e.style){e.style.position="fixed";e.style.top="10px";var o=document.body;if(o&&o.appendChild&&o.removeChild){o.appendChild(e);t=10===e.offsetTop;o.removeChild(e)}}}return t}(),fd={vpaid:_s,instream:_s,contentroll:Ns,continuousroll:qs,flyroll:Al,slideroll:Fl,overlay:hd,viqeoplayerroll:ed,amproll:sd},gd=function(t,e,o){var i=t&&t.getAPI&&t.getAPI().logger||Ln.b;if("string"==typeof e){var r=e.toLowerCase(),n=t.options,a=n&&n.amp;if(a){if("contentroll"!==r.toLowerCase()){i.warn("::Formats Failed to create format ("+e+") because only the ContentRoll format is available for amp");return null}r="amproll"}var s=fd[r];if(s){i.log("::Formats.getFormat("+e+" -> "+r+")");var l=t.format;if(l){i.log("::Formats Destroying existing format");l.S()}i.log("::Formats Initializing format ("+e+" -> "+r+")");var d=t.options[r],c=t.getAPI(),u=Object(Xn.h)({},a?{}:o,d,{moduleAPI:c});a&&(u.amp=!0);return new s(t,u)}i.warn("::Formats Format not defined ("+r+")")}i.warn("::Formats Invalid format name ("+e+")");return null},md=gd,vd=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var o=arguments[e];for(var i in o)Object.prototype.hasOwnProperty.call(o,i)&&(t[i]=o[i])}return t},bd=function(){function t(e){wo(this,t);var o=e||{},i=o.destroyIframeAction;this.logger=o.logger||Ln.b;this.destroyIframeAction=i;this.vo=this.bo={}}t.prototype.push=function(){this.vo=Object.create(this.vo)};t.prototype.pop=function(){if(this.vo){var t=this.vo;if(Object.prototype.hasOwnProperty.call(t,"iframe")&&t.iframe.node){this.logger.trace(":ControlsDataStack.pop() -> _destroyIframe");this.destroyIframeAction()}var e=Object.getPrototypeOf(t);e&&(this.vo=e)}};t.prototype.setControlData=function(t,e,o){var i,r=o?this.bo:this.vo;Object(Xn.h)(r,(i={},i[t]=e,i))};t.prototype.getControlData=function(t,e){var o=arguments.length>2&&void 0!==arguments[2]&&arguments[2],i=arguments[3];i||(i=function(){return!0});for(var r=this.bo,n=this.vo,a=void 0,s=void 0,l=o?r:n;l;l=Object.getPrototypeOf(l)){var d=Object.prototype.hasOwnProperty.call(l,t)&&l[t];if(d){void 0===a&&i(d)&&(a=e?null!=d[e]&&void 0!==d[e]?d[e]:void 0:d);a&&d.important&&(s=e?d[e]:d)}if(void 0!==s&&a)break}return void 0!==s?s:a};t.prototype.getControlUnionData=function(t,e){function o(t){return t.reduceRight(function(t,e){var o=!!e.parsePoint;delete e.parsePoint;var i=e.data||{},r=t,n=vd({},r,i);o&&!i.display&&delete n.display;o&&!i.visibility&&delete n.visibility;!o||i.position||"absolute"!==r.position||"hidden"!==r.visibility&&"none"!==r.display||delete n.position;return n},{})}for(var i=[],r=[],n=this.vo;n;n=Object.getPrototypeOf(n)){var a=Object.prototype.hasOwnProperty.call(n,t)&&n[t];if(a){var s=a.parsePoint,l=a.important;if(e){var d=a[e]||{},c={data:d,parsePoint:s};l?r.push(c):i.push(c)}else{var u={data:a,parsePoint:s};l?r.push(u):i.push(u)}}}var h=o(i),p=o(r),f=vd({},h,p);if(r.length){p.display||delete f.display;p.visibility||delete f.visibility;p.position||"absolute"!==p.position||"hidden"!==p.visibility&&"none"!==p.display||delete f.position}return f};t.prototype.getControlNode=function(t){var e=this.getControlData(t,"node");if(!e){this.logger.none(".getControlNode("+t+") Unable to find control.node");return null}return e};return t}(),yd=bd,Ad=function(t){return new Promise(function(e){var o=t&&t.getAPI&&t.getAPI().logger||Ln.b;o.trace("::Plugin[customTracking]");var i=[],r=function(){return Promise.all(i)},n=function(e){var r='Extension[type="CustomTracking"] Tracking[event="'+e+'"]',n=t.yo();if(n){var a=Object(Xn.E)(n,r,t.replaceMacros.bind(t));o.track("::Plugin[customTracking].track("+r+")");i.push.apply(i,a)}},a=t.waitAsyncTrackings;t.waitAsyncTrackings=function(){return Promise.all([a.apply(t),r()])};var s=t.skipAd;t.skipAd=function(){n("onSkipAd");return s.apply(t,arguments)};var l=t.Ao;t.Ao=function(e){l.apply(t,arguments);if(e&&e.querySelector){n("onVastLoad");!e.querySelector("Wrapper,MediaFile")&&n("onVastEmpty")}};e(t)})},wd="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},_d=function(t){var e=t&&t.getAPI&&t.getAPI().logger||Ln.b;e.trace("::Plugin[externalTracking]");var o=t.options.externalTracking;if("object"===(void 0===o?"undefined":wd(o))){e.log("::Plugin[externalTracking] Init");Object.keys(o).forEach(function(i){var r=o[i];e.trace("::Plugin[externalTracking] Subscribed for "+i);t.subscribe(function(){[].concat(r).forEach(Xn.C)},i)})}},Sd="::Plugin[q1Tracking]",Md="q1tracking",Od=function(t){function e(){if(c){d=Date.now();l.rt(Md,r,c)}}function o(){l.ot(Md);c-=Math.max(0,Date.now()-d)}function i(){n.trace(Sd+".stop()");l.S()}function r(){i();t.le({code:Vn.a.TIMEOUT_OF_MEDIA,message:"Neither AdVideoFirstQuartile nor AdVideoMidpoint event happened during "+s+"ms after AdVideoMidpoint event"})}var n=t&&t.getAPI&&t.getAPI().logger||Ln.b;n.trace(""+Sd);var a=t.options.videoStartTimeout,s=void 0===a?2e4:a,l=new ms.a({ancestor:Sd,logger:n}),d=void 0,c=s;l.Q(t,"AdVideoStart",e);l.Q(t,"AdPaused",o);l.Q(t,"AdPlaying",e);l.Q(t,"AdVideoFirstQuartile",i);l.Q(t,"AdVideoMidpoint",i);l.Q(t,"AdStopped",i);l.Q(t,"AdDestroyed",i)},Id=function(t){var e=t&&t.getAPI&&t.getAPI().logger||Ln.b;e.trace("::Plugin[noAdCallback]");var o=t.options.noAdCallback,i=window[o]||o;if("function"==typeof i){e.log("::Plugin[noAdCallback] Init");t.subscribe(function(){e.log("::Plugin[noAdCallback] Executing");var o=t.getAnchorElement();setTimeout(function(){return i({anchorElement:o})})},"AdError")}else i&&e.warn("::Plugin[noAdCallback] noAdCallback provided, but not a function ("+i+")")},Ed="::Plugin[ViewableImpressionChecker]",Dd="timer",Cd="period_checking_timer",xd=100,Td=2e3,Pd=.5,jd={threshold:[Pd]},kd=function(t){function e(o){_o(this,e);var i=Ed,r=o&&o.getAPI&&o.getAPI().logger||Ln.b,n=So(this,t.call(this,{ancestor:Ed,logger:r}));n.logger.trace(i+" constructor()");n.module=o;n.wo=!1;n._o=null;n.So=jd;n.Q(o,"AdImpression",function(){return n.start()});n.Q(o,"AdPlaying",function(){return n.start()});n.Q(o,"AdPaused",function(){return n.reset()});n.Q(o,"AdVideoComplete",function(){return n.stop()});n.Q(o,"AdDestroyed",function(){return n.stop()});return n}Mo(e,t);e.prototype.start=function(){function t(t){var e=this;t.forEach(function(t){var i=t.isIntersecting,r=t.intersectionRatio;if(i&&r>=Pd){e.logger.trace(Ed+" isIntersecting="+i+" intersectionRatio="+r+" >= "+100*Pd+"%%");e.rt(Dd,function(){o.oe("ViewableImpression:viewable").then(function(){return e.logger.trace(Ed+" ViewableImpression:viewable tracked")});e.stop()},Td)}else{e.logger.trace(Ed+" clear! isIntersecting="+i+" "+r);e.ot(Dd)}})}function e(){function t(){var i=this;Object(Xn.q)(p).then(function(r){var n=r.intersectionRatio;if(n>=Pd){if(!e){e=!0;i.logger.trace(Ed+" intersectionRatio="+n+" >= "+100*Pd+"%%");i.rt(Dd,function(){o.oe("ViewableImpression:viewable").then(function(){return i.logger.trace(Ed+" ViewableImpression:viewable tracked")});i.stop()},Td)}}else{i.logger.none(Ed+" clear! "+n);e=!1;i.ot(Dd)}i.rt(Cd,t.bind(i),xd)})}var e=!1;t.call(this)}if(!this.wo){this.logger.trace(Ed+" start()");this.reset();var o=this.module,i=o.O("videoSlot"),r=o.O("slot"),n=o.O("iframe"),a=o.O("videoContainer"),s=r&&(r.clientHeight||parseInt(getComputedStyle(r).height,10))||0,l=i&&getComputedStyle(i)||{},d=i&&(i.clientHeight||parseInt(l.height,10))||0,c=!(!l.display||"none"===l.display),u=a&&(a.clientHeight||parseInt(getComputedStyle(a).height,10))||0,h=n&&(n.clientHeight||parseInt(getComputedStyle(n).height,10))||0,p=i&&c&&d?i:r&&s?r:a&&u?a:n&&h?n:null;if(p){var f="We are waiting for continuous visibility of the module by "+100*Pd+"%% during "+Td+" ms";if(window.IntersectionObserver){this.logger.trace(Ed+" start with IntersectionObserver. "+f);(this._o=new IntersectionObserver(t.bind(this),this.So)).observe(p)}else{this.logger.trace(Ed+" start manually checking by timer. "+f);e.call(this)}}}};e.prototype.stop=function(){this.logger.trace(Ed+" stop()");this.ot(Cd);this.wo=!0;this.reset();this.S()};e.prototype.reset=function(){this.logger.trace(Ed+" reset()");this.ot(Dd);this.ot(Cd);if(this._o){this._o.disconnect();this._o=null}};return e}(ms.a),Rd=function(t){return new kd(t)},Fd=o(5),Nd=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var o=arguments[e];for(var i in o)Object.prototype.hasOwnProperty.call(o,i)&&(t[i]=o[i])}return t},Vd="wrapper",Ld=function(t){function e(o){Oo(this,e);var i=Io(this,t.call(this,Vd,o)),r=o.O("iframe"),n=o.Jt(Vd,"css")||{},a=Object(qn.b)(r.contentDocument.body,"div",Nd({position:"relative",fontFamily:"Arial, Helvetica, sans-serif",fontSize:"14px",lineHeight:1.5,color:"white",boxSizing:"content-box",userSelect:"none",zIndex:0},n));o.Qt(Vd,{node:a});i.node=a;setTimeout(function(){return o.trigger("slotSizeChanged")},1);return i}Eo(e,t);e.prototype.showMarginTop=function(){var t=this.node,e=this.module,o=t&&getComputedStyle(t)||{},i=o.paddingTop;if(parseFloat(i)<25){Object(qn.c)(t,{paddingTop:Object(Xn.u)(25)});setTimeout(function(){return e.trigger("slotSizeChanged")},1)}};e.prototype.hideTopSpace=function(){var t=this.node,e=this.module,o=t&&getComputedStyle(t)||{},i=o.paddingTop;if(25===parseFloat(i)){Object(qn.c)(t,{paddingTop:0});setTimeout(function(){return e.trigger("slotSizeChanged")},1)}};return e}(Fd.a),zd=Ld,Wd=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var o=arguments[e];for(var i in o)Object.prototype.hasOwnProperty.call(o,i)&&(t[i]=o[i])}return t},Hd="container",Ud=function(t){function e(o){Do(this,e);var i=Co(this,t.call(this,Hd,o)),r=o.O("wrapper"),n=Object(qn.b)(r,"div",Wd({position:"relative",width:"100%",height:"100%",background:"black",overflow:"hidden",zIndex:1},o.Jt(Hd,"css"),o.M("background","css")));o.Qt(Hd,{node:n});return i}xo(e,t);return e}(Fd.a),Bd=Ud,qd=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var o=arguments[e];for(var i in o)Object.prototype.hasOwnProperty.call(o,i)&&(t[i]=o[i])}return t},Xd="videoContainer",Gd=function(t){function e(o){To(this,e);var i=Po(this,t.call(this,Xd,o)),r=o.getAdWidth(),n=o.getAdHeight(),a=o.O("container"),s=r&&-r/2+(a.clientWidth?(r-a.clientWidth)/2:0)||0,l=n&&-n/2+(a.clientHeight?(n-a.clientHeight)/2:0)||0,d=qd({position:"absolute",top:"50%",left:"50%",marginTop:""+Object(Xn.u)(l),marginLeft:""+Object(Xn.u)(s),background:"black",cursor:"pointer",zIndex:1},o.Jt(Xd,"css"),o.Jt("videobackground","css")),c=Object(qn.b)(a,"div",qd({width:r+"px",height:n+"px"},d));o.Qt(Xd,{node:c});return i}jo(e,t);return e}(Fd.a),Yd=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var o=arguments[e];for(var i in o)Object.prototype.hasOwnProperty.call(o,i)&&(t[i]=o[i])}return t},Jd=function(t,e){t.raw=e;return t}(["Advertisement"],["Advertisement"]),Qd="title",Zd=function(t){function e(o){ko(this,e);var i=Ro(this,t.call(this,Qd,o)),r=o.O("wrapper"),n=Math.random().toString(36).substr(2,10),a=o.Mo("vnCreative:debug"),s=a&&a.split&&a.split("?")[0],l=o.Jt(Qd,"css"),d=Object(qn.b)(r,"div",Yd({display:"inline-block",position:"absolute",zIndex:3,top:0,left:0,padding:"5px",cursor:"default",color:"white",lineHeight:1},l),o.M(Qd,"text")||os(Jd),s&&Xn.v.bind(i,s+"/"+n));a&&i.Y(d,"click",function(){i.logger.log(Qd+" @onclick");o.postDebug(n,a)});o.Qt(Qd,{node:d});return i}Fo(e,t);e.getName=function(){return Qd};return e}(Fd.a),Kd=Zd,$d=o(35),tc=o.n($d),ec=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var o=arguments[e];for(var i in o)Object.prototype.hasOwnProperty.call(o,i)&&(t[i]=o[i])}return t},oc="skipAd",ic="Module::Control["+oc+"]",rc=500,nc=function(t){function e(o){No(this,e);var i=Vo(this,t.call(this,oc,o));i.moduleAPI=o.getAPI();var r=i.invisible,n=i.moduleAPI,a=n.setControlData,s=n.getControlData,l=n.getControlUnionData,d=n.getControlNode,c=n.addVPAIDEventListener,u=i.timeBeforeSkip=s(oc,"duration");if(!r&&u<1/0){var h=d("wrapper"),p=l(oc,"css")||{},f=Object(qn.b)(h,"div",ec({position:"absolute",display:"none",zIndex:5,top:0,right:0,padding:"10px",cursor:"pointer",opacity:1,transition:"all "+rc+"ms ease-out"},p),tc.a,function(){i.logger.trace(ic+" @click");o.skipAd()});if(!Gn.f){if(s(oc,"hover")){Object(qn.c)(f,{opacity:0});i.Y(h,"mouseenter",function(){return Object(qn.c)(f,{opacity:1})});i.Y(h,"mouseleave",function(){return Object(qn.c)(f,{opacity:0})})}}a(oc,{node:f})}c("AdSkippableStateChange",zo.bind(i));c("AdStarted",function(){o.setAdSkippableState(!u)||zo.call(i)},i);o.setAdSkippableState(!u)||zo.call(i);return i}Lo(e,t);e.getName=function(){return oc};e.prototype.ifBlockedAction=function(){this.logger.trace(ic+' has attribute remove="true"');this.invisible=!0};return e}(Fd.a),ac=nc,sc=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var o=arguments[e];for(var i in o)Object.prototype.hasOwnProperty.call(o,i)&&(t[i]=o[i])}return t},lc=Wo([""," sec"],[""," sec"]),dc=Wo(["Skip ad in "," sec"],["Skip ad in "," sec"]),cc=Wo(["The ad will end in "," sec"],["The ad will end in "," sec"]),uc="skipAdCountdown",hc="Module::Control["+uc+"]",pc=hc+":RemainingTimeChange",fc=hc+":ReservedSkipAd",gc=500,mc=10,vc=function(t){function e(o){Ho(this,e);var i=Uo(this,t.call(this,uc,o));i.moduleAPI=o.getAPI();void 0===i.invisible&&(i.invisible=!1);var r=i.invisible,n=i.moduleAPI,a=n.setControlData,s=n.getControlUnionData,l=n.getControlData,d=n.getControlNode,c=n.addVPAIDEventListener;i.timeBeforeSkip=l(uc,"duration");var u=l(uc,"totalTimeCountdown");i.totalTimeCountdown="show"===u;if(!i.timeBeforeSkip&&!i.totalTimeCountdown)return Uo(i);i.isSmallSizeModule=Gn.f;i.starting=!1;if(!r){var h=d("wrapper"),p=s(uc,"css"),f=Object(qn.b)(h,"div",sc({display:"none",position:"absolute",zIndex:1,top:"10px",right:Object(Xn.u)(mc),padding:"5px 10px",lineHeight:"15px",color:"white",backgroundColor:"rgba(0, 0, 0, 0.289)",borderRadius:"3px",cursor:"default",pointerEvents:"none"},p));a(uc,{node:f})}var g=i.moduleAPI||{},m=g.getAdDuration,v=g.getAdRemainingTime;c("AdStarted",Yo.bind(i),i);c("AdVideoStart",Yo.bind(i),i);c("AdVideoComplete",Xo.bind(i),i);c("AdSkippableStateChange",function(){if(m&&v&&m()&&v()){i.logger.trace(hc+" @AdSkippableStateChange: calls adRemainingTimeChecker()",2,"pink");setTimeout(qo.bind(i),1)}},i);c("vnFormatStateChanged",function(t){if(m&&v&&m()&&v()){i.isSmallSizeModule=Gn.f||t&&!0===t.isFloating;i.logger.trace(hc+" @vnFormatStateChanged: calls adRemainingTimeChecker()",2,"pink");setTimeout(qo.bind(i),1)}},i);c("AdSkipAdPositionChanged",function(t){var e=t.offsetWidth;if(!i.invisible){var o=d(uc);Object(qn.c)(o,{right:Object(Xn.u)(e||mc)})}});return i}Bo(e,t);e.getName=function(){return uc};e.prototype.ifBlockedAction=function(){this.logger.trace(hc+' has attribute remove="true"');this.invisible=!0};return e}(Fd.a),bc=vc,yc=o(36),Ac=o(40),wc=o.n(Ac),_c=o(41),Sc=o.n(_c),Mc=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var o=arguments[e];for(var i in o)Object.prototype.hasOwnProperty.call(o,i)&&(t[i]=o[i])}return t},Oc="volume",Ic="Module::Control["+Oc+"]",Ec=function(t){return t?wc.a:Sc.a},Dc=function(t){function e(o){function i(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},o=Mc({step:.05,invoker:null,smoothUpdate:null},e),i=o.step,n=o.invoker,a=o.smoothUpdate;this.logger.trace(Ic+".setAdVolume("+t+", params:"+JSON.stringify(e,["step","invoker","smoothUpdate"])+") ");var s=this.getAdVolume(),l=!n||n===c;if(this.useExistsVideoSlot||l||this.canChangeVolume()||!(t>0||s>0)){oi.call(this);if(s!==t){if(l&&!a){c.cancelVolumeUpdate();c.originalSetAdVolume(t,{invoker:this});this.logger.trace(Ic+" setAdVolume("+t+") form module.setAdVolume()");return}r.call(this,s,t,i*(s>t?-1:1))}}else this.logger.warn(Ic+" setAdVolume() attempt to set volume="+t+" was ignored")}function r(t,e,o){c.cancelVolumeUpdate();var i=Object(Xn.e)(t+o,0,1);(o<0&&i<e||o>0&&i>e)&&(i=e);c.originalSetAdVolume(i,{invoker:this});i!==e?this.Xt=setTimeout(r.bind(this,i,e,o),16):oi.call(this)}Zo(this,e);var n=Ko(this,t.call(this,Oc,o)),a=o.options.disableHoverAudio,s=o.getAdVolume();n.logger.trace(Ic+":constructor() disableHoverAudio="+a+" startingVolume="+s+" mobile="+Gn.f+" safari="+Gn.f);var l=o.O("wrapper"),d=Object(qn.b)(l,"div",Mc({position:"absolute",zIndex:1,bottom:0,right:0,width:"40px",height:"40px",padding:"10px",cursor:"pointer",stroke:"white",display:"none"},o.Jt(Oc,"css")),Ec(s),function(t){t.preventDefault();t.stopPropagation();var e=o.getAdVolume();o.setAdVolume(e?0:1,{smoothUpdate:!0})});n.Xt=null;var c=n;o.Qt(Oc,{node:d});n.Q(o,"AdExpandedChange",ii.bind(o));n.Q(o,"AdVolumeChange",ri.bind(o));n.Q(o,"AdVideoComplete",ti.bind(n));n.Q(o,"AdDestroyed",ei.bind(n));n.Q(o,"AdAudioDisabled",ni.bind(o));n.Q(o,"AdLoadedVideoData",ai.bind(o));n.Q(o,"AdVideoStart",ai.bind(o));n.originalSetAdVolume=n.K(o,"setAdVolume",i);Gn.f||a||Gn.g||si.call(n,o);n.logger.trace(Ic+" constructor: at first setup volume to default value of Module = module.setAdVolume("+s+")");o.setAdVolume(s,{step:1,invoker:n});n.canChangeVolume=o.canChangeVolume.bind(o);return n}$o(e,t);e.prototype.cancelVolumeUpdate=function(){clearTimeout(this.Xt);this.Xt=null};e.prototype.updateInProgress=function(){return null!=this.Xt};e.getName=function(){return Oc};return e}(Fd.a),Cc=Dc,xc=o(42),Tc=o.n(xc),Pc=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var o=arguments[e];for(var i in o)Object.prototype.hasOwnProperty.call(o,i)&&(t[i]=o[i])}return t},jc="play",kc="Module::Control["+jc+"]",Rc=function(t){function e(o){li(this,e);var i=di(this,t.call(this,jc,o)),r=Object(qn.b)(o.O("wrapper"),"div",Pc({display:"none",position:"absolute",zIndex:3,top:0,right:0,bottom:0,left:0,width:"inherit",height:"inherit",background:"rgba(0, 0, 0, .7)",cursor:"pointer"},o.Jt(jc,"css")),Tc.a,function(t){Ln.b.trace(kc+" @click");t.preventDefault();o.resumeAd()});Object(qn.c)(r.firstChild,{position:"absolute",top:"50%",left:"50%",margin:"-32px 0 0 -32px"});o.Qt(jc,{node:r});i.Q(o,"AdPaused",ui.bind(o));i.Q(o,"AdPlaying",hi.bind(o));return i}ci(e,t);e.getName=function(){return jc};return e}(Fd.a),Fc=Rc,Nc=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var o=arguments[e];for(var i in o)Object.prototype.hasOwnProperty.call(o,i)&&(t[i]=o[i])}return t},Vc="progress",Lc="progressBar",zc=function(t){function e(o){pi(this,e);var i=fi(this,t.call(this,Vc,o)),r=o.O("wrapper"),n=Object(qn.b)(r,"div",Nc({position:"absolute",zIndex:2,bottom:0,left:0,width:"100%",height:"2px",background:"rgba(0, 0, 0, .5)"},o.Jt(Vc,"css"))),a=Object(qn.b)(n,"div",Nc({position:"absolute",width:"0%",height:"2px",background:"#aab445"},o.Jt(Lc,"css")));o.Qt(Vc,{node:n});o.Qt(Lc,{node:a});i.Q(o,"AdVideoStart",mi.bind(o));i.Q(o,"AdVideoComplete",vi.bind(o));i.Q(o,"AdRemainingTimeChange",bi.bind(o));return i}gi(e,t);e.getName=function(){return Vc};return e}(Fd.a),Wc=zc,Hc=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var o=arguments[e];for(var i in o)Object.prototype.hasOwnProperty.call(o,i)&&(t[i]=o[i])}return t},Uc="advLogo",Bc="Module::Control["+Uc+"]",qc=10,Xc=160,Gc=40,Yc=10,Jc=10,Qc=.3,Zc=function(t){function e(o){yi(this,e);var i=Ai(this,t.call(this,Uc,o,!0)),r=o.O("wrapper"),n=o.Jt(Uc,"css")||{};if(!n.width||!n.height){n.width=Xc+"px";n.height=Gc+"px"}var a=parseInt(n.width,10),s=parseInt(n.height,10),l=Object(qn.b)(r,"div",Hc({position:"absolute",zIndex:4,left:0,marginTop:qc+"px",backgroundRepeat:"no-repeat",cursor:"pointer",visibility:"hidden"},n));if(!Gn.f){i.Y(l,"mouseenter",function(){return Object(qn.c)(l,{opacity:.8})});i.Y(l,"mouseleave",function(){return Object(qn.c)(l,{opacity:1})})}var d=o.M(Uc,"url");i.Y(l,"click",function(){o.vpaid?o.vpaid.trigger("AdClickThru",d||null,null,!0):Xn.v.call(o,d)});o.Qt(Uc,{node:l});var c=getComputedStyle(r),u=c.marginBottom,h=Math.max(l.offsetHeight+Yc,parseInt(u,10));Object(qn.c)(r,{marginBottom:h+"px"});i.Q(o,"AdSizeChange",_i.bind(o,a,s));i.Q(o,"AdStarted",Si.bind(o));return i}wi(e,t);e.getName=function(){return Uc};return e}(Fd.a),Kc=Zc,$c=o(22),tu=o.n($c),eu=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var o=arguments[e];for(var i in o)Object.prototype.hasOwnProperty.call(o,i)&&(t[i]=o[i])}return t},ou="callButton",iu="Module::Control["+ou+"]",ru="#000",nu="#f8f8f8",au="#dedede",su=.5,lu=.75,du=3,cu=10,uu=33,hu=.3,pu=.1,fu=10,gu=640,mu=9,vu=10,bu=5,yu=function(t){function e(o){Oi(this,e);var i=Ii(this,t.call(this,ou,o,!0)),r=o.O("wrapper"),n=o.Jt(ou,"css")||{},a=Object(qn.b)(r,"div",eu({position:"absolute",zIndex:4,right:0,top:"100%",height:uu+"px",padding:bu+"px",marginTop:cu+"px",backgroundColor:nu,border:"1px solid rgba(0, 0, 0, "+su+")",borderRadius:du+"px",cursor:"pointer",visibility:"hidden",display:"flex",alignItems:"center",justifyContent:"center"},n),tu.a);Object(qn.b)(a,"span",{padding:vu+"px "+vu+"px "+vu+"px 0",color:ru,lineHeight:"15px",textAlign:"center"},o.M(ou,"text")||"Подробнее на сайте");o.Qt(ou,{node:a});if(!Gn.f){var s=o.M(ou,"hoverBackgroundColor");i.Y(a,"mouseenter",function(){return Object(qn.c)(a,{backgroundColor:s||au,border:"1px solid rgba(0, 0, 0, "+lu+")"})});i.Y(a,"mouseleave",function(){return Object(qn.c)(a,{backgroundColor:n.backgroundColor||nu,border:"1px solid rgba(0, 0, 0, "+su+")"})})}var l=o.M(ou,"url");i.Y(a,"click",function(){o.vpaid?o.vpaid.trigger("AdClickThru",l||null,null,!0):Xn.v.call(o,l)});var d=getComputedStyle(r),c=d.marginBottom,u=Math.max(a.offsetHeight+2*cu,parseInt(c,10));Object(qn.c)(r,{marginBottom:u+"px"});i.Q(o,"AdSizeChange",Di.bind(o));i.Q(o,"AdStarted",Ci.bind(o));return i}Ei(e,t);e.getName=function(){return ou};return e}(Fd.a),Au=yu,wu=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var o=arguments[e];for(var i in o)Object.prototype.hasOwnProperty.call(o,i)&&(t[i]=o[i])}return t},_u=function(t,e){t.raw=e;return t}(["Learn more"],["Learn more"]),Su="moreInfo",Mu="Module::Control["+Su+"]",Ou="#fff",Iu="rgba(0, 0, 0, 0.7)",Eu="rgba(0, 0, 0, 0.85)",Du="rgba(0, 0, 0, 0.2)",Cu="rgba(0, 0, 0, 0.5)",xu=.3,Tu=.22,Pu="bottom",ju=10,ku=function(t){function e(o){Ti(this,e);var i=Pi(this,t.call(this,Su,o,!0)),r=o.O("wrapper"),n=o.Jt(Su,"css")||{},a=Object(qn.b)(r,"div",wu({position:"absolute",zIndex:4,padding:ju+"px",borderRadius:"2px",transition:"0.3s",color:n.color||Ou,border:"1px solid "+(n.color||Ou),textShadow:"1px 1px 19px "+Iu,backgroundColor:n.backgroundColor||Du,cursor:"pointer",visibility:"hidden",display:"flex",alignItems:"center",justifyContent:"center"},n));Object(qn.b)(a,"span",{lineHeight:"15px",textAlign:"center"},o.M(Su,"text")||os(_u));o.Qt(Su,{node:a});var s=o.M(Su,"hoverBackgroundColor"),l=o.M(Su,"hoverColor");if(Gn.f)Object(qn.c)(a,{backgroundColor:s||Cu,color:l||Ou,borderColor:l||Ou,textShadow:"1px 1px 19px "+Iu});else{i.Y(a,"mouseenter",function(){return Object(qn.c)(a,{backgroundColor:s||Cu,color:l||Ou,borderColor:n.color||Ou,textShadow:"1px 1px 19px "+Eu})});i.Y(a,"mouseleave",function(){return Object(qn.c)(a,{backgroundColor:n.backgroundColor||Du,color:n.color||Ou,borderColor:n.color||Ou,textShadow:"1px 1px 19px "+Iu})})}var d=o.yo(),c=Object(Xn.o)(d,"ClickThrough");c&&i.Y(a,"click",function(){o.vpaid?o.vpaid.trigger("AdClickThru",c||null,null,!0):Xn.v.call(o,c)});Fi.call(o);i.Q(o,"AdSizeChange",ki.bind(o));i.Q(o,"AdStarted",Ri.bind(o));return i}ji(e,t);e.getName=function(){return Su};return e}(Fd.a),Ru=ku,Fu=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var o=arguments[e];for(var i in o)Object.prototype.hasOwnProperty.call(o,i)&&(t[i]=o[i])}return t},Nu="bottomBorder",Vu=15,Lu=100,zu=15,Wu=function(t){function e(o){Vi(this,e);var i=Li(this,t.call(this,Nu,o,!0));i.Gt=null;var r=o.O("wrapper"),n=o.Jt(Nu,"css")||{};i.Yt=n&&"none"===n.display;var a=getComputedStyle(r),s=a.marginBottom;s=parseInt(s,10);var l=Object(qn.b)(r,"div",Fu({position:"absolute",zIndex:4,left:0,top:"calc(100% + "+s+"px)",height:Vu+"px",width:Lu+"%",marginBottom:zu+"px",borderTop:"1px solid rgb(248, 248, 248)",background:"radial-gradient(ellipse farthest-side at 50% -30%, rgba(0, 0, 0, 0.15), rgba(97, 97, 97, 0.0) 95%)"},n));o.Qt(Nu,{node:l});i.Q(o,"AdSizeChange",Wi.bind(i,o,s));return i}zi(e,t);e.getName=function(){return Nu};return e}(Fd.a),Hu=Wu,Uu="spinner",Bu="Module::Control["+Uu+"]",qu=5,Xu=function(t){function e(o){Hi(this,e);var i=Ui(this,t.call(this,Uu,o));i.videoProgressId=null;i.oldCurrentTime=null;i.attemptsCounter=0;i.attemptLimit=o.M(Uu,"attemptLimit")||qu;var r=o.O("wrapper"),n=Object(qn.f)(r,50);Object(qn.c)(n,{zIndex:3,display:"none",width:"50px",height:"50px"});o.Qt(Uu,{node:n});i.Q(o,"AdVideoStart",Yi.bind(i,o));i.Q(o,"AdPlaying",Yi.bind(i,o));i.Q(o,"AdPaused",Ji.bind(i,o));i.Q(o,"AdStopped",Ji.bind(i,o));i.Q(o,"AdVideoComplete",Ji.bind(i,o));i.Q(o,"AdSkipped",Ji.bind(i,o));i.Q(o,"AdDestroyed",Ji.bind(i,o));return i}Bi(e,t);e.getName=function(){return Uu};return e}(Fd.a),Gu=Xu,Yu=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var o=arguments[e];for(var i in o)Object.prototype.hasOwnProperty.call(o,i)&&(t[i]=o[i])}return t},Ju="click",Qu="Module::Control["+Ju+"]",Zu=function(t){function e(o){Qi(this,e);var i=Zi(this,t.call(this,Ju,o)),r=Object(qn.b)(o.O("wrapper"),"div",Yu({position:"absolute",zIndex:0,top:0,right:0,bottom:0,left:0,background:"none",cursor:"pointer"},o.Jt(Ju,"css")));i.Y(r,"click",function(t){var e=o.O("videoSlot");Ln.b.trace(Qu+" @click videoSlot="+e);t.preventDefault();t.stopPropagation();e&&e.click&&e.click()});i.Q(o,"AdVideoStart",function(){var t=o.O("videoContainer");if(t){var e=t.querySelector("video"),i=t.querySelector("iframe, div");!e&&i&&setTimeout(function(){return o.Oo(Ju)},0)}});o.Qt(Ju,{node:r});return i}Ki(e,t);e.getName=function(){return Ju};return e}(Fd.a),Ku=Zu,$u=o(16),th=function(t){var e=t.url,o=t.module;return new Promise(function(t){var i=o&&o.getAPI&&o.getAPI().logger||Ln.b;if(e.indexOf($u.a.DATA_DOMAIN)>-1){i.trace("::PreprocessDataUrl[clientinfo] Injecting client info:");if(!Gn.d){i.trace("::PreprocessDataUrl[clientinfo] Injecting flash=0");e=Object(Xn.b)(e,{flash:0})}var r=o.adWidth,n=o.adHeight;if(r&&n){i.trace("::PreprocessDataUrl[clientinfo] Injecting size w="+r+" & h="+n);e=Object(Xn.b)(e,{w:r,h:n})}var a=Object(Xn.k)(window,document);if(a){i.trace("::PreprocessDataUrl[clientinfo] Injecting location="+a);e=Object(Xn.b)(e,{location:a})}}t({url:e,module:o})})},eh="Module::PreprocessDataUrl[weborama]",oh="//wam.solution.weborama.fr/fcgi-bin/dispatch.fcgi?d.A=prd&d.key=n9d9C9I4XN1I&d.format=json&d.top_clusters=10",ih=function(t){var e=t.url,o=t.module;return new Promise(function(t){var i=o&&o.getAPI&&o.getAPI().logger||Ln.b;if(-1!==e.indexOf("{weborama_data}")){i.trace(eh+" Injecting weborama data:");var r=function(t){return new Promise(function(e){try{localStorage.setItem(oh,JSON.stringify(t))}catch(t){i.warn(eh+" Failed to save weborama data to localStorage: "+t)}finally{e(t)}})},n=function(t){return new Promise(function(o){var r=t&&t.data||{},n=r.socio_demographics||{},a=Object(Xn.b)("",{puid33:n.gender||"",puid34:n.age||"",puid35:n.social_class||"",puid36:(r.clusters||[]).slice(0,10).join(":"),puid37:(r.audiences||[]).slice(0,10).join(":")}),s="&"+a.substr(1).replace("%3A",":"),l=e.replace("{weborama_data}",s);i.trace(eh+" Injected weborama data");o(l)})};(function(){return new Promise(function(t){var e=Date.now(),o=e-864e5,r=void 0;try{r=JSON.parse(localStorage.getItem(oh))}catch(t){i.warn(eh+" Failed to get weborama data from localStorage: "+t)}if(r&&r.timestamp>o){i.trace(eh+" Using cached weborama data");t(r)}else{i.trace(eh+" Fetching weborama data from "+oh);Object(Xn.F)(oh).then(function(o){var r={};try{r=JSON.parse(o.target.responseText)}catch(t){i.warn(eh+" Failed to parse weborama data: "+t)}i.trace(eh+" Retrieved weborama data: "+o.target.responseText);t({timestamp:e,data:r})}).catch(function(e){i.warn(eh+" Failed to retrieve weborama data: "+e.target.statusText);t({})})}})})().then(r).then(n).then(function(e){return t({url:e,module:o})})}else t({url:e,module:o})})},rh=function(t){var e=t.url,o=t.module;return new Promise(function(t){var i=o&&o.getAPI&&o.getAPI().logger||Ln.b;if(-1!==e.indexOf("{roxot_data}")){i.trace("Module::PreprocessDataUrl[roxot] Injecting roxot data");var r={};[{key:"roxot-group-id",f:$i.bind(null,1e3)},{key:"roxot-sector-id",f:$i.bind(null,100)},{key:"roxot-deep",f:$i.bind(null,100)},{key:"roxot-event-group-id",f:tr.bind(null)},{key:"roxot-event",f:tr.bind(null)},{key:"roxot-event-deep",f:tr.bind(null)},{key:"roxot-minutes",f:function(){return(new Date).getUTCMinutes().toString()}},{key:"roxot-hours",f:function(){return(new Date).getUTCHours().toString()}},{key:"roxot-day",f:function(){return(new Date).getUTCDay().toString()}}].forEach(function(t){r[t.key]=t.f(t.key)});t({url:e.replace("{roxot_data}",Object(Xn.b)("",r).substr(1)),module:o})}else t({url:e,module:o})})},nh="vnProhibitedWords",ah="::Extension["+nh+"]",sh=function(t){return new Promise(function(e){var o=t&&t.getAPI&&t.getAPI()||{},i=o.logger||Ln.b,r=o.getLastParameters,n=o.setControlData,a=o.getControlData,s=o.trackStrongUrls;i.trace(""+ah);var l=r(),d=l&&l[nh]||{};if(Object.keys(d).length){n(nh,{options:d.options,pattern:d.pattern,selector:d.selector,trackings:d.trackings,fatal:d.fatal,important:d.important},d.global)}var c=a(nh)||{},u=c.pattern,h=c.selector,p=c.trackings,f=c.fatal;if(u){var g=new RegExp(u,"i"),m=or(h)||"";i.trace(ah+" Matching: "+u);var v=m.match(g);if(v){s(p);var b=Error(ah+" Pattern matched: "+v);b.fatal=!!f;throw b}i.log(ah+" Pattern not matched: "+u)}e(t)})},lh=function(t){return new Promise(function(e){var o=t&&t.getAPI&&t.getAPI().logger||Ln.b;o.trace("::Extension[vnTargetedWords]");var i=/\s*,\s*/i,r=t.yo(),n=r&&r.querySelector('Extension[type="vnTargetedWords"]');if(n){o.trace("::Extension[vnTargetedWords] Init");var a=Object(Xn.m)(n,"fatal"),s=n&&n.querySelector("words");if(!s){e(t);return}var l=Object(Xn.o)(s).replace(/[,\s]+$/g,"").split(i).join("|"),d=new RegExp(l,"i"),c=function(t){var e=void 0;try{e=document.querySelectorAll(t)}catch(t){}e&&e.length||(e=document.querySelectorAll("body"));return Array.from(e).map(function(t){return t.textContent||t.innerText}).join("\n")}(Object(Xn.o)(n,"selector"))||"",u=c.match(d);o.trace("::Extension[vnTargetedWords] Matching: "+l);if(!u){var h=new Error("::Extension[vnTargetedWords] Pattern not matched: "+l);h.fatal=!!a;throw h}o.log("::Extension[vnTargetedWords] Pattern matched: "+u);t.Io('Extension[type="vnTargetedWords"] targetedMetrics')}e(t)})},dh={adlabel:"title",countdown:"skipAdCountdown",soundbtn:"volume",logo:"logo"},ch={"-1":{display:"none"},0:{display:"none"},1:{display:""},TL:{position:"absolute",top:"10px",right:"auto",bottom:"auto",left:"10px"},TR:{position:"absolute",top:"10px",right:"10px",bottom:"auto",left:"auto"},BL:{position:"absolute",top:"auto",right:"auto",bottom:"10px",left:"10px"},BR:{position:"absolute",top:"auto",right:"10px",bottom:"10px",left:"auto"}},uh=function(t){return new Promise(function(e){var o=t&&t.getAPI&&t.getAPI().logger||Ln.b;o.trace("::Extension[controls]");var i=t.yo(),r=i&&i.querySelector('Extension[type="controls"]');if(r){o.log("::Extension[controls] Init");var n=r.querySelectorAll("control");if(n&&n.length){Array.from(n).forEach(function(e){var i=e.getAttribute("id"),r=e.getAttribute("layout");o.trace("::Extension[controls] "+i+": "+r);dh[i]?t.Qt(dh[i],{css:ch[r]||{}}):o.warn("::Extension[controls] "+i+" is not valid name for control")});o.log("::Extension[controls] Layout applied")}else{var a=Object(Xn.o)(r);if("1"===a||"0"===a){o.warn("::Extension[controls] Adspector controls detected with value="+a);t.Qt("adSpectorControls",a)}}}e(t)})},hh=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var o=arguments[e];for(var i in o)Object.prototype.hasOwnProperty.call(o,i)&&(t[i]=o[i])}return t},ph="Module::Extension[vnControls]",fh=function(t){return new Promise(function(e){var o=t&&t.getAPI&&t.getAPI().logger||Ln.b,i={adlabel:"title",countdown:"skipAdCountdown",close:"skipAd",logo:"logo",soundbtn:"volume",progress:"progress",progressbar:"progressBar",advlogo:"advLogo",callbutton:"callButton",moreinfo:"moreInfo",bottomborder:"bottomBorder",video:"slot",play:"play",videoclick:"videoclick",background:"background",videobackground:"videobackground"},r={action:function(t){return{action:t}},layout:function(t){return"0"===t?{css:qn.l}:{}},enablewithvpaid:function(t){return{enableWithVPAID:t}},display:function(t){return{css:{display:t}}},width:function(t){return{css:{width:t}}},height:function(t){return{css:{height:t}}},color:function(t){return{css:{color:t,fill:t,stroke:t}}},bgcolor:function(t){return{css:{backgroundColor:t}}},hoverbgcolor:function(t){return{hoverBackgroundColor:t}},hovercolor:function(t){return{hoverColor:t}},imgsrc:function(t){return{css:{backgroundImage:"url("+t+")"}}},padding:function(t){return{css:{padding:t}}},text:function(t){return{text:t}},url:function(t){return{url:t}},position:function(t){return{position:t}},marginh:function(t){return{marginH:t}},marginv:function(t){return{marginV:t}},valign:function(e){var o=t.O("slot");o&&Object(qn.c)(o,{top:e,transform:"translate(-50%, -"+e+")"})},important:function(t){return{important:"true"===t||"1"===t}},logosrc:function(t){return{customerlogo:{logoSrc:t}}},logoheight:function(t){return{customerlogo:{logoHeight:t}}},logowidth:function(t){return{customerlogo:{logoWidth:t}}},totaltimecountdown:function(t){return{totalTimeCountdown:t}},remove:function(t){return{remove:!0===t||"true"===t}}};o.trace(""+ph);var n=t.te(),a=n&&n.vnControls&&n.vnControls.controls;if(!a)return e(t);o.trace(ph+" Init");var s=n.vnControls.global;Object.keys(a).forEach(function(e){var n=a[e],l=n.global||s,d=n.css,c=i[e.toLowerCase()];if(d){o.trace(ph+" Setting inner css for control "+e);t.Qt(c,{css:d},l)}var u=Object.keys(n).reduce(function(t,e){var o=r[e.toLowerCase()],i=n[e];return Object(Xn.h)(t,hh({},i&&o&&o(i)))},{});u.parsePoint=n.parsePoint;o.trace(ph+" Setting custom properties for control "+e);!Object(Xn.s)(u)&&t.Qt(c,u,l);["hover","afterplay"].forEach(function(i){var r=n[i];if(r){var a;o.trace(ph+" Setting "+r+" for control "+e);t.Qt(c,(a={},a[i]=!0,a),l)}})});o.trace(ph+" Layout applied");return e(t)})},gh="vnBrowserCache",mh="::Extension["+gh+"]",vh=function(t){return new Promise(function(e){(t&&t.getAPI&&t.getAPI().logger||Ln.b).trace(""+mh);var o=(t.te()||{})[gh]||{},i=o.enabled,r=o.global,n=o.important;(i||r||n)&&t.Qt(gh,{enabled:i,important:n},r);e(t)})},bh=function(t){return new Promise(function(e,o){var i=t&&t.getAPI&&t.getAPI().logger||Ln.b;t.maxSkipTime=null;var r=t.te(),n=r&&r.extSkipTime||{},a=n,s=a.strict,l=a.important,d=a.global,c=n,u=c.skipTime;d&&t.Qt("extSkipTime",{skipTime:u,strict:s,important:l,global:d},d);i.trace("::Extension[skipTime/skipTime2]");var h=t.M("extSkipTime",null,!1,function(t){return t.strict})||{},p=h.skipTime,f=h.strict;d||t.Qt("extSkipTime",{skipTime:u,strict:s,important:l,global:d},d);n=t.M("extSkipTime");u=(n||{}).skipTime;if(n&&u===1/0&&!n.global){var g=t.M("extSkipTime","skipTime",!0);void 0!==g&&(u=g)}var m=f&&p;m&&(t.maxSkipTime=m);var v=m||0===m,b=u;if(u||v){if(v&&u&&f&&m<u){var y=Error('skipTime has attribute "strict" == true and value of skipTime('+u+") is more than parent skipTime("+m+")");y.code=Vn.a.GENERAL_VPAID_ERROR;return o(y)}b=f?Math.min(m||1/0,0===u?0:u||1/0):u||0}i.trace("::Extension[skipTime/skipTime2] Skip ad button disabled for "+b+" sec");t.Qt("skipAdCountdown",{duration:b});t.Qt("skipAd",{duration:b});return e(t)})},yh=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var o=arguments[e];for(var i in o)Object.prototype.hasOwnProperty.call(o,i)&&(t[i]=o[i])}return t},Ah="subtitle",wh="Module::Extension[vnSubtitles]",_h=function(t){var e=/^[^\S\n]*(.+)[^\S\n]*$/gm,o=/(\d+)\n([\d:.,]+)\s*-->\s*([\d:.,]+)\n((?:.|\n)+)/m,i=t.replace(e,"$1").replace(/\r/g,"\n").split("\n\n");Ln.b.trace(wh+" Total raw chunks: "+i.length);var r=i.map(function(t){var e=o.exec(t);if(!e){Ln.b.warn(wh+" Invalid data chunk ("+t+")");return null}return{id:e[1],startTime:Object(Xn.y)(e[2]),endTime:Object(Xn.y)(e[3]),text:e[4]}});Ln.b.trace(wh+" Total parsed objects: "+r.length);var n=r.filter(Boolean);Ln.b.trace(wh+" Total filtered objects: "+n.length);return n},Sh={srt:_h},Mh=function(t){Ln.b.trace(wh+".readSubtitles()");return new Promise(function(e){var o=t.querySelector("data");if(o){var i=Object(Xn.o)(o);Ln.b.trace(wh+" Using subtitles data from VAST");var r=o.getAttribute("type");if(!r)throw new Error("Data type is not defined");e({type:r,data:i})}else{var n=t.querySelector("url");if(!n)throw new Error('Neither "data" nor "url" provided');var a=Object(Xn.o)(n);Ln.b.trace(wh+" Fetching subtitles data from "+a);var s=n.getAttribute("type");if(!s)throw new Error("Url type is not defined");Object(Xn.F)(a).then(function(t){Ln.b.trace(wh+" Data loaded");e({type:s,data:t.target.responseText})}).catch(function(t){throw new Error("Data request error ("+t+")")})}})},Oh=function(t){var e=t.type,o=t.data;Ln.b.trace(wh+".parseSubtitles("+e+")");var i=Sh[e.toLowerCase()];if("function"!=typeof i){Ln.b.warn(wh+" Data type ("+e+") is not supported");return null}var r=i(o);if(!Array.isArray(r)){Ln.b.warn(wh+" Unable to parse data");return null}return r},Ih=function(t){Ln.b.trace(wh+".processSubtitles()");return Mh(t).then(Oh)},Eh=function(t){return new Promise(function(e){var o=t&&t.getAPI&&t.getAPI().logger||Ln.b;o.trace(""+wh);var i=t.yo(),r=i&&i.querySelector('Extension[type="vnSubtitles"]');if(r){o.trace(wh+" Init");Ih(r).then(function(e){t.subscribe(lr.bind(t),"AdLoaded");t.subscribe(cr.bind(t,e),"AdRemainingTimeChange");t.subscribe(dr.bind(t),"AdVideoComplete")}).catch(function(t){o.warn(wh+" "+t)}).then(function(){return e(t)})}else e(t)})},Dh=o(43),Ch=o.n(Dh),xh=o(44),Th=o.n(xh),Ph=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var o=arguments[e];for(var i in o)Object.prototype.hasOwnProperty.call(o,i)&&(t[i]=o[i])}return t},jh="vnAfterplay",kh="::Extension["+jh+"]",Rh=function(t){function e(o){ur(this,e);var i=o.module,r=i&&i.getAPI&&i.getAPI().logger||Ln.b,n=hr(this,t.call(this,{ancestor:kh,logger:r}));n.afterplayTimeoutId=null;n.Eo=!1;return n}pr(e,t);e.prototype.isActive=function(){return this.Eo};e.prototype.init=function(t){var e=this;return new Promise(function(o){t[jh]=e;var i=(t.te()||{})[jh];if(i){e.logger.trace(kh+" Init");t.Qt(jh,i,i.global)}i=t.M(jh,null,!1,function(t){return t.parsePoint});if(i){e.Q(t,"AdStopped",mr.bind(e,t,i));e.Q(t,"AdDestroyed",vr.bind(e));e.Eo=!0}o(t)})};e.prototype.S=function(){t.prototype.S.call(this)};return e}(ms.a),Fh=o(45),Nh=o.n(Fh),Vh=function(t){return new Promise(function(e){var o=t&&t.getAPI&&t.getAPI().logger||Ln.b;o.trace("::Extension[vnUnderplay]");var i=t.yo(),r=i&&i.querySelector('Extension[type="vnUnderplay"]');if(r){o.trace("::Extension[vnUnderplay] Init");var n=t.O("underplay")||Object(qn.b)(document.body,"div",{},"");n.addEventListener("click",function(e){e.preventDefault();Object(Xn.E)(r,"url > clickTracking");Object(Xn.v)(Object(Xn.o)(r,"url > url"));t.skipAd()});n.innerHTML=Object(Xn.o)(r,"html","");Object(qn.c)(n,{position:"fixed",zIndex:-1,top:0,right:0,bottom:0,left:0,width:"100%",height:"100%",transition:"opacity 500ms ease-out",color:Object(Xn.o)(r,"color"),backgroundColor:Object(Xn.o)(r,"bgColor"),backgroundImage:Object(Xn.o)(r,"bgImage"),backgroundSize:Object(Xn.o)(r,"bgPosition","cover"),opacity:Object(Xn.o)(r,"opacity","1")});var a=r&&r.querySelector("close");if(a){var s=a.getAttribute("img"),l=s?"":Nh.a,d=Object(qn.b)(n,"div",{position:"absolute",zIndex:1,top:a.getAttribute("top"),right:a.getAttribute("right"),bottom:a.getAttribute("bottom"),left:a.getAttribute("bottom"),width:a.getAttribute("width"),height:a.getAttribute("height"),backgroundSize:"cover",backgroundImage:"url("+(s||"")+")",cursor:"pointer"},l,function(){return t.skipAd()});d.addEventListener("touchstart",function(e){e.preventDefault();t.skipAd()});var c=Object(Xn.y)(a.getAttribute("time"))||t.M("skipAdCountdown","duration");if(c){o.trace("::Extension[vnUnderplay] Skip ad button disabled for "+c+" sec");Object(qn.c)(d,{display:"none"});var u=function(){if(this.getAdElapsedTime()>=c){Object(qn.c)(d,{display:""});t.unsubscribe(u,"AdRemainingTimeChange")}}.bind(t);t.subscribe(u,"AdRemainingTimeChange")}t.subscribe(function(){o.log("::Extension[vnUnderplay] Removing underplay");Object(qn.c)(n,{opacity:0});setTimeout(function(){Object(qn.u)(n)},500)},"AdDestroyed")}e(t)}else e(t)})},Lh=function(t){return new Promise(function(e){var o=t&&t.getAPI&&t.getAPI().logger||Ln.b;o.trace("::Extension[vnFormat]");var i=t.environmentVars,r=t.te(),n=i&&i.forceFormat&&i.forceFormat||r.vnFormat;n&&t.Qt("vnFormat",n,n.global);var a=t.M("vnFormat");if(a){o.trace("::Extension[vnFormat] Init");var s=a.name,l=a.options,d=t.options&&t.options.amp;if(d&&"contentroll"!==s.toLowerCase())throw new Error("::Extension[vnFormat] Failed to create format ("+s+") because only the ContentRoll format is available for amp");var c=i&&i.format&&i.format.options,u=Object(Xn.h)({},l,c);d&&(u.amp=!0);var h=md(t,s,u);t.Do(h)}e(t)})},zh="vnCache",Wh="::Extension["+zh+"]",Hh=function(t){return new Promise(function(e){(t&&t.getAPI&&t.getAPI().logger||Ln.b).trace(""+Wh);var o=(t.te()||{})[zh]||{},i=o.serverUrl,r=o.strict,n=o.global,a=o.important;(i||r||n||a)&&t.Qt(zh,{serverUrl:i,strict:r,important:a},n);e(t)})},Uh="vnCreative",Bh="Module::Extension["+Uh+"]",qh=function(t){return new Promise(function(e){var o=t&&t.getAPI&&t.getAPI().logger||Ln.b;o.trace(""+Bh);var i=(t.te()||{})[Uh]||{},r=function(e){var r=i[e]||{},n=r.url,a=r.important,s=r.global;if(void 0!==n){var l;t.Qt(Uh,(l={},l[e]={url:n,important:a},l),s);o.trace(Bh+" set control data "+e+":"+n+" global="+s)}};r("impression");r("debug");r("passed");r("select");e(t)})},Xh=o(46),Gh="vnNoAd",Yh="::Extension["+Gh+"]",Jh="Module::Extension[vnAdEvents]",Qh=function(t){function e(o){Ir(this,e);var i=o.module,r=i&&i.getAPI&&i.getAPI().logger||Ln.b;return Er(this,t.call(this,{ancestor:Jh,logger:r}))}Dr(e,t);e.prototype.init=function(t){var e=this;return new Promise(function(o){t.vnAdEvents=e;e.logger.trace(""+Jh);var i=t.te(),r=i&&i.vnAdEvents||{},n=r.global,a=r.handlerName,s=r.vnFunction,l=r.vnScriptUrl,d=r.events;(a||s||l||d&&d.length)&&t.Qt("vnAdEvents",{handlerName:a,vnFunction:s,vnScriptUrl:l,events:d},n);a=t.M("vnAdEvents","handlerName");d=t.M("vnAdEvents","events");s=t.M("vnAdEvents","vnFunction");l=t.M("vnAdEvents","vnScriptUrl");if(!l&&!s){a&&d.forEach(function(o){return e.Q(t,o,function(){window[a]&&window[a](t.moduleId,o)})});o(t)}})};return e}(ms.a),Zh=["AdLoaded","AdStarted","AdStopped","AdSkipped","AdSkippableStateChange","AdLinearChange","AdDurationChange","AdExpandedChange","AdVolumeChange","AdImpression","AdVideoStart","AdVideoFirstQuartile","AdVideoMidpoint","AdVideoThirdQuartile","AdInteraction","AdUserAcceptInvitation","AdUserMinimize","AdUserClose","AdPaused","AdResumed","AdPlaying","AdVideoComplete","AdClickThru","AdLog","AdError"],Kh="vnPageChanged",$h="::Extension["+Kh+"]",tp=function(t){function e(o){Tr(this,e);var i=o.module,r=i&&i.getAPI&&i.getAPI().logger||Ln.b,n=Pr(this,t.call(this,{ancestor:$h,logger:r}));n.module=i;return n}jr(e,t);e.prototype.init=function(){var t=this,e=this.module;return new Promise(function(o){e.vnPageChanged=t;t.logger.trace(""+$h);var i=e.te(),r=i&&i[Kh]||{},n=r.global,a=r.important,s=r.handlerName,l=r.eventName;s&&e.Qt(Kh,{handlerName:s,important:a},n);s=e.M(Kh,"handlerName");s&&(window[s]=function(){e.ee()});l&&e.Qt(Kh,{eventName:l,important:a},n);l=e.M(Kh,"eventName");l&&t.Y(window.document,l,function(){e.ee()});o(e)})};e.prototype.S=function(){t.prototype.S.call(this);var e=this.module,o=e.M(Kh,"handlerName");o&&delete window[o]};return e}(ms.a),ep="vnShowViqeo",op="::Extension["+ep+"]",ip=function(t){return new Promise(function(e){var o=t&&t.getAPI&&t.getAPI()||{};(o.logger||Ln.b).trace(""+op);var i=o.getLastParameters(),r=i.vnShowViqeo;if(r){o.setControlData("vnShowViqeo",{options:r.options},r.global)}e(t)})},rp=function(){function t(e,o){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:console;Nr(this,t);this.handler=o;this.timeout=e;this.log=i&&i.trace||console.log;this.id=null;this.startedTime=null;this.isStarted=!1;this.log(" InterruptibleTimeout constructor() timeout="+e)}t.prototype.start=function(){var t=this,e=this.timeout,o=this.handler;if(!this.startedTime&&e){this.log(" InterruptibleTimeout.start() global timeout starts with "+e);this.startedTime=Date.now();this.isStarted=!0;this.id=setTimeout(function(){t.stop();o()},e)}};t.prototype.pause=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"was paused",e=this.id,o=this.timeout,i=this.startedTime,r=this.handler,n=this.isStarted;if(e&&o&&i&&n){this.isStarted=!1;var a=Date.now()-i;this.startedTime=0;if(a){clearTimeout(e);this.timeout-=a;this.log(" InterruptibleTimeout.pause() global timeout "+t+". the rest of timeout is "+this.timeout+" dif="+a);if(this.timeout<=0){this.stop();r&&r()}}}};t.prototype.stop=function(){if(this.id){this.log(" InterruptibleTimeout stop()");this.S()}};t.prototype.S=function(){clearTimeout(this.id);this.isStarted=!1;this.timeout=0;this.id=null;this.log(" InterruptibleTimeout _destroy()")};return t}(),np=rp,ap="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},sp=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var o=arguments[e];for(var i in o)Object.prototype.hasOwnProperty.call(o,i)&&(t[i]=o[i])}return t},lp="Module",dp="ModuleGlobalRemainingTimeChangeTimeId",cp=500,up="ModuleStartAdTimerId",hp="vpaidInitAdTimeoutId",pp={vpaidInitAdTimeout:7e3,dataRequestTimeout:7e3,startAdTimeout:3e3,stopAdTimeout:1e3,skipAdTimeout:500,disableHoverAudio:!0,startingVolume:Gn.f||Gn.g?0:void 0,maxAds:1,beforeStopAdTimeout:700,minSlotWidthPercent:.4,adIgnoreSizeErrorState:!1,hideSpinnerControl:!1,hideTitleControl:!1,viqeoParentSlotClassName:"viqeo-parent-slot",listenWindowMessages:!1},fp=function(t){function e(o){Vr(this,e);var i=Math.random().toString(36).substring(2,5),r=Object(Ln.d)(Ln.c,function(){return"["+(new Date).toISOString().slice(11,-1)+"] ("+i+") "+lp}),n=Object(Ln.a)(Ln.c,r);n.log(".constructor()",2);var a=Lr(this,t.call(this,sp({},pp,o,{ancestor:lp,logger:n})));a.mainModuleId=i;a.startAdShouldBeInvoked=!1;a.adIgnoreSizeErrorState=a.options.adIgnoreSizeErrorState;a.subscribe(function(){a.Co-=1},"AdStarted");a.subscribe(function(t){a.logger.log(" @AdLog("+t+")")},"AdLog");a.subscribe(function(t,e){a.logger.error(" @AdError("+t+", "+e+")")},"AdError");a.pauseWasStartedByVPAID=!1;a.pausedWasStartedByVisibilityChange=!1;a.vpaid=null;a.data=[];a.ie=[];a.xo=new yd({destroyIframeAction:a.To.bind(a),logger:a.logger});a.lastPendingVolumeCommand=null;a.reachInventories={};a.Po={};a.re=!1;a.visibleInventoryWasSent=!1;a.ne=!1;a.ae=!1;a.logger.trace(".constructor() Processing plugins");mp.forEach(function(t){return t(a)});a.logger.trace(".constructor() Done");return a}zr(e,t);e.prototype.setOptions=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.savedOptions||(this.savedOptions=sp({},this.options));this.options=sp({},this.savedOptions,t);this.jo()};e.prototype.ko=function(t){var e=this;this.logger.trace("._updateOptionsFromVpaid options="+JSON.stringify(t,null,"\t")+" vpaid="+this.vpaid);if(t.format){this.format&&this.format.updateOptions&&this.format.updateOptions(t.format);delete t.format}this.options=sp({},this.options,t);var o=this.options,i=o.controlsActions,r=o.destroyControls;r&&r.forEach(function(t){return t&&e.Oo(t)});i&&i.forEach(function(t){var o=t.name,i=t.action,r=e.O(o);r&&i&&i(r)});if("startingVolume"in t){var n=t.startingVolume;0!==n&&!n||n===this.adVolume||this.setAdVolume(n)}this.jo()};e.prototype.jo=function(){var t=this.options.maxAds,e=this.options.startingVolume,o=!1!==this.options.isInsideTextContent;this.options.disableHoverAudio=void 0!==this.options.disableHoverAudio?this.options.disableHoverAudio:o;e=this.options.startingVolume=void 0!==e?e:o?0:1;var i="";try{i=JSON.stringify(this.options,function(t,e){return"logger"!==t?e:void 0})}catch(t){}this.logger.trace(" setOptions() isInsideTextContent="+o+" disableHoverAudio="+this.options.disableHoverAudio+" startingVolume="+e+" options="+i);this.Co=t;this.adVolume=e;this.options.listenWindowMessages&&!this.ue&&Sn.call(this)};e.prototype.toString=function(){return"[object "+this.constructor.name+"]"};e.prototype.initAd=function(e,o,i,r){var n=this,a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{},s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:{};this.logger.log(".initAd("+e+", "+o+", "+i+", "+a+", "+s+")",2);t.prototype.initAd.call(this,e,o,i,r,a,s);this.ne=!1;if(!this.adIgnoreSizeErrorState&&s.slot&&0!==e){var l=jn.call(this,e),d=l.error,c=l.message;d&&this.le(Tn(c),!1)}this.Ro=[];var u=s.disableExtensions;if(u)if(Array.isArray(u))this.Ro=u;else try{this.Ro=[].concat(JSON.parse(u))}catch(t){}An.call(this,this.environmentVars);this.setOptions();var h=a&&a.AdParameters||a,p="string"==typeof h,f=p&&Object(Xn.z)("?"+h.trim())||h||{},g=a.dataUrl||f.dataUrl,m=null,v=null,b=null;if(!p&&h.vnData){var y=JSON.parse(h.vnData);if(y.parameters){this.logger.log(".Getting parsed parameters from creativeData.AdParameters");b="string"==typeof y.parameters?JSON.parse(y.parameters):y.parameters}else if(y.key)try{this.logger.log(".Getting parsed parameters from sessionStorage by key "+y.key);b=JSON.parse(sessionStorage.getItem(y.key))}catch(t){}if(y.disableExtensions){this.Ro=this.Ro.concat(y.disableExtensions);this.logger.log("Got disableExtensions")}if(!b||!Array.isArray(b)){this.trigger("AdError",Vn.a.GENERAL_VPAID_ERROR,"Parsed parameters is not valid");this.S()}}else if(!p||g||f.dataXml)f.dataXml&&(m=Object(Xn.A)(f.dataXml));else try{v=JSON.parse(h)}catch(d){this.logger.log(".initAd() failed parse adParameters")}var A=this.options.timeout||a.timeout||f.timeout,w=void 0;if(A){w=this.globalTimeoutProvider=new np(A,Wr.bind(this),this.logger);this.nt(w);w.start()}var _=this.environmentVars||{},S=_.videoSlot,M=_.iframe,O=_.parentFormat;if(S){var I=S.style;this.Fo=I?{style:{width:I.width,height:I.height,position:I.position}}:null}this.parentFormat=O;var E=!!M;M&&this.logger.track(".initAd() iframe="+M);var D=this.re=S&&Object(qn.p)(S,"video");D&&this.Qt("videoSlot",{node:S});this.Qt("slot",{node:s.slot});this.Qt("iframe",{node:M});this.Qt("wrapper",{node:s.parentSlot});this.Qt("videoContainer",{node:s.videoContainer});this.logger.trace(".initAd() useExistsIframe="+E+" useExistsVideoSlot="+D);var C=s.format||{},x=C.name,T=void 0===x?"InStream":x,P=C.options;this.logger.trace(".initAd() Initializing format ("+T+")");var j=void 0;try{j=md(this,T,P);if(!j){this.logger.error(".initAd() Unable to initialize format ("+T+")");return}}catch(d){this.logger.warn(".initAd() Unable to initialize format ("+T+") "+d);return}this.logger.trace(".initAd() Processing data starting...");if(b){this.vnParsedParameters=b;this.data.push({dataXml:null,defaultAdXml:null,parameters:this.vnParsedParameters.shift()});this.logger.trace(".initAd() execute _processParsedTreeNode() with vnParsedParameters");this.No()}else if(v){this.logger.trace(".initAd() we have adParametersData");var k=this.Vo(v);this.data.push({dataXml:null,defaultAdXml:null,parameters:k});if(k){j&&this.Do(j);this.updateSafeInfo("",!0).then(function(){return n.Lo(k)})}else this.ce()}else if(m){this.logger.trace(".initAd() execute _processDataXml() with dataXml");this.Ao(m,j)}else if(g){this.logger.trace(".initAd() we have dataUrl="+g);w&&w.pause();this.updateSafeInfo(g).then(function(){return j.ye(g)}).then(function(t){w&&w.start();return t}).then(function(t){return n.ye(t,j)})}else this.logger.error(".initAd() Error: neither dataXml nor dataUrl nor adParametersData provided")};e.prototype.Vo=function(t){var e=t&&t.Media&&t.Media.MediaFiles;e&&(t.Media.MediaFiles=e.reduce(function(t,e){(t[e.type]||(t[e.type]=[])).push(e);return t},{}));t.Trackings||(t.Trackings={});var o=t.vnCreative,i=t.Trackings;o&&Object.keys(o).forEach(function(t){var e="vnCreative:"+t;o[t]&&(i[e]=[o[t]])});var r=t.ViewableImpression;r&&Object.keys(r).forEach(function(t){var e="ViewableImpression:"+t;r[t]&&(i[e]=r[t])});var n=t.vnControls;n&&!n.controls&&(t.vnControls={controls:n});return t};e.prototype.zo=function(t){if(!t||!t.querySelector){this.logger.warn(".processDataXml() Malformed data xml");this.ce();return null}var e=this.Ro,o={},i=t.querySelectorAll("Impression");i&&(o.Impression=Array.from(i).map(function(t){return Object(Xn.o)(t)}));var r=t.querySelector("Ad");o.id=r&&r.getAttribute("id");o.AdSystem=Object(Xn.o)(t,"AdSystem");o.ClickThrough=Object(Xn.o)(t,"ClickThrough");var n=t.querySelector("Wrapper");if(n){var a=Object(Xn.o)(n,"VASTAdTagURI");if(!a){this.logger.log("._parseDataXML() empty wrapperUrl",1);return null}o.wrapperUrl=a}o.vnControls=ir.call(this,t);o.vnFormat=br.call(this,t);o.vnCreative=Ar.call(this,t);o.vnNoAd=Mr.call(this,t);o.vnCreativeBlock=Xh.b.call(this,t);o.vnBrowserCache=rr.call(this,t);o.vnCache=yr.call(this,t);o.vnProhibitedWords=er.call(this,t);var s=o.extSkipTime=nr.call(this,t),l=ht(t);o.Media=sp({},l,s);var d=t.querySelectorAll("Tracking");o.Trackings=d&&Array.from(d).reduce(function(t,e){if(e){Fn(t,e.getAttribute("event"),Object(Xn.o)(e))}return t},{})||{};o.adParameters=Pn(t);o.Impression.forEach(function(t){return Fn(o.Trackings,"Impression",t)});this.Wo(t,o);var c=t.querySelectorAll("VideoClicks ClickTracking");c&&Array.from(c).forEach(function(t){Fn(o.Trackings,"ClickTracking",Object(Xn.o)(t))});var u=t.querySelectorAll('Extension[type="vnCreative"] > *');u&&Array.from(u).forEach(function(t){t.tagName&&Fn(o.Trackings,"vnCreative:"+t.tagName.toLowerCase(),Object(Xn.o)(t))});var h=t.querySelectorAll("ViewableImpression > *");h&&Array.from(h).forEach(function(t){t.tagName&&Fn(o.Trackings,"ViewableImpression:"+t.tagName.toLowerCase(),Object(Xn.o)(t))});var p=t.querySelectorAll('Tracking[event="progress"]');p&&Array.from(p).forEach(function(t){var e=Object(Xn.o)(t),i=t.getAttribute("offset"),r=Object(Xn.y)(i),n=Object(Xn.x)(i);Fn(o,"Progress",{url:e,offset:i,percentValue:n,timeValue:r})});o.vnAfterplay=gr.call(this,t);o.vnAdEvents=xr(t)||{};o.vnPageChanged=Rr(t)||{};e.indexOf("vnShowViqeo")<0&&(o.vnShowViqeo=Fr(t));return o};e.prototype.Wo=function(t,e){var o=arguments.length>2&&void 0!==arguments[2]&&arguments[2],i="vnVisibleInventory",r=t.querySelector('Extension[type="'+i+'"]'),n=r&&r.querySelectorAll("url"),a=n&&Array.from(n).map(function(t){return Object(Xn.o)(t)});if(a){var s;e&&Fn(e.Trackings,i,a);(o||Object(Xn.m)(r,"global"))&&this.Qt("Trackings",(s={},s[i]=a,s),!0)}return a};e.prototype.resizeAd=function(t,e){var o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this.viewMode;this.logger.trace(".resizeAd("+t+", "+e+", "+o+")");var i=Nn(this.adWidth,t)||Nn(this.adHeight,e);this.adWidth=t;this.adHeight=e;this.viewMode=o;var r=Rn.call(this,t,e);kn.call(this,t,e);var n=Object(Xn.j)(r),a=n.outsideHeight,s=n.offsetWidth,l=this.O("iframe");Object(qn.c)(l,{width:Object(Xn.u)(s),height:Object(Xn.u)(a)});i&&this.vpaid&&this.vpaid.resizeAd(t,e,o)};e.prototype.startAd=function(t){var e=this,o=t||{},i=o.checkVisibility;this.logger.log(".startAd() state="+this.state+" checkVisibility="+i,1);if(i){this.logger.trace(".startAd() starting with check visibility");this.startingWithCheckVisibility=!0;var r=this.format;this.Zt("starting");r&&r.ct&&r.ct()}else if(this.Ut(["loaded","complete"])||this.startingWithCheckVisibility&&this.Ut("starting")){this.startingWithCheckVisibility=!1;this.logger.trace(".startAd() starting");this.Zt("starting");var n=this.vpaid,a=this.options,s=a||{},l=s.startAdTimeout;if(l){this.logger.log(".startAd() start "+up+" for waiting @AdStarted "+l+" ms");this.rt(up,function(){e.logger.warn(".startAd() the waiting time for @AdStarted event has expired");n&&n.stopAd();e.ce()},l);n.subscribeOnce(function(){e.logger.trace(".startAd() Clearing "+up+" timeout",2);e.ot(up)},"AdStarted");n.subscribeOnce(function(){e.logger.warn(".startAd() vpaid.@AdError -> Clearing vpaid @AdStarted timeout");e.ot(up)},"AdError")}this.globalTimeoutProvider&&this.globalTimeoutProvider.start();n.startAd()}else{this.logger.trace(".startAd() postpone");this.startAdShouldBeInvoked=!0}};e.prototype.stopAd=function(){var t=this;this.logger.log(".stopAd()",1);this.Ut("stopped")||this.Zt("stopping");var e=this.vpaid,o=this.options;if(e)try{var i=o||{},r=i.stopAdTimeout;if(r){this.rt("ModuleStopAdTimerId",function(){t.logger.warn(".stopAd() the waiting time for @AdStopped event has expired, Force trigger @AdStopped");t.trigger("AdStopped")},r);e.subscribe(function(){t.logger.trace(".stopAd() Clearing vpaid @AdStopped timeout",2);t.ot("ModuleStopAdTimerId")},"AdStopped");e.subscribe(function(){t.logger.warn(".stopAd() vpaid.@AdError -> Clearing vpaid @AdStopped timeout");t.ot("ModuleStopAdTimerId")},"AdError")}e.stopAd()}catch(t){var n=t;if(!n.code||n.code<Vn.a.GENERAL_LINEAR_ERROR){n=new Error(t);n.code=Vn.a.VPAID_JS_ERROR}this.le(n);this.logger.error(".stopAd(): "+n)}};e.prototype.pauseAd=function(t){this.pausedWasStartedByVisibilityChange=!(!t||"onvisibilitychange"!==t.method.toLowerCase());this.logger.log(".pauseAd() pausedWasStartedByVisibilityChange="+this.pausedWasStartedByVisibilityChange,1);if(this.Ut(["playing","started"])){this.Zt("pausing");this.vpaid.pauseAd()}};e.prototype.resumeAd=function(){this.logger.log(".resumeAd()",1);if(this.Ut(["paused","pausing"])){this.Zt("resuming");this.vpaid.resumeAd()}};e.prototype.skipAd=function(){var t=this;this.logger.trace(".skipAd()");var e=this.getAdSkippableState();if(!this.Ut("skipping")&&e){var o=this.vpaid,i=this.options.skipAdTimeout;this.Zt("skipping");this.de();if(i){this.rt("ModuleSkipAdTimerId",function(){t.logger.warn(".skipAd() Timed out ("+i+") force trigger @AdSkipped");t.trigger("AdSkipped");qr.call(t)},i);o.subscribeOnce(function(){t.logger.trace(" @AdSkipped Clearing skipAd timeout");t.ot("ModuleSkipAdTimerId")},"AdSkipped")}o.skipAd()}};e.prototype.getAdRemainingTime=function(){return this.vpaid&&this.vpaid.getAdRemainingTime()||0};e.prototype.getAdDuration=function(){return this.adDuration||(this.vpaid?this.adDuration=this.vpaid.getAdDuration():0)};e.prototype.getAdAspectRatio=function(){return this.vpaid&&this.vpaid.getAdAspectRatio()||t.prototype.getAdAspectRatio.call(this)};e.prototype.setAdVolume=function(e,o){var i=o=sp({invoker:null},o),r=i.invoker,n=this.Ho("volume"),a=!r;this.logger.trace(" setAdVolume("+e+", params="+JSON.stringify(o,["step","invoker","smoothUpdate"])+") this.vpaid="+this.vpaid+" isOutsideRequest="+a+" this._useExistsVideoSlot="+this.re+" volumeControl="+n);if(this.re&&a&&n){n.cancelVolumeUpdate();this.logger.log(" make volumeControl.cancelVolumeUpdate() and vpaid.setAdVolume("+e+")")}var s=this.canChangeVolume();if(this.vpaid&&(!e||s)){this.vpaid.setAdVolume(e,o);return t.prototype.setAdVolume.call(this,e,o)}e&&!s&&this.logger.warn(" setAdVolume() attempt to set adVolume="+e+" was ignored (state="+this.state+")");this.logger.trace(" setAdVolume("+e+") as pending command");this.canChangeVolume()&&(this.lastPendingVolumeCommand=this.setAdVolume.bind(this,e,o))};e.prototype.S=function(){var e=this;if(!this.Ut(["destroying","destroyed"])){this.Zt("destroying");this.Uo();var o=this.vpaid,i=this.globalTimeoutProvider;o&&wp.forEach(function(t){return o.unsubscribeType(t)});this.de();this.ot(dp);i&&i.stop();this.logger.trace(".destroy() Destroying");this.subscribeOnce(function(){e.logger.trace(".destroy() Removing controls");e.ie=[];if(o){e.logger.trace(".destroy() Removing VPAID");o.subscribeOnce(function(){e.logger.trace(".destroy() VPAID removed");e.vpaid=null},"AdDestroyed");o.S();e.vnAdEvents&&e.vnAdEvents.S();e.vnPageChanged&&e.vnPageChanged.S()}e.format=null;e.data=[];e.Zt("destroyed");e.logger.log(".destroy() Destroyed",2)},"AdDestroyed");t.prototype.S.call(this)}};e.prototype.de=function(){var t=this.O("videoSlot");if(t&&this.Fo){var e=this.Fo.style;this.logger.trace("._restoreVideoSlotParams() styles="+JSON.stringify(e));e&&Object(qn.c)(t,e)}this.Fo=null};e.prototype.Bo=function(){this.logger.trace("._destroyControls()");this.ie.forEach(function(t){t.S()})};e.prototype.Oo=function(t){var e=this;this.ie=this.ie.filter(function(o){if(o.getName&&o.getName()===t){o.S();e.logger.trace(' _destroyControl(). Control "'+t+'" has been destroyed');return!1}return!0})};e.prototype.qo=function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],o=arguments.length>1&&void 0!==arguments[1]&&arguments[1],i=this.M("adSpectorControls"),r="1"===i;this.logger.log("._createControls() vpaidIsExternal="+e+" onlyInterfaceControls="+o+" adSpectorControlsValue="+i);this.Bo();var n=this.isVpaidCanvas(),a=e&&!r?bp.filter(function(e){var o=t.M(e.getName(),"enableWithVPAID");return"true"===o||"1"===o}):bp;if(this.re){this.logger.trace('._createControls() We have ready videoSlot, set css: {background: "none" } for container and videoContainer');this.Qt("container",{css:{background:"none"}});this.Qt("videoContainer",{css:{background:"none"}});["wrapper","container","videoContainer"].forEach(function(e){return t.Qt(e,{css:{zIndex:null}})})}var s=[].concat(vp);this.options.hideSpinnerControl||s.push(Gu);this.options.hideTitleControl||s.push(Kd);[].concat(o?[]:s,!this.re||e||n?[]:[Ku],a).forEach(function(e){try{var o=new e(t);t.ie.push(o)}catch(e){t.logger.none(""+(e&&e.message||e))}});yn.call(this)};e.prototype.Zt=function(t){this.logger.trace(".setState("+t+")");this.state=t};e.prototype.Ut=function(t){return-1!==[].concat(t).indexOf(this.state)};e.prototype.Do=function(t){this.logger.log(".setFormat("+t+")");this.format=t;this.To();Mn.call(this);var e=t.getModuleOptions();if(e){this.logger.trace("._setFormat() updateOptionsFromFormat options="+JSON.stringify(e,null,"\t"));this.setOptions(e)}t.subscribe(mn.bind(this),"vnFormatStateChanged",t);this.anckorElement=t.getAnchorElement&&t.getAnchorElement()};e.prototype.yo=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,e=this.data;if(!e||e.length<t)return null;var o=e[e.length-(t+1)];return o&&o.dataXml};e.prototype.te=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,e=this.data;if(!e||e.length<t)return null;var o=e[e.length-(t+1)];return o&&o.parameters};e.prototype.Xo=function(t){this.logger.trace(".preprocessDataUrl("+t+")");return Object(Xn.c)(yp,{url:t,module:this}).then(function(t){return t.url})};e.prototype.ye=function(t,e){var o=this;if(this.Ut(["destroying","destroyed"]))return null;t=this.replaceMacros(t);this.logger.log("._requestDataXml("+t+")");var i=this.options,r=i||{},n=r.dataRequestTimeout;return this.Xo(t).then(function(t){o.logger.trace("._requestDataXml(_preprocessDataUrl="+t+") ");Object(Xn.F)(t,{overrideMimeType:"text/xml",timeout:n}).then(function(i){o.logger.log("._requestDataXml("+t+") Data loaded");var r=i.target.responseXML||i.target.response&&(new DOMParser).parseFromString(i.target.response,"text/xml");o.Ao(r,e)}).catch(function(t){o.logger.warn("timeout"===t.type?"._requestDataXml() Data request timeout":"._requestDataXml() Data request error ("+t+")");o.ce()})})};e.prototype.Ao=function(t,e){this.logger.log(".processDataXml("+t+")");if(!this.Ut(["destroying","destroyed"]))if(t&&t.querySelector){if(e){e.hasReachInventoryFactory&&e.hasReachInventoryFactory()&&this.Wo(t,null,!0);this.Do(e)}var o=t.querySelector('Extension[type="vnDefaultAd"]');o&&o.parentNode.removeChild(o);var i=this.zo(t);this.data.push({dataXml:t,defaultAdXml:o,parameters:i});i?this.Lo(i):this.ce()}else{this.logger.warn(".processDataXml() Malformed data xml");this.ce()}};e.prototype.Lo=function(t){var e=this;this.logger.log("._processTreeNode() Processing custom extensions");this.xo.push();Object(Xn.g)(Ap,this).then(function(){e.Go();var o=t.wrapperUrl;if(o){e.logger.log("._processTreeNode() following VASTAdTagURI ("+o+"): updateSafeInfo(() -> format._requestDataXml() -> _requestDataXml()");var i=e.globalTimeoutProvider;i&&i.pause();e.updateSafeInfo(o).then(function(){return e.format.ye(e.replaceMacros(o))}).then(function(t){i&&i.start();return t}).then(e.ye.bind(e))}else{e.logger.log("._processTreeNode() VAST detected");e.format.Ae().then(e.Yo.bind(e)).catch(function(t){xn.call(e,t,"._vpaidInit() failed ");return!1})}}).catch(function(t){xn.call(e,t,"._processTreeNode(): One of custom extensions prevented start.")})};e.prototype.No=function(){var t=this,e=this.te();this.Ro&&this.Ro.forEach(function(t){delete e[t]});this.logger.log("._processParsedTreeNode() Processing custom extensions");this.xo.push();Object(Xn.g)(Ap,this).then(function(){t.Go();var o=e.wrapperUrl;if(o){t.logger.log("._processParsedTreeNode() following VASTAdTagURI ("+o+"): updateSafeInfo(() -> format._requestDataXml() -> _requestDataXml()");t.updateSafeInfo(o).then(function(){var e=t.vnParsedParameters.shift();t.data.push({dataXml:null,defaultAdXml:null,parameters:e});t.No()})}else{t.logger.log("._processParsedTreeNode() VAST detected");t.format.Ae().then(t.Yo.bind(t)).catch(function(e){xn.call(t,e,"._vpaidInit() failed ");return!1})}}).catch(function(e){xn.call(t,e,"._processParsedTreeNode(): One of custom extensions prevented start.")})};e.prototype.ce=function(){var t=this,e=this.options||{},o=e.canRunNoAd;this.logger.log(".failedData");this.ne=!1;if(this.Co<=0){this.logger.warn(".failedData() maxAds("+this.options.maxAds+") option exceeded");this.ee()}else{var i=null;do{var r=this.M("vnNoAd")||{};this.xo.pop();i=(this.data.pop()||{}).defaultAdXml;if(!this.data.length&&!i){this.logger.track(".failedData() No more defaultAd canRunNoAd="+o);this.le({code:Vn.a.GENERAL_VPAID_ERROR,message:"No playable sources found"});r&&!0===o?Or(this,r).catch(function(){t.ee()}):this.ee();return}}while(this.data.length&&!i);this.logger.log(".failedData() Processing next defaultAd",2);this.Ao(i)}};e.prototype.ee=function(t){this.format&&this.format.abort(t);this.S();this.trigger("AdError");_n.call(this,"NoAd")};e.prototype.$t=function(){var t=this.vpaid;t&&t.S&&t.S();this.vpaid=null;this.Yo()};e.prototype.Yo=function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];this.logger.log("._vpaidInit()");var o=this.te()||{},i=o.Media,r=o.adParameters;r&&(this.creativeData.AdParameters=r);this.logger.log(".vpaidInit() Creating VPAID instance");return this.Jo(i,r,e).then(function(e){t.logger.trace(".vpaidInit() Successfully created VPAID instance");t.vpaid=e;var o=e||{},i=o.adWidth,r=o.adHeight;e instanceof Kn&&!i&&!r&&e.getLinkedVpaid&&e.getLinkedVpaid().then(function(e){if(~e.toString().indexOf("VpaidExternalJs")){var o=t.format;o&&o.fullscreenSwitchOn&&o.fullscreenSwitchOn()}});t.logger.trace(".vpaidInit() Setting VPAID initial values");e.setAdExpanded(t.getAdExpanded());e.setAdSkippableState(t.getAdSkippableState());e.setAdVolume(t.getAdVolume());t.progressTrackingEvents=[];t.data.forEach(function(e){var o=e.parameters,i=o.Progress;i&&i.forEach(function(e){t.progressTrackingEvents.push(e)})});e.subscribe(t.Qo.bind(t),"AdRemainingTimeChange");e.subscribe(Hr.bind(t),"AdLoaded");e.subscribe(Ur.bind(t),"AdStarted");e.subscribe(Br.bind(t),"AdStopped");e.subscribe(qr.bind(t),"AdSkipped");e.subscribe(Xr.bind(t),"AdSkippableStateChange");e.subscribe(Gr.bind(t),"AdSizeChange");e.subscribe(Yr.bind(t),"AdLinearChange");e.subscribe(Jr.bind(t),"AdDurationChange");e.subscribe(Qr.bind(t),"AdExpandedChange");e.subscribe(Zr.bind(t),"AdRemainingTimeChange");e.subscribe(Kr.bind(t),"AdVolumeChange");e.subscribe($r.bind(t),"AdImpression");e.subscribe(tn.bind(t),"AdVideoStart");e.subscribe(en.bind(t),"AdVideoFirstQuartile");e.subscribe(on.bind(t),"AdVideoMidpoint");e.subscribe(rn.bind(t),"AdVideoThirdQuartile");e.subscribe(an.bind(t),"AdVideoComplete");e.subscribe(nn.bind(t),"AdVideoCompleteTrackOnly");e.subscribe(sn.bind(t),"AdClickThru");e.subscribe(ln.bind(t),"AdInteraction");e.subscribe(dn.bind(t),"AdUserAcceptInvitation");e.subscribe(cn.bind(t),"AdUserMinimize");e.subscribe(un.bind(t),"AdUserClose");e.subscribe(hn.bind(t),"AdPaused");e.subscribe(pn.bind(t),"AdPlaying");e.subscribe(fn.bind(t),"AdLog");e.subscribe(gn.bind(t),"AdError");wp.forEach(function(o){return e.subscribe(t.trigger.bind(t,o),o)});return e}).then(this.Zo.bind(this)).then(function(){return t.format.we()}).then(this.we.bind(this)).then(function(e){e.getModuleOptions&&e.getModuleOptions().then(function(e){e&&t.ko(e)});t.lastPendingVolumeCommand&&t.lastPendingVolumeCommand();t.lastPendingVolumeCommand=null;return e}).catch(function(e){if(e&&e.code===Vn.a.FAIL_MEDIA_START&&!t.Ut("destroyed")&&!t.Ut("destroying")){t.logger.track("._vpaidInit failed vpaid ("+t.vpaid+") init. Trying init reserved vpaid");t.Uo();t.vpaid&&t.vpaid.S();return t.Yo(!0)}throw e instanceof Error?e:Error(e)})};e.prototype.getAPI=function(){var t=this;return{getMainModuleId:function(){return t.mainModuleId},setControlData:this.Qt.bind(this),getControlData:this.M.bind(this),getControlUnionData:this.Jt.bind(this),getControlNode:this.O.bind(this),getControlInstance:this.Ho.bind(this),getLastParameters:this.te.bind(this),getOptions:function(){return sp({},t.options)},getEnvironmentVars:function(){return sp({},t.environmentVars)},extendEnvironmentVars:function(e){return Object(Xn.h)(t.environmentVars,e)},getAdWidth:function(){return t.getAdWidth()},getAdHeight:function(){return t.getAdHeight()},getIndents:this.Ko.bind(this),getVideoContainerIndents:this.$o.bind(this),getAdAspectRatio:this.getAdAspectRatio.bind(this),getAdSkippableState:this.getAdSkippableState.bind(this),setAdSkippableState:this.setAdSkippableState.bind(this),getAdRemainingTime:this.getAdRemainingTime.bind(this),getAdElapsedTime:this.getAdElapsedTime.bind(this),getAdDuration:this.getAdDuration.bind(this),resizeAd:this.resizeAd.bind(this),setWrapperSize:Rn.bind(this),inState:this.Ut.bind(this),startAd:this.startAd.bind(this),pauseAd:this.pauseAd.bind(this),resumeAd:this.resumeAd.bind(this),trackStrongUrls:function(e){return t.Kt(e)},addVPAIDEventListener:function(e,o){return(arguments.length>2&&void 0!==arguments[2]?arguments[2]:t).Q(t,e,o)},removeVPAIDEventListener:function(e,o){return(arguments.length>2&&void 0!==arguments[2]?arguments[2]:t).Z(t,e,o)},isVpaidJs:this.isVpaidJs.bind(this),trigger:this.trigger.bind(this),logger:this.logger}};e.prototype.Jo=function(t,e){var o=arguments.length>2&&void 0!==arguments[2]&&arguments[2];this.logger.log(".vpaidCreate("+t+") shouldCreateReserveVpaid="+o);return new fs(t,e,this,o).getVpaidPromise()};e.prototype.we=function(){var t=this;if(this.Ut(["destroying","destroyed"]))return Promise.reject();this.logger.log("._vpaidInitAd()");var e=this.viewMode,o=this.desiredBitrate,i=this.vpaid,r=this.format,n=this.options,a=n.vpaidInitAdTimeout,s=n.observeIframe,l=this.creativeData.AdParameters,d=this.environmentVars.videoSlotCanAutoPlay,c=this.O("iframe"),u=this.O(Xd),h=u||this.O("slot"),p=this.O("wrapper"),f=p||this.O("slot"),g=this.O("videoSlot"),m=getComputedStyle(p||h||c.contentWindow.document.body),v=m.paddingTop,b=m.paddingRight,y=m.paddingBottom,A=m.paddingLeft,w=this.environmentVars.forceAspectRatio,_=this.getAdWidth()||i.getAdWidth()||f.offsetWidth,S=this.getAdHeight()||i.getAdHeight()||_/1.77^0;isNaN(a)&&this.logger.warn(".vpaidInitAd() Invalid options.vpaidInitAdTimeout ("+a+")");this.logger.trace(".vpaidInitAd() with timeout "+a+"ms");this.ot(hp);this.rt(hp,function(){t.logger.warn(".vpaidInitAd() Call to vpaid.initAd() timed out");t.ce();t.vpaid=null},a);i.subscribe(function(){t.logger.trace(".vpaid @AdLoaded Clearing vpaidInitAd timeout",2);t.ot(hp)},"AdLoaded");i.subscribe(function(){t.logger.warn(".vpaid @AdError Clearing vpaidInitAd timeout");t.ot(hp)},"AdError");s&&this.ti(c,h);return i.initAd(_,S,e,o,{AdParameters:l},{top:v,right:b,bottom:y,left:A,iframe:c,slot:h,parentSlot:f,videoSlot:g,videoSlotCanAutoPlay:d,forceAspectRatio:w,videoContainer:u,useExistsVideoSlot:this.re,parentFormat:r})};e.prototype.ti=function(t,e){var o=this;if("undefined"!=typeof MutationObserver&&t&&e){var i=t.body||t.contentWindow.document.body,r=new MutationObserver(function(){if(!Object(qn.o)(e,i)){r.disconnect();var t=lp+" slot disappeared from DOM";o.logger.warn("._observeClearingIframe() "+t);o.trigger("AdError",Vn.a.VPAID_JS_ERROR,""+t);o.ce()}});r.observe(i,{childList:!0,attributes:!1,characterData:!1,subtree:!0});this.ei=r;this.logger.trace("Observing the slot in the iframe")}else this.logger.warn("Can not observe slot in the iframe (typeof MutationObserver="+("undefined"==typeof MutationObserver?"undefined":ap(MutationObserver))+" iframe="+t+" slot="+e+")")};e.prototype.Uo=function(){if(this.ei){this.logger.trace("._stopObserveIframe()");this.ei.disconnect();this.ei=null}};e.prototype.Zo=function(){var t=this;this.logger.trace("._initIframe()");var e=this.vpaid,o=this.parentFormat;this.vpaidIsExternal=e instanceof Bn;this.Uo();return new Promise(function(i){var r=t.O("slot");if(!Object(qn.p)(r))throw new Error("Invalid environmentVars.slot ("+r+")");var n=r.offsetWidth||parseInt(getComputedStyle(r).width,10)||0;if(!t.adIgnoreSizeErrorState){var a=jn.call(t,n),s=a.error,l=a.message;s&&t.le(Tn(l),!1)}var d=t.O("iframe");if(d)if(o){t.logger.trace(".initIframe() Reusing existing iframe. Iframe was created by VN Module and sent in initAd");d.setAttribute("allow","autoplay");var c=function(){var r=t.O("wrapper");if(r&&o){var n=r&&Object(Xn.j)(r)||{},a=n.paddingTop;a&&o.updateControlsLayout&&o.updateControlsLayout(a,!1,t.getAPI())}t.qo(t.vpaidIsExternal,!0);i(e)};d.contentDocument?c():d.addEventListener("load",c)}else{t.logger.trace(".initIframe() Reusing existing iframe. Iframe was created in this module and has not been destroyed because format has not been changed yet");var u=function(){t.qo(t.vpaidIsExternal,!1);i(e)};d.contentDocument?u():d.addEventListener("load",u)}else{var h=function(){this.logger.trace(".initIframe() @load");Object(qn.c)(d.contentDocument.documentElement,{minHeight:"100%"});Object(qn.c)(d.contentDocument.body,{minHeight:"100%",padding:0,margin:0,overflow:"hidden",fontFamily:"Arial, Helvetica, sans-serif",fontSize:"14px"});this.logger.trace(".initIframe() New iframe was created. Should creates all controls");this.qo(this.vpaidIsExternal);i(e)};t.logger.trace(".initIframe() Creating sandboxed iframe");d=document.createElement("iframe");var p={position:"relative",zIndex:1,width:"100%",height:"100%",padding:0,margin:0,border:"none",overflow:"hidden",maxWidth:"initial",maxHeight:"initial"};if(t.re){var f=t.O("videoSlot"),g=f.parentElement,m=g&&getComputedStyle(g).position,v="absolute"===m?m:"relative";Object(qn.c)(f,{position:v});"absolute"!==getComputedStyle(r).position&&Object(qn.c)(r,{position:"relative"});p.position="absolute";p.left=0;p.top=0;p.zIndex=null;t.logger.trace("._initIframe() We are using already exists videoSlot, set css: {position: 'absolute' } for iframe and { position: '"+v+"'} for videoSlot")}t.Qt("iframe",{node:d});Object(qn.c)(d,p);d.setAttribute("allow","autoplay");d.sandbox="allow-forms allow-same-origin allow-pointer-lock allow-scripts allow-popups allow-top-navigation";d.onload=h.bind(t);d.onerror=function(e){if(!Gn.c){console.error(e);throw new Error(lp+".initIframe() fail loading iframe")}h.call(t)};d.src="about:blank";r.appendChild(t.U(d))}})};e.prototype.To=function(){if(this.environmentVars&&this.environmentVars.iframe)return!1;var t=this.O("iframe");if(t){t.onload=null;this.X(t)}this.logger.trace(" _destroyIframe");this.Qt("iframe",{node:null});return!0};e.prototype.Ho=function(t){var e=this.ie.filter(function(e){return e.name===t})[0];void 0===e&&this.logger.none(".getControlInstance("+t+") Unable to find control ("+e+")");return e};e.prototype.M=function(t,e){return this.xo.getControlData(t,e,arguments.length>2&&void 0!==arguments[2]&&arguments[2],arguments[3])};e.prototype.Jt=function(t,e){return this.xo.getControlUnionData(t,e)};e.prototype.O=function(t){return this.xo.getControlNode(t)};e.prototype.Qt=function(t,e,o){return this.xo.setControlData(t,e,o)};e.prototype.po=function(t){var e=this;Object.keys(t).forEach(function(o){var i=e.M(o,"css"),r=t[o]||{};i=i?sp({},i,r):sp({},r);e.Qt(o,{css:i})})};e.prototype.Ko=function(){var t=this.O("wrapper");return Object(Xn.j)(t)};e.prototype.$o=function(){var t=this.O("videoContainer");return Object(Xn.j)(t)};e.prototype.Io=function(t){var e=this;if(!this.oi())return Promise.resolve();this.logger.track(".track("+t+")");return Promise.all(this.data.reduce(function(o,i){var r=i.dataXml;return o.concat(Object(Xn.E)(r,t,e.replaceMacros.bind(e)))},[]))};e.prototype.oe=function(t){var e=this;if(!this.oi())return Promise.resolve();this.logger.track(".trackUrls("+t+")");return Promise.all(this.data.reduce(function(o,i){var r=i.parameters;return r.Trackings&&r.Trackings[t]&&o.concat(Object(Xn.D)(r.Trackings[t],e.replaceMacros.bind(e)))||o},[]))};e.prototype.Mo=function(t){if(!this.oi())return null;this.logger.none("._getLastExistsTrackUrl("+t+")");var e=this.data.reduceRight(function(e,o){var i=o.parameters;return e||i.Trackings&&i.Trackings[t]},null);return e&&e.length?e[0]:null};e.prototype.ii=function(t){var e=this.Mo(t);return e?Object(Xn.C)(this.replaceMacros(e)):Promise.resolve()};e.prototype.Kt=function(t){if(!this.oi())return Promise.resolve();this.logger.track("._trackStrongUrls ("+(t&&t.length)+")");return Promise.all(Object(Xn.D)(t,this.replaceMacros.bind(this)))};e.prototype.le=function(t,e){var o=this;if(this.oi()){var i=t.code,r=t.message,n=t.format,a=function(t){return t&&Object(Xn.C)(t.replace("[ERRORCODE]",encodeURIComponent(i)).replace("[MESSAGE]",encodeURIComponent(r)))},s=function(){return e&&o.trigger("AdError",r)};if(i===Vn.a.FORMAT_ERROR&&n&&!this.Po[n]){this.Po[n]=!0;s()}var l=function(t,e){var o=t.dataXml&&t.dataXml.querySelectorAll(e);o&&Array.from(o).forEach(function(t){return a(Object(Xn.o)(t))})};this.data.forEach(function(t){l(t,"Ad>InLine>Error");l(t,"Ad>Wrapper>Error")});s()}};e.prototype.Qo=function(){var t=this,e=this.getAdDuration(),o=this.getAdRemainingTime(),i=e-o,r=i/e,n=this.progressValue;this.progressTrackingEvents.forEach(function(o){var i=o.offset,a=void 0!==o.timeValue?o.timeValue/e:o.percentValue;if(void 0!==a&&r>=a&&(void 0===n||n<a)){t.logger.track(".trackProgress("+i+")");o&&Object(Xn.C)(o.url)}});this.progressValue=r};e.prototype.oi=function(){return!this.M("vnShowViqeo")};e.prototype.isMediaUrlBlocked=function(t){var e=this.M("vnCreativeBlock","urls");if(!e)return!1;var o=Object.keys(e).some(function(o){return t.split("?")[0].replace(/^(https*:)*\/\//,"").toLowerCase()===e[o]});o&&this.logger.track(" isMediaBlocked() "+t+" has been blocked");return o};e.prototype.setSelectedCreative=function(t,e){var o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,i=encodeURIComponent(t);i&&(this.se=i);o=o&&o.replace&&o.replace(/[\t\n\r ]/gi,"");this.Qt("vnMacros",{"[ASSETURI]":i,"[ASSETDURATION]":e,"[ASSETADPARAMS]":o});if(this.oi()){var r=this.Mo("vnCreative:select");this.logger.track(" vnCreative:select post("+r+")");r&&Object(Xn.C)(this.replaceMacros(r))}};e.prototype.Go=function(){if(this.oi()){var t=this.te()||{},e=t.Trackings,o=e&&e["vnCreative:passed"];o&&this.Kt(o)}};e.prototype.postDebug=function(t,e){this.logger.track(" vnCreative:debug post("+e+")");if(e){e=this.replaceMacros(e);var o=this.M("vnMacros"),i=o&&o["[ASSETADPARAMS]"]||this.M("vnMacros","[ASSETADPARAMS]"),r=o&&o["[ASSETURI]"]||this.M("vnMacros","[ASSETURI]"),n=this.yo(),a=this.format&&this.format.getModuleNode&&this.format.getModuleNode(),s=Object(qn.p)(a)&&a.outerHTML||"",l=this.O("iframe"),d=l&&l.contentWindow&&l.contentWindow.document&&l.contentWindow.document.body.outerHTML||"",c=this.O("videoContainer"),u=c&&Array.from(c.querySelectorAll("iframe")).map(function(t){try{return t.contentWindow.document.body.outerHTML}catch(t){return null}});Object(Xn.F)(e,{method:"POST",requestHeaders:{"Content-Type":"application/json"},body:JSON.stringify({id:t,log:Ln.b.archive.join("\n"),vast:n&&(n.innerHTML||n.documentElement.innerHTML),params:i,media:r,node:s,iframe:d,iframes:u&&u.length?u.filter(function(t){return!!t}):[]})})}};e.prototype.postImpressionData=function(){var t=this.Mo("vnCreative:impression");this.logger.track(" vnCreative:impression post("+t+")");if(t){t=this.replaceMacros(t);var e=this.M("vnMacros"),o=e&&e["[ASSETADPARAMS]"]||this.M("vnMacros","[ASSETADPARAMS]"),i=e&&e["[ASSETURI]"]||this.M("vnMacros","[ASSETURI]"),r=e&&e["[ASSETDURATION]"]||this.M("vnMacros","[ASSETDURATION]"),n=this.yo(),a=n&&Object(Xn.m)(n,"VideoClicks > ClickThrough","");Object(Xn.F)(t,{method:"POST",requestHeaders:{"Content-Type":"application/json"},body:JSON.stringify({params:o,duration:r,media:i,clickthrough:a})})}};e.prototype.replaceMacros=function(t){var e=this.M("vnMacros");return e?Object.keys(e).reduce(function(t,o){return t.replace(o,e[o])},t):t};e.prototype.updateSafeInfo=function(t){var e=this,o=arguments.length>1&&void 0!==arguments[1]&&arguments[1],i=new Date;if(!(o||t&&/(\[LOCATION]|\[SIZE]|\[SQUARE]|\[VISIBILITY])/.test(t)))return Promise.resolve();var r=void 0;try{var n=Object(Xn.p)(window,document);this.Qt("vnMacros",{"[LOCATION]":n?encodeURIComponent(n):"null","[SIZE]":"null","[SQUARE]":"null","[VISIBILITY]":"null"});var a=this.environmentVars,s=a.videoSlot,l=a.slot,d=this.format;if(["InStream","ViqeoPlayerRoll"].indexOf(d&&d.toString().slice(8,-1))<0)return Promise.resolve();var c=this.O("iframe"),u=this.O("videoContainer");r=s&&s.clientHeight?s:l&&l.clientHeight?l:u&&u.clientHeight?u:c&&c.clientHeight?c:null;if(!r)return Promise.resolve()}catch(t){this.logger.error(" "+(t&&(t.message||t)));return Promise.resolve()}return Xn.q.call(this,r).then(function(t){if(t){e.Qt("vnMacros",{"[SQUARE]":t.moduleSquare});e.Qt("vnMacros",{"[VISIBILITY]":t.visibility});e.Qt("vnMacros",{"[SIZE]":t.relationSize})}e.logger.log(".updateSafeInfo = "+(new Date-i)+" data="+(t&&JSON.stringify(t)),1);return t})};e.prototype.canChangeVolume=function(){this.logger.none(" canChangeVolume(): this.state="+this.state);return this.Ut(["started","playing","paused","loaded"])};e.prototype.vpaidJsVideoSlotShouldBeMuted=function(){return this.options&&this.options.vpaidJsVideoSlotShouldBeMuted};e.prototype.isVpaidJs=function(){return this.vpaid&&~this.vpaid.toString().indexOf("VpaidJs")};e.prototype.isVpaidCanvas=function(){return this.vpaid&&~this.vpaid.toString().indexOf("VpaidCanvas")};e.prototype.getAnchorElement=function(){return this.anckorElement};return e}(Vn.b),gp=fp,mp=[Ad,_d,Od,Id,Rd],vp=[zd,Bd,Gd],bp=[bc,ac,yc.a,Cc,Fc,Wc,Kc,Au,Ru,Hu],yp=[th,ih,rh],Ap=[sh,lh,uh,vh,fh,bh,Eh,fr,Vh,Lh,Hh,qh,Xh.a,Sr,Cr,kr,ip],wp=["AdLoaded","AdStarted","AdStopped","AdSkipped","AdSkippableStateChange","AdSizeChange","AdLinearChange","AdDurationChange","AdExpandedChange","AdRemainingTimeChange","AdVolumeChange","AdImpression","AdVideoStart","AdVideoFirstQuartile","AdVideoMidpoint","AdVideoThirdQuartile","AdInteraction","AdUserAcceptInvitation","AdUserMinimize","AdUserClose","AdPaused","AdResumed","AdPlaying","AdAudioDisabled","AdLoadedVideoData","slotSizeChanged"],_p=void 0;window.createVPAIDAd=function(t){Ln.b.log("Requested new module instance via window.createVPAIDAd()");_p=new gp(t);return _p};window.getVPAIDAd=function(t){Ln.b.log("Requested module instance via window.getVPAIDAd()");_p=_p||new gp(t);return _p}},function(t,e,o){e.glMatrix=o(7);e.mat2=o(26);e.mat2d=o(27);e.mat3=o(19);e.mat4=o(28);e.quat=o(29);e.vec2=o(30);e.vec3=o(20);e.vec4=o(21)},function(t,e,o){var i=o(7),r={};r.create=function(){var t=new i.ARRAY_TYPE(4);t[0]=1;t[1]=0;t[2]=0;t[3]=1;return t};r.clone=function(t){var e=new i.ARRAY_TYPE(4);e[0]=t[0];e[1]=t[1];e[2]=t[2];e[3]=t[3];return e};r.copy=function(t,e){t[0]=e[0];t[1]=e[1];t[2]=e[2];t[3]=e[3];return t};r.identity=function(t){t[0]=1;t[1]=0;t[2]=0;t[3]=1;return t};r.fromValues=function(t,e,o,r){var n=new i.ARRAY_TYPE(4);n[0]=t;n[1]=e;n[2]=o;n[3]=r;return n};r.set=function(t,e,o,i,r){t[0]=e;t[1]=o;t[2]=i;t[3]=r;return t};r.transpose=function(t,e){if(t===e){var o=e[1];t[1]=e[2];t[2]=o}else{t[0]=e[0];t[1]=e[2];t[2]=e[1];t[3]=e[3]}return t};r.invert=function(t,e){var o=e[0],i=e[1],r=e[2],n=e[3],a=o*n-r*i;if(!a)return null;a=1/a;t[0]=n*a;t[1]=-i*a;t[2]=-r*a;t[3]=o*a;return t};r.adjoint=function(t,e){var o=e[0];t[0]=e[3];t[1]=-e[1];t[2]=-e[2];t[3]=o;return t};r.determinant=function(t){return t[0]*t[3]-t[2]*t[1]};r.multiply=function(t,e,o){var i=e[0],r=e[1],n=e[2],a=e[3],s=o[0],l=o[1],d=o[2],c=o[3];t[0]=i*s+n*l;t[1]=r*s+a*l;t[2]=i*d+n*c;t[3]=r*d+a*c;return t};r.mul=r.multiply;r.rotate=function(t,e,o){var i=e[0],r=e[1],n=e[2],a=e[3],s=Math.sin(o),l=Math.cos(o);t[0]=i*l+n*s;t[1]=r*l+a*s;t[2]=i*-s+n*l;t[3]=r*-s+a*l;return t};r.scale=function(t,e,o){var i=e[0],r=e[1],n=e[2],a=e[3],s=o[0],l=o[1];t[0]=i*s;t[1]=r*s;t[2]=n*l;t[3]=a*l;return t};r.fromRotation=function(t,e){var o=Math.sin(e),i=Math.cos(e);t[0]=i;t[1]=o;t[2]=-o;t[3]=i;return t};r.fromScaling=function(t,e){t[0]=e[0];t[1]=0;t[2]=0;t[3]=e[1];return t};r.str=function(t){return"mat2("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+")"};r.frob=function(t){return Math.sqrt(Math.pow(t[0],2)+Math.pow(t[1],2)+Math.pow(t[2],2)+Math.pow(t[3],2))};r.LDU=function(t,e,o,i){t[2]=i[2]/i[0];o[0]=i[0];o[1]=i[1];o[3]=i[3]-t[2]*o[1];return[t,e,o]};r.add=function(t,e,o){t[0]=e[0]+o[0];t[1]=e[1]+o[1];t[2]=e[2]+o[2];t[3]=e[3]+o[3];return t};r.subtract=function(t,e,o){t[0]=e[0]-o[0];t[1]=e[1]-o[1];t[2]=e[2]-o[2];t[3]=e[3]-o[3];return t};r.sub=r.subtract;r.exactEquals=function(t,e){return t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]&&t[3]===e[3]};r.equals=function(t,e){var o=t[0],r=t[1],n=t[2],a=t[3],s=e[0],l=e[1],d=e[2],c=e[3];return Math.abs(o-s)<=i.EPSILON*Math.max(1,Math.abs(o),Math.abs(s))&&Math.abs(r-l)<=i.EPSILON*Math.max(1,Math.abs(r),Math.abs(l))&&Math.abs(n-d)<=i.EPSILON*Math.max(1,Math.abs(n),Math.abs(d))&&Math.abs(a-c)<=i.EPSILON*Math.max(1,Math.abs(a),Math.abs(c))};r.multiplyScalar=function(t,e,o){t[0]=e[0]*o;t[1]=e[1]*o;t[2]=e[2]*o;t[3]=e[3]*o;return t};r.multiplyScalarAndAdd=function(t,e,o,i){t[0]=e[0]+o[0]*i;t[1]=e[1]+o[1]*i;t[2]=e[2]+o[2]*i;t[3]=e[3]+o[3]*i;return t};t.exports=r},function(t,e,o){var i=o(7),r={};r.create=function(){var t=new i.ARRAY_TYPE(6);t[0]=1;t[1]=0;t[2]=0;t[3]=1;t[4]=0;t[5]=0;return t};r.clone=function(t){var e=new i.ARRAY_TYPE(6);e[0]=t[0];e[1]=t[1];e[2]=t[2];e[3]=t[3];e[4]=t[4];e[5]=t[5];return e};r.copy=function(t,e){t[0]=e[0];t[1]=e[1];t[2]=e[2];t[3]=e[3];t[4]=e[4];t[5]=e[5];return t};r.identity=function(t){t[0]=1;t[1]=0;t[2]=0;t[3]=1;t[4]=0;t[5]=0;return t};r.fromValues=function(t,e,o,r,n,a){var s=new i.ARRAY_TYPE(6);s[0]=t;s[1]=e;s[2]=o;s[3]=r;s[4]=n;s[5]=a;return s};r.set=function(t,e,o,i,r,n,a){t[0]=e;t[1]=o;t[2]=i;t[3]=r;t[4]=n;t[5]=a;return t};r.invert=function(t,e){var o=e[0],i=e[1],r=e[2],n=e[3],a=e[4],s=e[5],l=o*n-i*r;if(!l)return null;l=1/l;t[0]=n*l;t[1]=-i*l;t[2]=-r*l;t[3]=o*l;t[4]=(r*s-n*a)*l;t[5]=(i*a-o*s)*l;return t};r.determinant=function(t){return t[0]*t[3]-t[1]*t[2]};r.multiply=function(t,e,o){var i=e[0],r=e[1],n=e[2],a=e[3],s=e[4],l=e[5],d=o[0],c=o[1],u=o[2],h=o[3],p=o[4],f=o[5];t[0]=i*d+n*c;t[1]=r*d+a*c;t[2]=i*u+n*h;t[3]=r*u+a*h;t[4]=i*p+n*f+s;t[5]=r*p+a*f+l;return t};r.mul=r.multiply;r.rotate=function(t,e,o){var i=e[0],r=e[1],n=e[2],a=e[3],s=e[4],l=e[5],d=Math.sin(o),c=Math.cos(o);t[0]=i*c+n*d;t[1]=r*c+a*d;t[2]=i*-d+n*c;t[3]=r*-d+a*c;t[4]=s;t[5]=l;return t};r.scale=function(t,e,o){var i=e[0],r=e[1],n=e[2],a=e[3],s=e[4],l=e[5],d=o[0],c=o[1];t[0]=i*d;t[1]=r*d;t[2]=n*c;t[3]=a*c;t[4]=s;t[5]=l;return t};r.translate=function(t,e,o){var i=e[0],r=e[1],n=e[2],a=e[3],s=e[4],l=e[5],d=o[0],c=o[1];t[0]=i;t[1]=r;t[2]=n;t[3]=a;t[4]=i*d+n*c+s;t[5]=r*d+a*c+l;return t};r.fromRotation=function(t,e){var o=Math.sin(e),i=Math.cos(e);t[0]=i;t[1]=o;t[2]=-o;t[3]=i;t[4]=0;t[5]=0;return t};r.fromScaling=function(t,e){t[0]=e[0];t[1]=0;t[2]=0;t[3]=e[1];t[4]=0;t[5]=0;return t};r.fromTranslation=function(t,e){t[0]=1;t[1]=0;t[2]=0;t[3]=1;t[4]=e[0];t[5]=e[1];return t};r.str=function(t){return"mat2d("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+", "+t[4]+", "+t[5]+")"};r.frob=function(t){return Math.sqrt(Math.pow(t[0],2)+Math.pow(t[1],2)+Math.pow(t[2],2)+Math.pow(t[3],2)+Math.pow(t[4],2)+Math.pow(t[5],2)+1)};r.add=function(t,e,o){t[0]=e[0]+o[0];t[1]=e[1]+o[1];t[2]=e[2]+o[2];t[3]=e[3]+o[3];t[4]=e[4]+o[4];t[5]=e[5]+o[5];return t};r.subtract=function(t,e,o){t[0]=e[0]-o[0];t[1]=e[1]-o[1];t[2]=e[2]-o[2];t[3]=e[3]-o[3];t[4]=e[4]-o[4];t[5]=e[5]-o[5];return t};r.sub=r.subtract;r.multiplyScalar=function(t,e,o){t[0]=e[0]*o;t[1]=e[1]*o;t[2]=e[2]*o;t[3]=e[3]*o;t[4]=e[4]*o;t[5]=e[5]*o;return t};r.multiplyScalarAndAdd=function(t,e,o,i){t[0]=e[0]+o[0]*i;t[1]=e[1]+o[1]*i;t[2]=e[2]+o[2]*i;t[3]=e[3]+o[3]*i;t[4]=e[4]+o[4]*i;t[5]=e[5]+o[5]*i;return t};r.exactEquals=function(t,e){return t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]&&t[3]===e[3]&&t[4]===e[4]&&t[5]===e[5]};r.equals=function(t,e){var o=t[0],r=t[1],n=t[2],a=t[3],s=t[4],l=t[5],d=e[0],c=e[1],u=e[2],h=e[3],p=e[4],f=e[5];return Math.abs(o-d)<=i.EPSILON*Math.max(1,Math.abs(o),Math.abs(d))&&Math.abs(r-c)<=i.EPSILON*Math.max(1,Math.abs(r),Math.abs(c))&&Math.abs(n-u)<=i.EPSILON*Math.max(1,Math.abs(n),Math.abs(u))&&Math.abs(a-h)<=i.EPSILON*Math.max(1,Math.abs(a),Math.abs(h))&&Math.abs(s-p)<=i.EPSILON*Math.max(1,Math.abs(s),Math.abs(p))&&Math.abs(l-f)<=i.EPSILON*Math.max(1,Math.abs(l),Math.abs(f))};t.exports=r},function(t,e,o){var i=o(7),r={scalar:{},SIMD:{}};r.create=function(){var t=new i.ARRAY_TYPE(16);t[0]=1;t[1]=0;t[2]=0;t[3]=0;t[4]=0;t[5]=1;t[6]=0;t[7]=0;t[8]=0;t[9]=0;t[10]=1;t[11]=0;t[12]=0;t[13]=0;t[14]=0;t[15]=1;return t};r.clone=function(t){var e=new i.ARRAY_TYPE(16);e[0]=t[0];e[1]=t[1];e[2]=t[2];e[3]=t[3];e[4]=t[4];e[5]=t[5];e[6]=t[6];e[7]=t[7];e[8]=t[8];e[9]=t[9];e[10]=t[10];e[11]=t[11];e[12]=t[12];e[13]=t[13];e[14]=t[14];e[15]=t[15];return e};r.copy=function(t,e){t[0]=e[0];t[1]=e[1];t[2]=e[2];t[3]=e[3];t[4]=e[4];t[5]=e[5];t[6]=e[6];t[7]=e[7];t[8]=e[8];t[9]=e[9];t[10]=e[10];t[11]=e[11];t[12]=e[12];t[13]=e[13];t[14]=e[14];t[15]=e[15];return t};r.fromValues=function(t,e,o,r,n,a,s,l,d,c,u,h,p,f,g,m){var v=new i.ARRAY_TYPE(16);v[0]=t;v[1]=e;v[2]=o;v[3]=r;v[4]=n;v[5]=a;v[6]=s;v[7]=l;v[8]=d;v[9]=c;v[10]=u;v[11]=h;v[12]=p;v[13]=f;v[14]=g;v[15]=m;return v};r.set=function(t,e,o,i,r,n,a,s,l,d,c,u,h,p,f,g,m){t[0]=e;t[1]=o;t[2]=i;t[3]=r;t[4]=n;t[5]=a;t[6]=s;t[7]=l;t[8]=d;t[9]=c;t[10]=u;t[11]=h;t[12]=p;t[13]=f;t[14]=g;t[15]=m;return t};r.identity=function(t){t[0]=1;t[1]=0;t[2]=0;t[3]=0;t[4]=0;t[5]=1;t[6]=0;t[7]=0;t[8]=0;t[9]=0;t[10]=1;t[11]=0;t[12]=0;t[13]=0;t[14]=0;t[15]=1;return t};r.scalar.transpose=function(t,e){if(t===e){var o=e[1],i=e[2],r=e[3],n=e[6],a=e[7],s=e[11];t[1]=e[4];t[2]=e[8];t[3]=e[12];t[4]=o;t[6]=e[9];t[7]=e[13];t[8]=i;t[9]=n;t[11]=e[14];t[12]=r;t[13]=a;t[14]=s}else{t[0]=e[0];t[1]=e[4];t[2]=e[8];t[3]=e[12];t[4]=e[1];t[5]=e[5];t[6]=e[9];t[7]=e[13];t[8]=e[2];t[9]=e[6];t[10]=e[10];t[11]=e[14];t[12]=e[3];t[13]=e[7];t[14]=e[11];t[15]=e[15]}return t};r.SIMD.transpose=function(t,e){var o,i,r,n,a,s,l,d,c,u;o=SIMD.Float32x4.load(e,0);i=SIMD.Float32x4.load(e,4);r=SIMD.Float32x4.load(e,8);n=SIMD.Float32x4.load(e,12);a=SIMD.Float32x4.shuffle(o,i,0,1,4,5);s=SIMD.Float32x4.shuffle(r,n,0,1,4,5);l=SIMD.Float32x4.shuffle(a,s,0,2,4,6);d=SIMD.Float32x4.shuffle(a,s,1,3,5,7);SIMD.Float32x4.store(t,0,l);SIMD.Float32x4.store(t,4,d);a=SIMD.Float32x4.shuffle(o,i,2,3,6,7);s=SIMD.Float32x4.shuffle(r,n,2,3,6,7);c=SIMD.Float32x4.shuffle(a,s,0,2,4,6);u=SIMD.Float32x4.shuffle(a,s,1,3,5,7);SIMD.Float32x4.store(t,8,c);SIMD.Float32x4.store(t,12,u);return t};r.transpose=i.USE_SIMD?r.SIMD.transpose:r.scalar.transpose;r.scalar.invert=function(t,e){var o=e[0],i=e[1],r=e[2],n=e[3],a=e[4],s=e[5],l=e[6],d=e[7],c=e[8],u=e[9],h=e[10],p=e[11],f=e[12],g=e[13],m=e[14],v=e[15],b=o*s-i*a,y=o*l-r*a,A=o*d-n*a,w=i*l-r*s,_=i*d-n*s,S=r*d-n*l,M=c*g-u*f,O=c*m-h*f,I=c*v-p*f,E=u*m-h*g,D=u*v-p*g,C=h*v-p*m,x=b*C-y*D+A*E+w*I-_*O+S*M;if(!x)return null;x=1/x;t[0]=(s*C-l*D+d*E)*x;t[1]=(r*D-i*C-n*E)*x;t[2]=(g*S-m*_+v*w)*x;t[3]=(h*_-u*S-p*w)*x;t[4]=(l*I-a*C-d*O)*x;t[5]=(o*C-r*I+n*O)*x;t[6]=(m*A-f*S-v*y)*x;t[7]=(c*S-h*A+p*y)*x;t[8]=(a*D-s*I+d*M)*x;t[9]=(i*I-o*D-n*M)*x;t[10]=(f*_-g*A+v*b)*x;t[11]=(u*A-c*_-p*b)*x;t[12]=(s*O-a*E-l*M)*x;t[13]=(o*E-i*O+r*M)*x;t[14]=(g*y-f*w-m*b)*x;t[15]=(c*w-u*y+h*b)*x;return t};r.SIMD.invert=function(t,e){var o,i,r,n,a,s,l,d,c,u,h=SIMD.Float32x4.load(e,0),p=SIMD.Float32x4.load(e,4),f=SIMD.Float32x4.load(e,8),g=SIMD.Float32x4.load(e,12);a=SIMD.Float32x4.shuffle(h,p,0,1,4,5);i=SIMD.Float32x4.shuffle(f,g,0,1,4,5);o=SIMD.Float32x4.shuffle(a,i,0,2,4,6);i=SIMD.Float32x4.shuffle(i,a,1,3,5,7);a=SIMD.Float32x4.shuffle(h,p,2,3,6,7);n=SIMD.Float32x4.shuffle(f,g,2,3,6,7);r=SIMD.Float32x4.shuffle(a,n,0,2,4,6);n=SIMD.Float32x4.shuffle(n,a,1,3,5,7);a=SIMD.Float32x4.mul(r,n);a=SIMD.Float32x4.swizzle(a,1,0,3,2);s=SIMD.Float32x4.mul(i,a);l=SIMD.Float32x4.mul(o,a);a=SIMD.Float32x4.swizzle(a,2,3,0,1);s=SIMD.Float32x4.sub(SIMD.Float32x4.mul(i,a),s);l=SIMD.Float32x4.sub(SIMD.Float32x4.mul(o,a),l);l=SIMD.Float32x4.swizzle(l,2,3,0,1);a=SIMD.Float32x4.mul(i,r);a=SIMD.Float32x4.swizzle(a,1,0,3,2);s=SIMD.Float32x4.add(SIMD.Float32x4.mul(n,a),s);c=SIMD.Float32x4.mul(o,a);a=SIMD.Float32x4.swizzle(a,2,3,0,1);s=SIMD.Float32x4.sub(s,SIMD.Float32x4.mul(n,a));c=SIMD.Float32x4.sub(SIMD.Float32x4.mul(o,a),c);c=SIMD.Float32x4.swizzle(c,2,3,0,1);a=SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(i,2,3,0,1),n);a=SIMD.Float32x4.swizzle(a,1,0,3,2);r=SIMD.Float32x4.swizzle(r,2,3,0,1);s=SIMD.Float32x4.add(SIMD.Float32x4.mul(r,a),s);d=SIMD.Float32x4.mul(o,a);a=SIMD.Float32x4.swizzle(a,2,3,0,1);s=SIMD.Float32x4.sub(s,SIMD.Float32x4.mul(r,a));d=SIMD.Float32x4.sub(SIMD.Float32x4.mul(o,a),d);d=SIMD.Float32x4.swizzle(d,2,3,0,1);a=SIMD.Float32x4.mul(o,i);a=SIMD.Float32x4.swizzle(a,1,0,3,2);d=SIMD.Float32x4.add(SIMD.Float32x4.mul(n,a),d);c=SIMD.Float32x4.sub(SIMD.Float32x4.mul(r,a),c);a=SIMD.Float32x4.swizzle(a,2,3,0,1);d=SIMD.Float32x4.sub(SIMD.Float32x4.mul(n,a),d);c=SIMD.Float32x4.sub(c,SIMD.Float32x4.mul(r,a));a=SIMD.Float32x4.mul(o,n);a=SIMD.Float32x4.swizzle(a,1,0,3,2);l=SIMD.Float32x4.sub(l,SIMD.Float32x4.mul(r,a));d=SIMD.Float32x4.add(SIMD.Float32x4.mul(i,a),d);a=SIMD.Float32x4.swizzle(a,2,3,0,1);l=SIMD.Float32x4.add(SIMD.Float32x4.mul(r,a),l);d=SIMD.Float32x4.sub(d,SIMD.Float32x4.mul(i,a));a=SIMD.Float32x4.mul(o,r);a=SIMD.Float32x4.swizzle(a,1,0,3,2);l=SIMD.Float32x4.add(SIMD.Float32x4.mul(n,a),l);c=SIMD.Float32x4.sub(c,SIMD.Float32x4.mul(i,a));a=SIMD.Float32x4.swizzle(a,2,3,0,1);l=SIMD.Float32x4.sub(l,SIMD.Float32x4.mul(n,a));c=SIMD.Float32x4.add(SIMD.Float32x4.mul(i,a),c);u=SIMD.Float32x4.mul(o,s);u=SIMD.Float32x4.add(SIMD.Float32x4.swizzle(u,2,3,0,1),u);u=SIMD.Float32x4.add(SIMD.Float32x4.swizzle(u,1,0,3,2),u);a=SIMD.Float32x4.reciprocalApproximation(u);u=SIMD.Float32x4.sub(SIMD.Float32x4.add(a,a),SIMD.Float32x4.mul(u,SIMD.Float32x4.mul(a,a)));u=SIMD.Float32x4.swizzle(u,0,0,0,0);if(!u)return null;SIMD.Float32x4.store(t,0,SIMD.Float32x4.mul(u,s));SIMD.Float32x4.store(t,4,SIMD.Float32x4.mul(u,l));SIMD.Float32x4.store(t,8,SIMD.Float32x4.mul(u,d));SIMD.Float32x4.store(t,12,SIMD.Float32x4.mul(u,c));return t};r.invert=i.USE_SIMD?r.SIMD.invert:r.scalar.invert;r.scalar.adjoint=function(t,e){var o=e[0],i=e[1],r=e[2],n=e[3],a=e[4],s=e[5],l=e[6],d=e[7],c=e[8],u=e[9],h=e[10],p=e[11],f=e[12],g=e[13],m=e[14],v=e[15];t[0]=s*(h*v-p*m)-u*(l*v-d*m)+g*(l*p-d*h);t[1]=-(i*(h*v-p*m)-u*(r*v-n*m)+g*(r*p-n*h));t[2]=i*(l*v-d*m)-s*(r*v-n*m)+g*(r*d-n*l);t[3]=-(i*(l*p-d*h)-s*(r*p-n*h)+u*(r*d-n*l));t[4]=-(a*(h*v-p*m)-c*(l*v-d*m)+f*(l*p-d*h));t[5]=o*(h*v-p*m)-c*(r*v-n*m)+f*(r*p-n*h);t[6]=-(o*(l*v-d*m)-a*(r*v-n*m)+f*(r*d-n*l));t[7]=o*(l*p-d*h)-a*(r*p-n*h)+c*(r*d-n*l);t[8]=a*(u*v-p*g)-c*(s*v-d*g)+f*(s*p-d*u);t[9]=-(o*(u*v-p*g)-c*(i*v-n*g)+f*(i*p-n*u));t[10]=o*(s*v-d*g)-a*(i*v-n*g)+f*(i*d-n*s);t[11]=-(o*(s*p-d*u)-a*(i*p-n*u)+c*(i*d-n*s));t[12]=-(a*(u*m-h*g)-c*(s*m-l*g)+f*(s*h-l*u));t[13]=o*(u*m-h*g)-c*(i*m-r*g)+f*(i*h-r*u);t[14]=-(o*(s*m-l*g)-a*(i*m-r*g)+f*(i*l-r*s));t[15]=o*(s*h-l*u)-a*(i*h-r*u)+c*(i*l-r*s);return t};r.SIMD.adjoint=function(t,e){var o,i,r,n,a,s,l,d,c,u,h,p,f,o=SIMD.Float32x4.load(e,0),i=SIMD.Float32x4.load(e,4),r=SIMD.Float32x4.load(e,8),n=SIMD.Float32x4.load(e,12);c=SIMD.Float32x4.shuffle(o,i,0,1,4,5);s=SIMD.Float32x4.shuffle(r,n,0,1,4,5);a=SIMD.Float32x4.shuffle(c,s,0,2,4,6);s=SIMD.Float32x4.shuffle(s,c,1,3,5,7);c=SIMD.Float32x4.shuffle(o,i,2,3,6,7);d=SIMD.Float32x4.shuffle(r,n,2,3,6,7);l=SIMD.Float32x4.shuffle(c,d,0,2,4,6);d=SIMD.Float32x4.shuffle(d,c,1,3,5,7);c=SIMD.Float32x4.mul(l,d);c=SIMD.Float32x4.swizzle(c,1,0,3,2);u=SIMD.Float32x4.mul(s,c);h=SIMD.Float32x4.mul(a,c);c=SIMD.Float32x4.swizzle(c,2,3,0,1);u=SIMD.Float32x4.sub(SIMD.Float32x4.mul(s,c),u);h=SIMD.Float32x4.sub(SIMD.Float32x4.mul(a,c),h);h=SIMD.Float32x4.swizzle(h,2,3,0,1);c=SIMD.Float32x4.mul(s,l);c=SIMD.Float32x4.swizzle(c,1,0,3,2);u=SIMD.Float32x4.add(SIMD.Float32x4.mul(d,c),u);f=SIMD.Float32x4.mul(a,c);c=SIMD.Float32x4.swizzle(c,2,3,0,1);u=SIMD.Float32x4.sub(u,SIMD.Float32x4.mul(d,c));f=SIMD.Float32x4.sub(SIMD.Float32x4.mul(a,c),f);f=SIMD.Float32x4.swizzle(f,2,3,0,1);c=SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(s,2,3,0,1),d);c=SIMD.Float32x4.swizzle(c,1,0,3,2);l=SIMD.Float32x4.swizzle(l,2,3,0,1);u=SIMD.Float32x4.add(SIMD.Float32x4.mul(l,c),u);p=SIMD.Float32x4.mul(a,c);c=SIMD.Float32x4.swizzle(c,2,3,0,1);u=SIMD.Float32x4.sub(u,SIMD.Float32x4.mul(l,c));p=SIMD.Float32x4.sub(SIMD.Float32x4.mul(a,c),p);p=SIMD.Float32x4.swizzle(p,2,3,0,1);c=SIMD.Float32x4.mul(a,s);c=SIMD.Float32x4.swizzle(c,1,0,3,2);p=SIMD.Float32x4.add(SIMD.Float32x4.mul(d,c),p);f=SIMD.Float32x4.sub(SIMD.Float32x4.mul(l,c),f);c=SIMD.Float32x4.swizzle(c,2,3,0,1);p=SIMD.Float32x4.sub(SIMD.Float32x4.mul(d,c),p);f=SIMD.Float32x4.sub(f,SIMD.Float32x4.mul(l,c));c=SIMD.Float32x4.mul(a,d);c=SIMD.Float32x4.swizzle(c,1,0,3,2);h=SIMD.Float32x4.sub(h,SIMD.Float32x4.mul(l,c));p=SIMD.Float32x4.add(SIMD.Float32x4.mul(s,c),p);c=SIMD.Float32x4.swizzle(c,2,3,0,1);h=SIMD.Float32x4.add(SIMD.Float32x4.mul(l,c),h);p=SIMD.Float32x4.sub(p,SIMD.Float32x4.mul(s,c));c=SIMD.Float32x4.mul(a,l);c=SIMD.Float32x4.swizzle(c,1,0,3,2);h=SIMD.Float32x4.add(SIMD.Float32x4.mul(d,c),h);f=SIMD.Float32x4.sub(f,SIMD.Float32x4.mul(s,c));c=SIMD.Float32x4.swizzle(c,2,3,0,1);h=SIMD.Float32x4.sub(h,SIMD.Float32x4.mul(d,c));f=SIMD.Float32x4.add(SIMD.Float32x4.mul(s,c),f);SIMD.Float32x4.store(t,0,u);SIMD.Float32x4.store(t,4,h);SIMD.Float32x4.store(t,8,p);SIMD.Float32x4.store(t,12,f);return t};r.adjoint=i.USE_SIMD?r.SIMD.adjoint:r.scalar.adjoint;r.determinant=function(t){var e=t[0],o=t[1],i=t[2],r=t[3],n=t[4],a=t[5],s=t[6],l=t[7],d=t[8],c=t[9],u=t[10],h=t[11],p=t[12],f=t[13],g=t[14],m=t[15];return(e*a-o*n)*(u*m-h*g)-(e*s-i*n)*(c*m-h*f)+(e*l-r*n)*(c*g-u*f)+(o*s-i*a)*(d*m-h*p)-(o*l-r*a)*(d*g-u*p)+(i*l-r*s)*(d*f-c*p)};r.SIMD.multiply=function(t,e,o){var i=SIMD.Float32x4.load(e,0),r=SIMD.Float32x4.load(e,4),n=SIMD.Float32x4.load(e,8),a=SIMD.Float32x4.load(e,12),s=SIMD.Float32x4.load(o,0),l=SIMD.Float32x4.add(SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(s,0,0,0,0),i),SIMD.Float32x4.add(SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(s,1,1,1,1),r),SIMD.Float32x4.add(SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(s,2,2,2,2),n),SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(s,3,3,3,3),a))));SIMD.Float32x4.store(t,0,l);var d=SIMD.Float32x4.load(o,4),c=SIMD.Float32x4.add(SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(d,0,0,0,0),i),SIMD.Float32x4.add(SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(d,1,1,1,1),r),SIMD.Float32x4.add(SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(d,2,2,2,2),n),SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(d,3,3,3,3),a))));SIMD.Float32x4.store(t,4,c);var u=SIMD.Float32x4.load(o,8),h=SIMD.Float32x4.add(SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(u,0,0,0,0),i),SIMD.Float32x4.add(SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(u,1,1,1,1),r),SIMD.Float32x4.add(SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(u,2,2,2,2),n),SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(u,3,3,3,3),a))));SIMD.Float32x4.store(t,8,h);var p=SIMD.Float32x4.load(o,12),f=SIMD.Float32x4.add(SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(p,0,0,0,0),i),SIMD.Float32x4.add(SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(p,1,1,1,1),r),SIMD.Float32x4.add(SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(p,2,2,2,2),n),SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(p,3,3,3,3),a))));SIMD.Float32x4.store(t,12,f);return t};r.scalar.multiply=function(t,e,o){var i=e[0],r=e[1],n=e[2],a=e[3],s=e[4],l=e[5],d=e[6],c=e[7],u=e[8],h=e[9],p=e[10],f=e[11],g=e[12],m=e[13],v=e[14],b=e[15],y=o[0],A=o[1],w=o[2],_=o[3];t[0]=y*i+A*s+w*u+_*g;t[1]=y*r+A*l+w*h+_*m;t[2]=y*n+A*d+w*p+_*v;t[3]=y*a+A*c+w*f+_*b;y=o[4];A=o[5];w=o[6];_=o[7];t[4]=y*i+A*s+w*u+_*g;t[5]=y*r+A*l+w*h+_*m;t[6]=y*n+A*d+w*p+_*v;t[7]=y*a+A*c+w*f+_*b;y=o[8];A=o[9];w=o[10];_=o[11];t[8]=y*i+A*s+w*u+_*g;t[9]=y*r+A*l+w*h+_*m;t[10]=y*n+A*d+w*p+_*v;t[11]=y*a+A*c+w*f+_*b;y=o[12];A=o[13];w=o[14];_=o[15];t[12]=y*i+A*s+w*u+_*g;t[13]=y*r+A*l+w*h+_*m;t[14]=y*n+A*d+w*p+_*v;t[15]=y*a+A*c+w*f+_*b;return t};r.multiply=i.USE_SIMD?r.SIMD.multiply:r.scalar.multiply;r.mul=r.multiply;r.scalar.translate=function(t,e,o){var i,r,n,a,s,l,d,c,u,h,p,f,g=o[0],m=o[1],v=o[2];if(e===t){t[12]=e[0]*g+e[4]*m+e[8]*v+e[12];t[13]=e[1]*g+e[5]*m+e[9]*v+e[13];t[14]=e[2]*g+e[6]*m+e[10]*v+e[14];t[15]=e[3]*g+e[7]*m+e[11]*v+e[15]}else{i=e[0];r=e[1];n=e[2];a=e[3];s=e[4];l=e[5];d=e[6];c=e[7];u=e[8];h=e[9];p=e[10];f=e[11];t[0]=i;t[1]=r;t[2]=n;t[3]=a;t[4]=s;t[5]=l;t[6]=d;t[7]=c;t[8]=u;t[9]=h;t[10]=p;t[11]=f;t[12]=i*g+s*m+u*v+e[12];t[13]=r*g+l*m+h*v+e[13];t[14]=n*g+d*m+p*v+e[14];t[15]=a*g+c*m+f*v+e[15]}return t};r.SIMD.translate=function(t,e,o){var i=SIMD.Float32x4.load(e,0),r=SIMD.Float32x4.load(e,4),n=SIMD.Float32x4.load(e,8),a=SIMD.Float32x4.load(e,12),s=SIMD.Float32x4(o[0],o[1],o[2],0);if(e!==t){t[0]=e[0];t[1]=e[1];t[2]=e[2];t[3]=e[3];t[4]=e[4];t[5]=e[5];t[6]=e[6];t[7]=e[7];t[8]=e[8];t[9]=e[9];t[10]=e[10];t[11]=e[11]}i=SIMD.Float32x4.mul(i,SIMD.Float32x4.swizzle(s,0,0,0,0));r=SIMD.Float32x4.mul(r,SIMD.Float32x4.swizzle(s,1,1,1,1));n=SIMD.Float32x4.mul(n,SIMD.Float32x4.swizzle(s,2,2,2,2));var l=SIMD.Float32x4.add(i,SIMD.Float32x4.add(r,SIMD.Float32x4.add(n,a)));SIMD.Float32x4.store(t,12,l);return t};r.translate=i.USE_SIMD?r.SIMD.translate:r.scalar.translate;r.scalar.scale=function(t,e,o){var i=o[0],r=o[1],n=o[2];t[0]=e[0]*i;t[1]=e[1]*i;t[2]=e[2]*i;t[3]=e[3]*i;t[4]=e[4]*r;t[5]=e[5]*r;t[6]=e[6]*r;t[7]=e[7]*r;t[8]=e[8]*n;t[9]=e[9]*n;t[10]=e[10]*n;t[11]=e[11]*n;t[12]=e[12];t[13]=e[13];t[14]=e[14];t[15]=e[15];return t};r.SIMD.scale=function(t,e,o){var i,r,n,a=SIMD.Float32x4(o[0],o[1],o[2],0);i=SIMD.Float32x4.load(e,0);SIMD.Float32x4.store(t,0,SIMD.Float32x4.mul(i,SIMD.Float32x4.swizzle(a,0,0,0,0)));r=SIMD.Float32x4.load(e,4);SIMD.Float32x4.store(t,4,SIMD.Float32x4.mul(r,SIMD.Float32x4.swizzle(a,1,1,1,1)));n=SIMD.Float32x4.load(e,8);SIMD.Float32x4.store(t,8,SIMD.Float32x4.mul(n,SIMD.Float32x4.swizzle(a,2,2,2,2)));t[12]=e[12];t[13]=e[13];t[14]=e[14];t[15]=e[15];return t};r.scale=i.USE_SIMD?r.SIMD.scale:r.scalar.scale;r.rotate=function(t,e,o,r){var n,a,s,l,d,c,u,h,p,f,g,m,v,b,y,A,w,_,S,M,O,I,E,D,C=r[0],x=r[1],T=r[2],P=Math.sqrt(C*C+x*x+T*T);if(Math.abs(P)<i.EPSILON)return null;P=1/P;C*=P;x*=P;T*=P;n=Math.sin(o);a=Math.cos(o);s=1-a;l=e[0];d=e[1];c=e[2];u=e[3];h=e[4];p=e[5];f=e[6];g=e[7];m=e[8];v=e[9];b=e[10];y=e[11];A=C*C*s+a;w=x*C*s+T*n;_=T*C*s-x*n;S=C*x*s-T*n;M=x*x*s+a;O=T*x*s+C*n;I=C*T*s+x*n;E=x*T*s-C*n;D=T*T*s+a;t[0]=l*A+h*w+m*_;t[1]=d*A+p*w+v*_;t[2]=c*A+f*w+b*_;t[3]=u*A+g*w+y*_;t[4]=l*S+h*M+m*O;t[5]=d*S+p*M+v*O;t[6]=c*S+f*M+b*O;t[7]=u*S+g*M+y*O;t[8]=l*I+h*E+m*D;t[9]=d*I+p*E+v*D;t[10]=c*I+f*E+b*D;t[11]=u*I+g*E+y*D;if(e!==t){t[12]=e[12];t[13]=e[13];t[14]=e[14];t[15]=e[15]}return t};r.scalar.rotateX=function(t,e,o){var i=Math.sin(o),r=Math.cos(o),n=e[4],a=e[5],s=e[6],l=e[7],d=e[8],c=e[9],u=e[10],h=e[11];if(e!==t){t[0]=e[0];t[1]=e[1];t[2]=e[2];t[3]=e[3];t[12]=e[12];t[13]=e[13];t[14]=e[14];t[15]=e[15]}t[4]=n*r+d*i;t[5]=a*r+c*i;t[6]=s*r+u*i;t[7]=l*r+h*i;t[8]=d*r-n*i;t[9]=c*r-a*i;t[10]=u*r-s*i;t[11]=h*r-l*i;return t};r.SIMD.rotateX=function(t,e,o){var i=SIMD.Float32x4.splat(Math.sin(o)),r=SIMD.Float32x4.splat(Math.cos(o));if(e!==t){t[0]=e[0];t[1]=e[1];t[2]=e[2];t[3]=e[3];t[12]=e[12];t[13]=e[13];t[14]=e[14];t[15]=e[15]}var n=SIMD.Float32x4.load(e,4),a=SIMD.Float32x4.load(e,8);SIMD.Float32x4.store(t,4,SIMD.Float32x4.add(SIMD.Float32x4.mul(n,r),SIMD.Float32x4.mul(a,i)));SIMD.Float32x4.store(t,8,SIMD.Float32x4.sub(SIMD.Float32x4.mul(a,r),SIMD.Float32x4.mul(n,i)));return t};r.rotateX=i.USE_SIMD?r.SIMD.rotateX:r.scalar.rotateX;r.scalar.rotateY=function(t,e,o){var i=Math.sin(o),r=Math.cos(o),n=e[0],a=e[1],s=e[2],l=e[3],d=e[8],c=e[9],u=e[10],h=e[11];if(e!==t){t[4]=e[4];t[5]=e[5];t[6]=e[6];t[7]=e[7];t[12]=e[12];t[13]=e[13];t[14]=e[14];t[15]=e[15]}t[0]=n*r-d*i;t[1]=a*r-c*i;t[2]=s*r-u*i;t[3]=l*r-h*i;t[8]=n*i+d*r;t[9]=a*i+c*r;t[10]=s*i+u*r;t[11]=l*i+h*r;return t};r.SIMD.rotateY=function(t,e,o){var i=SIMD.Float32x4.splat(Math.sin(o)),r=SIMD.Float32x4.splat(Math.cos(o));if(e!==t){t[4]=e[4];t[5]=e[5];t[6]=e[6];t[7]=e[7];t[12]=e[12];t[13]=e[13];t[14]=e[14];t[15]=e[15]}var n=SIMD.Float32x4.load(e,0),a=SIMD.Float32x4.load(e,8);SIMD.Float32x4.store(t,0,SIMD.Float32x4.sub(SIMD.Float32x4.mul(n,r),SIMD.Float32x4.mul(a,i)));SIMD.Float32x4.store(t,8,SIMD.Float32x4.add(SIMD.Float32x4.mul(n,i),SIMD.Float32x4.mul(a,r)));return t};r.rotateY=i.USE_SIMD?r.SIMD.rotateY:r.scalar.rotateY;r.scalar.rotateZ=function(t,e,o){var i=Math.sin(o),r=Math.cos(o),n=e[0],a=e[1],s=e[2],l=e[3],d=e[4],c=e[5],u=e[6],h=e[7];if(e!==t){t[8]=e[8];t[9]=e[9];t[10]=e[10];t[11]=e[11];t[12]=e[12];t[13]=e[13];t[14]=e[14];t[15]=e[15]}t[0]=n*r+d*i;t[1]=a*r+c*i;t[2]=s*r+u*i;t[3]=l*r+h*i;t[4]=d*r-n*i;t[5]=c*r-a*i;t[6]=u*r-s*i;t[7]=h*r-l*i;return t};r.SIMD.rotateZ=function(t,e,o){var i=SIMD.Float32x4.splat(Math.sin(o)),r=SIMD.Float32x4.splat(Math.cos(o));if(e!==t){t[8]=e[8];t[9]=e[9];t[10]=e[10];t[11]=e[11];t[12]=e[12];t[13]=e[13];t[14]=e[14];t[15]=e[15]}var n=SIMD.Float32x4.load(e,0),a=SIMD.Float32x4.load(e,4);SIMD.Float32x4.store(t,0,SIMD.Float32x4.add(SIMD.Float32x4.mul(n,r),SIMD.Float32x4.mul(a,i)));SIMD.Float32x4.store(t,4,SIMD.Float32x4.sub(SIMD.Float32x4.mul(a,r),SIMD.Float32x4.mul(n,i)));return t};r.rotateZ=i.USE_SIMD?r.SIMD.rotateZ:r.scalar.rotateZ;r.fromTranslation=function(t,e){t[0]=1;t[1]=0;t[2]=0;t[3]=0;t[4]=0;t[5]=1;t[6]=0;t[7]=0;t[8]=0;t[9]=0;t[10]=1;t[11]=0;t[12]=e[0];t[13]=e[1];t[14]=e[2];t[15]=1;return t};r.fromScaling=function(t,e){t[0]=e[0];t[1]=0;t[2]=0;t[3]=0;t[4]=0;t[5]=e[1];t[6]=0;t[7]=0;t[8]=0;t[9]=0;t[10]=e[2];t[11]=0;t[12]=0;t[13]=0;t[14]=0;t[15]=1;return t};r.fromRotation=function(t,e,o){var r,n,a,s=o[0],l=o[1],d=o[2],c=Math.sqrt(s*s+l*l+d*d);if(Math.abs(c)<i.EPSILON)return null;c=1/c;s*=c;l*=c;d*=c;r=Math.sin(e);n=Math.cos(e);a=1-n;t[0]=s*s*a+n;t[1]=l*s*a+d*r;t[2]=d*s*a-l*r;t[3]=0;t[4]=s*l*a-d*r;t[5]=l*l*a+n;t[6]=d*l*a+s*r;t[7]=0;t[8]=s*d*a+l*r;t[9]=l*d*a-s*r;t[10]=d*d*a+n;t[11]=0;t[12]=0;t[13]=0;t[14]=0;t[15]=1;return t};r.fromXRotation=function(t,e){var o=Math.sin(e),i=Math.cos(e);t[0]=1;t[1]=0;t[2]=0;t[3]=0;t[4]=0;t[5]=i;t[6]=o;t[7]=0;t[8]=0;t[9]=-o;t[10]=i;t[11]=0;t[12]=0;t[13]=0;t[14]=0;t[15]=1;return t};r.fromYRotation=function(t,e){var o=Math.sin(e),i=Math.cos(e);t[0]=i;t[1]=0;t[2]=-o;t[3]=0;t[4]=0;t[5]=1;t[6]=0;t[7]=0;t[8]=o;t[9]=0;t[10]=i;t[11]=0;t[12]=0;t[13]=0;t[14]=0;t[15]=1;return t};r.fromZRotation=function(t,e){var o=Math.sin(e),i=Math.cos(e);t[0]=i;t[1]=o;t[2]=0;t[3]=0;t[4]=-o;t[5]=i;t[6]=0;t[7]=0;t[8]=0;t[9]=0;t[10]=1;t[11]=0;t[12]=0;t[13]=0;t[14]=0;t[15]=1;return t};r.fromRotationTranslation=function(t,e,o){var i=e[0],r=e[1],n=e[2],a=e[3],s=i+i,l=r+r,d=n+n,c=i*s,u=i*l,h=i*d,p=r*l,f=r*d,g=n*d,m=a*s,v=a*l,b=a*d;t[0]=1-(p+g);t[1]=u+b;t[2]=h-v;t[3]=0;t[4]=u-b;t[5]=1-(c+g);t[6]=f+m;t[7]=0;t[8]=h+v;t[9]=f-m;t[10]=1-(c+p);t[11]=0;t[12]=o[0];t[13]=o[1];t[14]=o[2];t[15]=1;return t};r.getTranslation=function(t,e){t[0]=e[12];t[1]=e[13];t[2]=e[14];return t};r.getRotation=function(t,e){var o=e[0]+e[5]+e[10],i=0;if(o>0){i=2*Math.sqrt(o+1);t[3]=.25*i;t[0]=(e[6]-e[9])/i;t[1]=(e[8]-e[2])/i;t[2]=(e[1]-e[4])/i}else if(e[0]>e[5]&e[0]>e[10]){i=2*Math.sqrt(1+e[0]-e[5]-e[10]);t[3]=(e[6]-e[9])/i;t[0]=.25*i;t[1]=(e[1]+e[4])/i;t[2]=(e[8]+e[2])/i}else if(e[5]>e[10]){i=2*Math.sqrt(1+e[5]-e[0]-e[10]);t[3]=(e[8]-e[2])/i;t[0]=(e[1]+e[4])/i;t[1]=.25*i;t[2]=(e[6]+e[9])/i}else{i=2*Math.sqrt(1+e[10]-e[0]-e[5]);t[3]=(e[1]-e[4])/i;t[0]=(e[8]+e[2])/i;t[1]=(e[6]+e[9])/i;t[2]=.25*i}return t};r.fromRotationTranslationScale=function(t,e,o,i){var r=e[0],n=e[1],a=e[2],s=e[3],l=r+r,d=n+n,c=a+a,u=r*l,h=r*d,p=r*c,f=n*d,g=n*c,m=a*c,v=s*l,b=s*d,y=s*c,A=i[0],w=i[1],_=i[2];t[0]=(1-(f+m))*A;t[1]=(h+y)*A;t[2]=(p-b)*A;t[3]=0;t[4]=(h-y)*w;t[5]=(1-(u+m))*w;t[6]=(g+v)*w;t[7]=0;t[8]=(p+b)*_;t[9]=(g-v)*_;t[10]=(1-(u+f))*_;t[11]=0;t[12]=o[0];t[13]=o[1];t[14]=o[2];t[15]=1;return t};r.fromRotationTranslationScaleOrigin=function(t,e,o,i,r){var n=e[0],a=e[1],s=e[2],l=e[3],d=n+n,c=a+a,u=s+s,h=n*d,p=n*c,f=n*u,g=a*c,m=a*u,v=s*u,b=l*d,y=l*c,A=l*u,w=i[0],_=i[1],S=i[2],M=r[0],O=r[1],I=r[2];t[0]=(1-(g+v))*w;t[1]=(p+A)*w;t[2]=(f-y)*w;t[3]=0;t[4]=(p-A)*_;t[5]=(1-(h+v))*_;t[6]=(m+b)*_;t[7]=0;t[8]=(f+y)*S;t[9]=(m-b)*S;t[10]=(1-(h+g))*S;t[11]=0;t[12]=o[0]+M-(t[0]*M+t[4]*O+t[8]*I);t[13]=o[1]+O-(t[1]*M+t[5]*O+t[9]*I);t[14]=o[2]+I-(t[2]*M+t[6]*O+t[10]*I);t[15]=1;return t};r.fromQuat=function(t,e){var o=e[0],i=e[1],r=e[2],n=e[3],a=o+o,s=i+i,l=r+r,d=o*a,c=i*a,u=i*s,h=r*a,p=r*s,f=r*l,g=n*a,m=n*s,v=n*l;t[0]=1-u-f;t[1]=c+v;t[2]=h-m;t[3]=0;t[4]=c-v;t[5]=1-d-f;t[6]=p+g;t[7]=0;t[8]=h+m;t[9]=p-g;t[10]=1-d-u;t[11]=0;t[12]=0;t[13]=0;t[14]=0;t[15]=1;return t};r.frustum=function(t,e,o,i,r,n,a){var s=1/(o-e),l=1/(r-i),d=1/(n-a);t[0]=2*n*s;t[1]=0;t[2]=0;t[3]=0;t[4]=0;t[5]=2*n*l;t[6]=0;t[7]=0;t[8]=(o+e)*s;t[9]=(r+i)*l;t[10]=(a+n)*d;t[11]=-1;t[12]=0;t[13]=0;t[14]=a*n*2*d;t[15]=0;return t};r.perspective=function(t,e,o,i,r){var n=1/Math.tan(e/2),a=1/(i-r);t[0]=n/o;t[1]=0;t[2]=0;t[3]=0;t[4]=0;t[5]=n;t[6]=0;t[7]=0;t[8]=0;t[9]=0;t[10]=(r+i)*a;t[11]=-1;t[12]=0;t[13]=0;t[14]=2*r*i*a;t[15]=0;return t};r.perspectiveFromFieldOfView=function(t,e,o,i){var r=Math.tan(e.upDegrees*Math.PI/180),n=Math.tan(e.downDegrees*Math.PI/180),a=Math.tan(e.leftDegrees*Math.PI/180),s=Math.tan(e.rightDegrees*Math.PI/180),l=2/(a+s),d=2/(r+n);t[0]=l;t[1]=0;t[2]=0;t[3]=0;t[4]=0;t[5]=d;t[6]=0;t[7]=0;t[8]=-(a-s)*l*.5;t[9]=(r-n)*d*.5;t[10]=i/(o-i);t[11]=-1;t[12]=0;t[13]=0;t[14]=i*o/(o-i);t[15]=0;return t};r.ortho=function(t,e,o,i,r,n,a){var s=1/(e-o),l=1/(i-r),d=1/(n-a);t[0]=-2*s;t[1]=0;t[2]=0;t[3]=0;t[4]=0;t[5]=-2*l;t[6]=0;t[7]=0;t[8]=0;t[9]=0;t[10]=2*d;t[11]=0;t[12]=(e+o)*s;t[13]=(r+i)*l;t[14]=(a+n)*d;t[15]=1;return t};r.lookAt=function(t,e,o,n){var a,s,l,d,c,u,h,p,f,g,m=e[0],v=e[1],b=e[2],y=n[0],A=n[1],w=n[2],_=o[0],S=o[1],M=o[2];if(Math.abs(m-_)<i.EPSILON&&Math.abs(v-S)<i.EPSILON&&Math.abs(b-M)<i.EPSILON)return r.identity(t);h=m-_;p=v-S;f=b-M;g=1/Math.sqrt(h*h+p*p+f*f);h*=g;p*=g;f*=g;a=A*f-w*p;s=w*h-y*f;l=y*p-A*h;g=Math.sqrt(a*a+s*s+l*l);if(g){g=1/g;a*=g;s*=g;l*=g}else{a=0;s=0;l=0}d=p*l-f*s;c=f*a-h*l;u=h*s-p*a;g=Math.sqrt(d*d+c*c+u*u);if(g){g=1/g;d*=g;c*=g;u*=g}else{d=0;c=0;u=0}t[0]=a;t[1]=d;t[2]=h;t[3]=0;t[4]=s;t[5]=c;t[6]=p;t[7]=0;t[8]=l;t[9]=u;t[10]=f;t[11]=0;t[12]=-(a*m+s*v+l*b);t[13]=-(d*m+c*v+u*b);t[14]=-(h*m+p*v+f*b);t[15]=1;return t};r.str=function(t){return"mat4("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+", "+t[4]+", "+t[5]+", "+t[6]+", "+t[7]+", "+t[8]+", "+t[9]+", "+t[10]+", "+t[11]+", "+t[12]+", "+t[13]+", "+t[14]+", "+t[15]+")"};r.frob=function(t){return Math.sqrt(Math.pow(t[0],2)+Math.pow(t[1],2)+Math.pow(t[2],2)+Math.pow(t[3],2)+Math.pow(t[4],2)+Math.pow(t[5],2)+Math.pow(t[6],2)+Math.pow(t[7],2)+Math.pow(t[8],2)+Math.pow(t[9],2)+Math.pow(t[10],2)+Math.pow(t[11],2)+Math.pow(t[12],2)+Math.pow(t[13],2)+Math.pow(t[14],2)+Math.pow(t[15],2))};r.add=function(t,e,o){t[0]=e[0]+o[0];t[1]=e[1]+o[1];t[2]=e[2]+o[2];t[3]=e[3]+o[3];t[4]=e[4]+o[4];t[5]=e[5]+o[5];t[6]=e[6]+o[6];t[7]=e[7]+o[7];t[8]=e[8]+o[8];t[9]=e[9]+o[9];t[10]=e[10]+o[10];t[11]=e[11]+o[11];t[12]=e[12]+o[12];t[13]=e[13]+o[13];t[14]=e[14]+o[14];t[15]=e[15]+o[15];return t};r.subtract=function(t,e,o){t[0]=e[0]-o[0];t[1]=e[1]-o[1];t[2]=e[2]-o[2];t[3]=e[3]-o[3];t[4]=e[4]-o[4];t[5]=e[5]-o[5];t[6]=e[6]-o[6];t[7]=e[7]-o[7];t[8]=e[8]-o[8];t[9]=e[9]-o[9];t[10]=e[10]-o[10];t[11]=e[11]-o[11];t[12]=e[12]-o[12];t[13]=e[13]-o[13];t[14]=e[14]-o[14];t[15]=e[15]-o[15];return t};r.sub=r.subtract;r.multiplyScalar=function(t,e,o){t[0]=e[0]*o;t[1]=e[1]*o;t[2]=e[2]*o;t[3]=e[3]*o;t[4]=e[4]*o;t[5]=e[5]*o;t[6]=e[6]*o;t[7]=e[7]*o;t[8]=e[8]*o;t[9]=e[9]*o;t[10]=e[10]*o;t[11]=e[11]*o;t[12]=e[12]*o;t[13]=e[13]*o;t[14]=e[14]*o;t[15]=e[15]*o;return t};r.multiplyScalarAndAdd=function(t,e,o,i){t[0]=e[0]+o[0]*i;t[1]=e[1]+o[1]*i;t[2]=e[2]+o[2]*i;t[3]=e[3]+o[3]*i;t[4]=e[4]+o[4]*i;t[5]=e[5]+o[5]*i;t[6]=e[6]+o[6]*i;t[7]=e[7]+o[7]*i;t[8]=e[8]+o[8]*i;t[9]=e[9]+o[9]*i;t[10]=e[10]+o[10]*i;t[11]=e[11]+o[11]*i;t[12]=e[12]+o[12]*i;t[13]=e[13]+o[13]*i;t[14]=e[14]+o[14]*i;t[15]=e[15]+o[15]*i;return t};r.exactEquals=function(t,e){return t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]&&t[3]===e[3]&&t[4]===e[4]&&t[5]===e[5]&&t[6]===e[6]&&t[7]===e[7]&&t[8]===e[8]&&t[9]===e[9]&&t[10]===e[10]&&t[11]===e[11]&&t[12]===e[12]&&t[13]===e[13]&&t[14]===e[14]&&t[15]===e[15]};r.equals=function(t,e){var o=t[0],r=t[1],n=t[2],a=t[3],s=t[4],l=t[5],d=t[6],c=t[7],u=t[8],h=t[9],p=t[10],f=t[11],g=t[12],m=t[13],v=t[14],b=t[15],y=e[0],A=e[1],w=e[2],_=e[3],S=e[4],M=e[5],O=e[6],I=e[7],E=e[8],D=e[9],C=e[10],x=e[11],T=e[12],P=e[13],j=e[14],k=e[15];return Math.abs(o-y)<=i.EPSILON*Math.max(1,Math.abs(o),Math.abs(y))&&Math.abs(r-A)<=i.EPSILON*Math.max(1,Math.abs(r),Math.abs(A))&&Math.abs(n-w)<=i.EPSILON*Math.max(1,Math.abs(n),Math.abs(w))&&Math.abs(a-_)<=i.EPSILON*Math.max(1,Math.abs(a),Math.abs(_))&&Math.abs(s-S)<=i.EPSILON*Math.max(1,Math.abs(s),Math.abs(S))&&Math.abs(l-M)<=i.EPSILON*Math.max(1,Math.abs(l),Math.abs(M))&&Math.abs(d-O)<=i.EPSILON*Math.max(1,Math.abs(d),Math.abs(O))&&Math.abs(c-I)<=i.EPSILON*Math.max(1,Math.abs(c),Math.abs(I))&&Math.abs(u-E)<=i.EPSILON*Math.max(1,Math.abs(u),Math.abs(E))&&Math.abs(h-D)<=i.EPSILON*Math.max(1,Math.abs(h),Math.abs(D))&&Math.abs(p-C)<=i.EPSILON*Math.max(1,Math.abs(p),Math.abs(C))&&Math.abs(f-x)<=i.EPSILON*Math.max(1,Math.abs(f),Math.abs(x))&&Math.abs(g-T)<=i.EPSILON*Math.max(1,Math.abs(g),Math.abs(T))&&Math.abs(m-P)<=i.EPSILON*Math.max(1,Math.abs(m),Math.abs(P))&&Math.abs(v-j)<=i.EPSILON*Math.max(1,Math.abs(v),Math.abs(j))&&Math.abs(b-k)<=i.EPSILON*Math.max(1,Math.abs(b),Math.abs(k))};t.exports=r},function(t,e,o){var i=o(7),r=o(19),n=o(20),a=o(21),s={};s.create=function(){var t=new i.ARRAY_TYPE(4);t[0]=0;t[1]=0;t[2]=0;t[3]=1;return t};s.rotationTo=function(){var t=n.create(),e=n.fromValues(1,0,0),o=n.fromValues(0,1,0);return function(i,r,a){var l=n.dot(r,a);if(l<-.999999){n.cross(t,e,r);n.length(t)<1e-6&&n.cross(t,o,r);n.normalize(t,t);s.setAxisAngle(i,t,Math.PI);return i}if(l>.999999){i[0]=0;i[1]=0;i[2]=0;i[3]=1;return i}n.cross(t,r,a);i[0]=t[0];i[1]=t[1];i[2]=t[2];i[3]=1+l;return s.normalize(i,i)}}();s.setAxes=function(){var t=r.create();return function(e,o,i,r){t[0]=i[0];t[3]=i[1];t[6]=i[2];t[1]=r[0];t[4]=r[1];t[7]=r[2];t[2]=-o[0];t[5]=-o[1];t[8]=-o[2];return s.normalize(e,s.fromMat3(e,t))}}();s.clone=a.clone;s.fromValues=a.fromValues;s.copy=a.copy;s.set=a.set;s.identity=function(t){t[0]=0;t[1]=0;t[2]=0;t[3]=1;return t};s.setAxisAngle=function(t,e,o){o*=.5;var i=Math.sin(o);t[0]=i*e[0];t[1]=i*e[1];t[2]=i*e[2];t[3]=Math.cos(o);return t};s.getAxisAngle=function(t,e){var o=2*Math.acos(e[3]),i=Math.sin(o/2);if(0!=i){t[0]=e[0]/i;t[1]=e[1]/i;t[2]=e[2]/i}else{t[0]=1;t[1]=0;t[2]=0}return o};s.add=a.add;s.multiply=function(t,e,o){var i=e[0],r=e[1],n=e[2],a=e[3],s=o[0],l=o[1],d=o[2],c=o[3];t[0]=i*c+a*s+r*d-n*l;t[1]=r*c+a*l+n*s-i*d;t[2]=n*c+a*d+i*l-r*s;t[3]=a*c-i*s-r*l-n*d;return t};s.mul=s.multiply;s.scale=a.scale;s.rotateX=function(t,e,o){o*=.5;var i=e[0],r=e[1],n=e[2],a=e[3],s=Math.sin(o),l=Math.cos(o);t[0]=i*l+a*s;t[1]=r*l+n*s;t[2]=n*l-r*s;t[3]=a*l-i*s;return t};s.rotateY=function(t,e,o){o*=.5;var i=e[0],r=e[1],n=e[2],a=e[3],s=Math.sin(o),l=Math.cos(o);t[0]=i*l-n*s;t[1]=r*l+a*s;t[2]=n*l+i*s;t[3]=a*l-r*s;return t};s.rotateZ=function(t,e,o){o*=.5;var i=e[0],r=e[1],n=e[2],a=e[3],s=Math.sin(o),l=Math.cos(o);t[0]=i*l+r*s;t[1]=r*l-i*s;t[2]=n*l+a*s;t[3]=a*l-n*s;return t};s.calculateW=function(t,e){var o=e[0],i=e[1],r=e[2];t[0]=o;t[1]=i;t[2]=r;t[3]=Math.sqrt(Math.abs(1-o*o-i*i-r*r));return t};s.dot=a.dot;s.lerp=a.lerp;s.slerp=function(t,e,o,i){var r,n,a,s,l,d=e[0],c=e[1],u=e[2],h=e[3],p=o[0],f=o[1],g=o[2],m=o[3];n=d*p+c*f+u*g+h*m;if(n<0){n=-n;p=-p;f=-f;g=-g;m=-m}if(1-n>1e-6){r=Math.acos(n);a=Math.sin(r);s=Math.sin((1-i)*r)/a;l=Math.sin(i*r)/a}else{s=1-i;l=i}t[0]=s*d+l*p;t[1]=s*c+l*f;t[2]=s*u+l*g;t[3]=s*h+l*m;return t};s.sqlerp=function(){var t=s.create(),e=s.create();return function(o,i,r,n,a,l){s.slerp(t,i,a,l);s.slerp(e,r,n,l);s.slerp(o,t,e,2*l*(1-l));return o}}();s.invert=function(t,e){var o=e[0],i=e[1],r=e[2],n=e[3],a=o*o+i*i+r*r+n*n,s=a?1/a:0;t[0]=-o*s;t[1]=-i*s;t[2]=-r*s;t[3]=n*s;return t};s.conjugate=function(t,e){t[0]=-e[0];t[1]=-e[1];t[2]=-e[2];t[3]=e[3];return t};s.length=a.length;s.len=s.length;s.squaredLength=a.squaredLength;s.sqrLen=s.squaredLength;s.normalize=a.normalize;s.fromMat3=function(t,e){var o,i=e[0]+e[4]+e[8];if(i>0){o=Math.sqrt(i+1);t[3]=.5*o;o=.5/o;t[0]=(e[5]-e[7])*o;t[1]=(e[6]-e[2])*o;t[2]=(e[1]-e[3])*o}else{var r=0;e[4]>e[0]&&(r=1);e[8]>e[3*r+r]&&(r=2);var n=(r+1)%3,a=(r+2)%3;o=Math.sqrt(e[3*r+r]-e[3*n+n]-e[3*a+a]+1);t[r]=.5*o;o=.5/o;t[3]=(e[3*n+a]-e[3*a+n])*o;t[n]=(e[3*n+r]+e[3*r+n])*o;t[a]=(e[3*a+r]+e[3*r+a])*o}return t};s.str=function(t){return"quat("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+")"};s.exactEquals=a.exactEquals;s.equals=a.equals;t.exports=s},function(t,e,o){var i=o(7),r={};r.create=function(){var t=new i.ARRAY_TYPE(2);t[0]=0;t[1]=0;return t};r.clone=function(t){var e=new i.ARRAY_TYPE(2);e[0]=t[0];e[1]=t[1];return e};r.fromValues=function(t,e){var o=new i.ARRAY_TYPE(2);o[0]=t;o[1]=e;return o};r.copy=function(t,e){t[0]=e[0];t[1]=e[1];return t};r.set=function(t,e,o){t[0]=e;t[1]=o;return t};r.add=function(t,e,o){t[0]=e[0]+o[0];t[1]=e[1]+o[1];return t};r.subtract=function(t,e,o){t[0]=e[0]-o[0];t[1]=e[1]-o[1];return t};r.sub=r.subtract;r.multiply=function(t,e,o){t[0]=e[0]*o[0];t[1]=e[1]*o[1];return t};r.mul=r.multiply;r.divide=function(t,e,o){t[0]=e[0]/o[0];t[1]=e[1]/o[1];return t};r.div=r.divide;r.ceil=function(t,e){t[0]=Math.ceil(e[0]);t[1]=Math.ceil(e[1]);return t};r.floor=function(t,e){t[0]=Math.floor(e[0]);t[1]=Math.floor(e[1]);return t};r.min=function(t,e,o){t[0]=Math.min(e[0],o[0]);t[1]=Math.min(e[1],o[1]);return t};r.max=function(t,e,o){t[0]=Math.max(e[0],o[0]);t[1]=Math.max(e[1],o[1]);return t};r.round=function(t,e){t[0]=Math.round(e[0]);t[1]=Math.round(e[1]);return t};r.scale=function(t,e,o){t[0]=e[0]*o;t[1]=e[1]*o;return t};r.scaleAndAdd=function(t,e,o,i){t[0]=e[0]+o[0]*i;t[1]=e[1]+o[1]*i;return t};r.distance=function(t,e){var o=e[0]-t[0],i=e[1]-t[1];return Math.sqrt(o*o+i*i)};r.dist=r.distance;r.squaredDistance=function(t,e){var o=e[0]-t[0],i=e[1]-t[1];return o*o+i*i};r.sqrDist=r.squaredDistance;r.length=function(t){var e=t[0],o=t[1];return Math.sqrt(e*e+o*o)};r.len=r.length;r.squaredLength=function(t){var e=t[0],o=t[1];return e*e+o*o};r.sqrLen=r.squaredLength;r.negate=function(t,e){t[0]=-e[0];t[1]=-e[1];return t};r.inverse=function(t,e){t[0]=1/e[0];t[1]=1/e[1];return t};r.normalize=function(t,e){var o=e[0],i=e[1],r=o*o+i*i;if(r>0){r=1/Math.sqrt(r);t[0]=e[0]*r;t[1]=e[1]*r}return t};r.dot=function(t,e){return t[0]*e[0]+t[1]*e[1]};r.cross=function(t,e,o){var i=e[0]*o[1]-e[1]*o[0];t[0]=t[1]=0;t[2]=i;return t};r.lerp=function(t,e,o,i){var r=e[0],n=e[1];t[0]=r+i*(o[0]-r);t[1]=n+i*(o[1]-n);return t};r.random=function(t,e){e=e||1;var o=2*i.RANDOM()*Math.PI;t[0]=Math.cos(o)*e;t[1]=Math.sin(o)*e;return t};r.transformMat2=function(t,e,o){var i=e[0],r=e[1];t[0]=o[0]*i+o[2]*r;t[1]=o[1]*i+o[3]*r;return t};r.transformMat2d=function(t,e,o){var i=e[0],r=e[1];t[0]=o[0]*i+o[2]*r+o[4];t[1]=o[1]*i+o[3]*r+o[5];return t};r.transformMat3=function(t,e,o){var i=e[0],r=e[1];t[0]=o[0]*i+o[3]*r+o[6];t[1]=o[1]*i+o[4]*r+o[7];return t};r.transformMat4=function(t,e,o){var i=e[0],r=e[1];t[0]=o[0]*i+o[4]*r+o[12];t[1]=o[1]*i+o[5]*r+o[13];return t};r.forEach=function(){var t=r.create();return function(e,o,i,r,n,a){var s,l;o||(o=2);i||(i=0);l=r?Math.min(r*o+i,e.length):e.length;for(s=i;s<l;s+=o){t[0]=e[s];t[1]=e[s+1];n(t,t,a);e[s]=t[0];e[s+1]=t[1]}return e}}();r.str=function(t){return"vec2("+t[0]+", "+t[1]+")"};r.exactEquals=function(t,e){return t[0]===e[0]&&t[1]===e[1]};r.equals=function(t,e){var o=t[0],r=t[1],n=e[0],a=e[1];return Math.abs(o-n)<=i.EPSILON*Math.max(1,Math.abs(o),Math.abs(n))&&Math.abs(r-a)<=i.EPSILON*Math.max(1,Math.abs(r),Math.abs(a))};t.exports=r},function(t,e){t.exports='<svg viewBox="0 0 256 256"><circle cx="1535.31" cy="258.69" r="35.87" fill-opacity=".25" transform="translate(-5350.88 -795.164) scale(3.5686)"/><path fill="#fff" d="M128 238.05c-1.76 0-3.53-.04-5.43-.13-29.9-1.46-58.33-15.4-77.98-38.25-2.4-2.77-4.7-5.68-6.8-8.66C25.9 174 19 154.1 18 133.5c-.1-1.86-.14-3.68-.14-5.42 0-1.73.05-3.56.14-5.42 1.03-21 8.06-41.2 20.35-58.4 2.13-2.97 4.43-5.86 6.82-8.6 19.9-22.7 47.36-36.02 77.3-37.5l1.44-.05v.2c1.4-.12 2.7-.2 4-.2 1.3 0 2.6.07 4 .23V18l1.4.08c30 1.46 57.5 14.78 77.4 37.48 2.4 2.74 4.7 5.63 6.83 8.6 12.3 17.2 19.33 37.4 20.36 58.4.1 1.87.1 3.7.1 5.44 0 1.74-.05 3.56-.13 5.42-1 20.67-7.85 40.58-19.76 57.6-2.1 2.97-4.35 5.88-6.74 8.65-19.65 22.85-48.07 36.8-78 38.25-1.9.1-3.65.13-5.4.13zm6.7-14.45c13.04-3.95 25.17-19.46 32.87-42.1-10.48-2.42-21.53-3.85-32.86-4.26v46.36zm-46.27-42.1c7.7 22.64 19.82 38.15 32.86 42.1v-46.36c-11.4.4-22.4 1.84-32.9 4.27zm92.27 3.7c-4.23 12.72-9.9 23.8-16.6 32.4a97.18 97.18 0 0 0 35.16-24.44c-5.53-3.03-11.76-5.7-18.56-7.96zm-123.96 7.96c9.78 10.68 21.82 19.05 35.16 24.44-6.7-8.6-12.38-19.68-16.6-32.4-6.8 2.26-13.03 4.93-18.56 7.96zm164.44-39.64h-33.43c-.8 6.36-1.93 12.56-3.34 18.56 8.7 2.82 16.6 6.27 23.4 10.28 6.1-8.86 10.6-18.6 13.4-28.84zm-152.94 0H34.82c2.8 10.23 7.3 19.98 13.36 28.84 6.9-4 14.76-7.46 23.4-10.28-1.4-6-2.53-12.2-3.34-18.56zm105.9 0H134.7v10.28c12.73.4 25.04 1.97 36.62 4.65 1.16-4.85 2.1-9.84 2.82-14.93zm-52.85 0H81.8c.73 5.1 1.67 10.08 2.83 14.93 11.58-2.68 23.88-4.25 36.6-4.65v-10.28zm-53.1-51.05c.8-6.77 2-13.36 3.6-19.72-8.4-2.75-16.2-6.1-23-10.02-6.4 9.1-11.1 19.17-14 29.74h33.4zm53 0V90.94c-12.67-.4-24.88-1.94-36.3-4.6-1.3 5.26-2.38 10.64-3.1 16.13h39.4zm52.8 0c-.78-5.5-1.83-10.87-3.1-16.12-11.5 2.65-23.7 4.2-36.33 4.6v11.52H174zm47.04 0a95.774 95.774 0 0 0-14-29.74c-6.8 3.9-14.56 7.27-23.05 10.02 1.55 6.36 2.76 12.95 3.63 19.72h33.4zM134.7 77.5c11.2-.4 22.1-1.8 32.47-4.2-7.7-21.95-19.68-37.02-32.46-40.9v45.1zm-45.87-4.2c10.37 2.4 21.3 3.8 32.46 4.2V32.4c-12.8 3.88-24.8 18.95-32.5 40.9zm75.27-34.9c6.5 8.36 12.06 19.04 16.23 31.27 6.64-2.2 12.74-4.77 18.17-7.67a97.124 97.124 0 0 0-34.4-23.6zM57.5 62c5.43 2.9 11.52 5.48 18.17 7.67 4.17-12.23 9.72-22.9 16.23-31.27-13 5.26-24.8 13.33-34.4 23.6z"/></svg>'},function(t,e){t.exports='<svg width="96" height="24" fill-rule="evenodd" stroke-linejoin="round" stroke-miterlimit="1.414" clip-rule="evenodd" viewBox="0 0 128 32"><path fill-opacity=".298" d="M120.368 28.943c-.464 1.503-1.606 2.72-3.108 2.72H2.766c-1.502 0-3.208-1.217-2.72-2.72L9.11 3.02C9.758.923 10.557.3 12.06.3h113.18a2.72 2.72 0 0 1 2.72 2.72l-7.592 25.923z"/><path fill="#fff" d="M20.303 23.29c-.05.13-.11.238-.178.32a.678.678 0 0 1-.32.185c-.14.042-.33.07-.573.08-.24.01-.552.018-.938.018-.31 0-.573-.003-.793-.007-.21-.004-.4-.014-.55-.03a1.754 1.754 0 0 1-.37-.068.73.73 0 0 1-.23-.117c-.06-.04-.1-.1-.13-.16s-.05-.15-.07-.25l-3.3-13.27c-.06-.27-.1-.49-.11-.66 0-.16.05-.28.15-.36.11-.08.28-.13.51-.15.24-.02.56-.03.98-.03.36 0 .64.01.83.02.2.02.36.05.46.08.11.04.18.1.21.18.04.08.07.18.1.29L18.6 20.9h.012l4.58-11.49c.04-.13.09-.23.145-.31.05-.08.137-.14.254-.19.12-.04.28-.07.49-.09.21-.01.5-.02.86-.02s.63.01.83.03c.2.03.33.08.39.17.07.09.08.218.04.38s-.12.377-.24.647L20.31 23.29zm7.95.114a.361.361 0 0 1-.094.21.608.608 0 0 1-.27.15c-.12.04-.28.07-.47.093-.2.024-.45.036-.75.036s-.54-.012-.74-.036c-.2-.022-.35-.054-.46-.093a.45.45 0 0 1-.24-.15.263.263 0 0 1-.06-.21l1.23-14.14c0-.077.04-.145.09-.208.05-.06.14-.112.27-.15.12-.038.28-.07.47-.094.19-.022.44-.033.73-.033.3 0 .54.01.73.03.19.02.34.05.45.09.114.04.19.09.24.15.044.06.064.13.06.21l-1.2 14.14zM39.78 16.22a7.37 7.37 0 0 0-.076-1.978 3.855 3.855 0 0 0-.66-1.587 3.275 3.275 0 0 0-1.32-1.046c-.553-.26-1.296-.38-2.23-.38h-1.538l-.89 10.18h1.583c.83 0 1.54-.11 2.13-.33a3.95 3.95 0 0 0 1.51-.98c.42-.44.75-.98.99-1.63.24-.65.4-1.41.48-2.27zm3.156-.105c-.12 1.373-.403 2.55-.846 3.524-.445.97-1.03 1.77-1.754 2.38-.725.62-1.58 1.07-2.567 1.36-.99.29-2.15.43-3.47.43h-3.58c-.26 0-.47-.08-.63-.23-.16-.15-.23-.4-.2-.74L31.03 9.8c.03-.34.14-.583.326-.734a1.02 1.02 0 0 1 .662-.223h3.84c1.335 0 2.452.153 3.354.465.9.312 1.643.775 2.23 1.39.58.613 1 1.37 1.25 2.273.253.9.33 1.95.223 3.14zm9.15 6.515c-.02.225-.047.412-.08.562-.032.152-.07.273-.118.365a.532.532 0 0 1-.163.202.349.349 0 0 1-.197.06h-7.52a.88.88 0 0 1-.624-.23c-.16-.15-.225-.4-.196-.74l1.14-13.05c.03-.34.14-.59.327-.74.187-.15.408-.23.662-.23h7.476c.07 0 .13.02.18.06.05.04.09.1.12.2.032.09.05.22.055.37.005.15 0 .34-.02.57-.02.21-.046.4-.078.55-.03.15-.072.27-.12.36a.508.508 0 0 1-.156.2.323.323 0 0 1-.19.06h-5.346l-.32 3.66h4.524c.07 0 .133.02.186.06.055.04.096.11.127.2.032.09.05.21.056.36.01.15 0 .33-.01.55-.02.22-.04.41-.08.55-.03.14-.07.26-.11.35-.05.08-.1.15-.16.19a.32.32 0 0 1-.19.05h-4.53l-.37 4.22h5.4c.07 0 .13.02.19.06.06.04.1.11.13.2.03.09.05.21.06.36.01.15 0 .34-.01.56z"/><path fill="#DADADA" d="M81.01 22.408a1.209 1.209 0 0 1-.417.82 1.05 1.05 0 0 1-.386.203c-.148.05-.294.07-.44.07H78.47c-.268 0-.5-.03-.692-.08a1.21 1.21 0 0 1-.518-.29 2.153 2.153 0 0 1-.43-.58 8.739 8.739 0 0 1-.437-.94l-3.113-7c-.18-.41-.36-.86-.542-1.35-.18-.48-.342-.95-.48-1.4h-.023c-.018.56-.044 1.11-.076 1.66-.04.55-.08 1.12-.13 1.71l-.69 7.84c-.01.08-.03.15-.08.21-.05.07-.13.12-.24.16-.11.05-.25.08-.43.1-.18.02-.41.04-.69.04-.27 0-.49-.01-.67-.03-.18-.02-.32-.05-.41-.1a.406.406 0 0 1-.2-.15c-.04-.06-.05-.13-.04-.21L69.76 9.6c.034-.368.164-.64.39-.82.23-.18.497-.27.806-.27h1.63c.295 0 .54.024.735.073.2.053.37.135.52.25.15.118.28.278.4.48.12.207.24.46.37.76l2.44 5.474c.15.33.28.658.42.977.14.32.27.64.4.96.13.32.25.635.37.944.12.31.24.61.35.92h.02a66.734 66.734 0 0 1 .22-3.368l.62-7.026a.423.423 0 0 1 .09-.21c.05-.06.13-.11.25-.16.12-.047.26-.08.44-.1.18-.02.41-.03.69-.03.26 0 .48.01.66.03.18.02.31.05.4.1.09.046.16.1.19.16.04.064.05.13.04.21L81 22.414zm12.444-6.436c.07-.787.07-1.503.003-2.147-.068-.643-.23-1.195-.485-1.654a2.705 2.705 0 0 0-1.094-1.06c-.47-.25-1.078-.37-1.82-.37-.748 0-1.385.14-1.91.42-.525.29-.965.66-1.314 1.13-.35.48-.615 1.03-.8 1.65-.18.63-.302 1.3-.363 2-.07.82-.07 1.56 0 2.21.07.65.23 1.21.48 1.67.25.47.62.82 1.09 1.06.47.24 1.09.37 1.83.37s1.39-.14 1.91-.41c.53-.28.97-.65 1.32-1.13.35-.48.62-1.03.8-1.67.18-.63.31-1.31.37-2.03zm3.208-.162c-.108 1.243-.36 2.353-.756 3.334-.392.978-.924 1.812-1.594 2.492a6.692 6.692 0 0 1-2.4 1.565c-.93.36-1.984.54-3.163.54-1.17 0-2.18-.15-3.02-.45-.84-.3-1.53-.77-2.05-1.39-.53-.62-.89-1.42-1.1-2.38-.21-.96-.25-2.1-.14-3.42.1-1.21.35-2.3.74-3.27.39-.97.92-1.79 1.59-2.47a6.65 6.65 0 0 1 2.4-1.56c.92-.36 1.98-.54 3.17-.54 1.13 0 2.12.15 2.96.45.84.31 1.52.77 2.05 1.4.52.62.89 1.41 1.11 2.36.21.96.26 2.08.15 3.38zm15.77 6.886c-.06.184-.14.334-.23.445-.09.12-.22.2-.386.26s-.378.1-.634.12c-.257.02-.582.03-.977.03-.44 0-.79-.01-1.055-.02-.263-.02-.47-.06-.62-.11-.15-.06-.254-.14-.314-.25-.058-.11-.1-.26-.124-.44l-1.565-9.49h-.022l-3.1 9.49c-.052.18-.12.33-.198.44a.77.77 0 0 1-.353.26c-.155.06-.363.11-.623.13-.26.02-.6.03-1.02.03-.44 0-.8-.01-1.07-.03-.26-.02-.47-.06-.61-.12a.57.57 0 0 1-.31-.25c-.06-.11-.1-.26-.13-.44l-2.28-13.1a3.37 3.37 0 0 1-.05-.65c0-.15.06-.28.16-.36.1-.08.27-.13.49-.15.22-.02.53-.03.92-.03.36 0 .65.006.86.018.21.014.37.04.48.08.11.04.18.106.21.185.03.08.05.193.06.34l1.63 11.47h.01l3.72-11.39c.04-.15.09-.27.15-.36a.557.557 0 0 1 .278-.215c.12-.05.29-.086.5-.1.21-.02.483-.03.83-.03.37 0 .665.004.884.02.22.014.38.05.5.1.11.05.19.12.24.212.04.09.07.21.09.37l1.83 11.38h.02l3.63-11.43c.03-.12.07-.23.11-.315.04-.09.12-.16.236-.21.11-.05.27-.09.47-.11.2-.02.48-.03.843-.03.34 0 .607.01.79.03.19.01.32.07.4.15.08.08.107.21.077.37s-.085.39-.18.67l-4.58 13.03zM59.99 19.37l.61-7.003 3.883 3.5-4.494 3.502z"/><path fill="#fff" d="M67.66 16.702c-.128 1.026-.36 1.957-.698 2.793-.393.98-.925 1.812-1.595 2.492a6.692 6.692 0 0 1-2.4 1.565c-.93.356-1.984.536-3.163.536-1.166 0-2.17-.15-3.013-.457-.83-.3-1.52-.76-2.04-1.39-.52-.62-.88-1.42-1.09-2.38-.21-.96-.25-2.1-.13-3.42.11-1.21.36-2.3.75-3.27.4-.96.93-1.79 1.6-2.47.67-.68 1.47-1.2 2.4-1.56.93-.36 1.99-.54 3.18-.54 1.14 0 2.12.15 2.97.45.85.3 1.53.77 2.06 1.39.53.63.9 1.42 1.11 2.37.19.85.25 1.84.18 2.97l-3.94-3.56c-.23-.3-.52-.54-.87-.73-.47-.25-1.07-.37-1.82-.37-.74 0-1.38.14-1.91.42-.52.29-.96.66-1.31 1.13-.35.47-.61 1.02-.8 1.65-.18.63-.3 1.3-.36 2-.07.82-.07 1.56-.01 2.21.07.65.23 1.21.48 1.67.26.47.62.82 1.09 1.06.47.25 1.09.37 1.83.37s1.39-.14 1.91-.42c.1-.05.2-.1.29-.16v.04l5.36-4.34z"/></svg>'},function(t,e){t.exports='<style>@keyframes videonow-pull{0%,10%,30%,to{transform:translateY(0);-webkit-transform:translateY(0)}20%{transform:translateY(2px);-webkit-transform:translateY(2px)}}</style><svg style="animation:videonow-pull 1s infinite" width="64" height="24" viewBox="0 0 64 10"><path fill="none" stroke="#fff" stroke-width="2.001" d="M.996 2.99L32.39 14.74M63 2.99L31.606 14.74"/></svg>'},function(t,e){t.exports='<svg viewBox="0 0 64 64"><path fill="#333" d="M23.817 49V17L50 33 23.817 49z"/></svg>'},function(t,e){t.exports='<svg width="25" height="25" viewBox="0 0 64 64"><path fill-opacity=".298" d="M64.055 16c0-8.832-7.173-16-16.017-16h-31.99C7.204 0 .03 7.167.03 16v32c0 8.83 7.174 16 16.018 16h31.99c8.844 0 16.017-7.17 16.017-16V16z"/><path fill="#fff" d="M32.605 27.734L47.91 12.427l3.62 3.62L36.223 31.35 51.53 46.66l-3.62 3.617L32.606 34.97 17.298 50.278 13.68 46.66l15.306-15.31L13.68 16.046l3.618-3.62 15.307 15.308z"/></svg>'},function(t,e,o){"use strict";(function(t){function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function n(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}});e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}function a(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"=",o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:" ";return t.reduce(function(t,o){var i=Object.keys(o)[0],r=o[i];r&&t.push(""+i+e+r);return t},[]).join(o)}var s=o(2),l=o(1),d=o(3),c=o(38),u=o.n(c),h=o(39),p=o.n(h),f=o(5),g=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var o=arguments[e];for(var i in o)Object.prototype.hasOwnProperty.call(o,i)&&(t[i]=o[i])}return t},m="logo",v=function(e){function o(n){i(this,o);var c=r(this,e.call(this,m,n)),h=n.O("wrapper"),f=n.M(m,"customerlogo")||{},v=f.logoSrc,b=f.logoHeight,y=f.logoWidth,A=v&&"<img src='"+v+"' "+a([{width:y},{height:b}])+">",w=n.Jt(m,"css"),_=Object(s.b)(h,"div",g({position:"absolute",zIndex:1,bottom:0,left:0,padding:"5px",cursor:"pointer"},w),A||n.M(m,"content")||""+u.a+p.a,l.v.bind(c,t.HOME_URL));if(!A)if(d.f){_.firstElementChild.style.display="none";_.lastElementChild.style.display=""}else{_.lastElementChild.style.display="none";_.firstElementChild.style.display="";c.Y(_,"mouseenter",function(){_.firstElementChild.style.display="none";_.lastElementChild.style.display=""});c.Y(_,"mouseleave",function(){_.lastElementChild.style.display="none";_.firstElementChild.style.display=""})}n.Qt(m,{node:_});return c}n(o,e);o.getName=function(){return m};return o}(f.a);e.a=v}).call(e,o(37))},function(t,e){var o;o=function(){return this}();try{o=o||Function("return this")()||(0,eval)("this")}catch(t){"object"==typeof window&&(o=window)}t.exports=o},function(t,e){t.exports='<svg width="60" height="20" fill-rule="evenodd" stroke-linejoin="round" stroke-miterlimit="1.414" clip-rule="evenodd" viewBox="0 0 60 20"><path fill="#aaa" d="M54.205 15.227c-.203.658-.703 1.19-1.36 1.19H2.697c-1.196 0-1.467-.5-1.192-1.19l3.97-11.354c.284-.918.634-1.19 1.292-1.19H56.34c1.183 0 1.337.598 1.19 1.19l-3.325 11.354z"/><path fill="#fff" d="M10.38 12.75a.496.496 0 0 1-.08.14.279.279 0 0 1-.14.082c-.06.018-.144.03-.25.035a8.882 8.882 0 0 1-.41.008c-.136 0-.252 0-.348-.003A3.677 3.677 0 0 1 8.907 13a.966.966 0 0 1-.162-.03.349.349 0 0 1-.102-.052.183.183 0 0 1-.06-.073.641.641 0 0 1-.032-.11L7.11 6.923a1.613 1.613 0 0 1-.05-.29c0-.07.02-.123.066-.158a.413.413 0 0 1 .22-.065c.104-.01.246-.015.428-.015.156 0 .277.004.364.01a.84.84 0 0 1 .2.036c.046.02.077.05.09.08a.79.79 0 0 1 .044.13l1.154 5.06h.005l2.01-5.03c.02-.05.04-.1.07-.14.03-.03.06-.06.11-.08.05-.02.13-.03.22-.04.09 0 .22-.01.38-.01s.28.01.36.02c.09.01.15.04.18.08s.03.09.02.16c-.02.07-.05.17-.1.28l-2.47 5.82zm3.48.05a.149.149 0 0 1-.04.092.24.24 0 0 1-.115.067c-.053.01-.122.03-.206.04-.09.01-.2.01-.33.01s-.24-.01-.32-.02c-.09-.01-.16-.03-.2-.04-.05-.02-.09-.04-.11-.07a.161.161 0 0 1-.03-.09l.54-6.19c0-.04.01-.07.04-.09.02-.03.06-.05.11-.07.05-.02.12-.03.21-.04.08-.01.19-.02.32-.02s.24 0 .32.01c.08.01.15.02.2.04.05.01.08.04.1.06.02.02.02.05.02.09l-.54 6.19zm5.05-3.145c.027-.31.015-.6-.034-.867a1.683 1.683 0 0 0-.29-.695 1.427 1.427 0 0 0-.577-.458c-.25-.11-.57-.165-.98-.165h-.68l-.39 4.46h.69c.36 0 .67-.047.93-.142.26-.094.48-.237.66-.428.18-.19.33-.43.43-.712.11-.283.18-.615.21-.993zm1.382-.046c-.053.6-.177 1.11-.37 1.54-.196.43-.452.77-.77 1.04-.317.27-.69.47-1.123.59-.44.12-.94.19-1.52.19h-1.57c-.12 0-.21-.04-.28-.1-.07-.07-.1-.18-.09-.32l.5-5.72c.01-.15.06-.26.14-.33.08-.07.18-.1.29-.1h1.69c.58 0 1.07.07 1.47.2.39.13.72.34.97.61.25.26.44.6.55.99.11.39.14.85.09 1.37zm4.008 2.85c-.01.09-.02.18-.036.24a.683.683 0 0 1-.052.16.256.256 0 0 1-.07.09c-.028.02-.056.02-.087.02H20.76c-.11 0-.202-.04-.272-.1s-.1-.18-.086-.33l.5-5.72c.013-.15.06-.26.143-.33.082-.07.178-.1.29-.1h3.274c.03 0 .05 0 .07.02.02.02.04.05.05.09.01.04.02.09.02.16s0 .15-.01.25c-.01.09-.02.17-.04.24-.01.07-.03.12-.05.16-.02.04-.05.07-.07.09-.03.02-.05.03-.08.03h-2.34l-.14 1.6H24c.03 0 .06.01.083.03.02.02.04.05.052.09.012.04.02.09.023.15 0 .06 0 .14-.01.24-.005.09-.02.18-.03.24a.691.691 0 0 1-.05.15c-.02.04-.045.07-.07.08-.03.01-.057.02-.09.02h-1.98l-.16 1.85h2.36c.03 0 .06.01.085.03.023.02.042.05.055.09.02.04.027.09.03.16.002.06 0 .15-.01.24z"/><path fill="#eee" d="M36.967 12.52a.531.531 0 0 1-.182.358.504.504 0 0 1-.17.09.706.706 0 0 1-.192.027h-.568c-.118 0-.22-.013-.303-.036-.085-.03-.16-.07-.227-.13s-.13-.15-.188-.26c-.06-.11-.122-.25-.192-.42l-1.363-3.06a12.01 12.01 0 0 1-.448-1.21h-.01c-.008.24-.02.48-.033.72-.01.25-.03.49-.05.75l-.3 3.43c0 .04-.01.07-.03.09-.02.03-.05.05-.1.07a.64.64 0 0 1-.19.05c-.07.01-.17.01-.3.01-.11 0-.21-.01-.29-.02a.655.655 0 0 1-.18-.05c-.04-.02-.07-.04-.08-.07-.01-.03-.02-.06-.01-.09l.52-5.9c.01-.16.07-.28.17-.36.1-.08.22-.12.35-.12h.72c.13 0 .24.01.32.03.09.02.16.06.23.11s.13.12.18.21c.06.09.11.2.16.33l1.07 2.39.18.42.18.42.17.41.15.41h.01c.01-.24.03-.49.04-.74.02-.26.04-.51.06-.74l.27-3.07a.3.3 0 0 1 .04-.1c.03-.03.06-.05.11-.07a.83.83 0 0 1 .2-.05c.08-.01.18-.01.3-.01.11 0 .21 0 .29.01.08.01.13.02.17.04.04.02.07.04.09.07.018.03.02.06.02.09l-.516 5.9zm5.45-2.82c.03-.345.032-.658.002-.94a1.925 1.925 0 0 0-.22-.725c-.11-.2-.27-.356-.48-.466-.21-.11-.47-.17-.8-.17-.33 0-.61.06-.84.18-.23.12-.43.28-.58.49-.16.2-.27.45-.35.72-.08.27-.14.56-.16.87-.03.36-.03.68-.01.96.03.28.1.53.21.73.11.2.27.35.47.46.21.1.47.16.8.16.33 0 .61-.06.84-.19.23-.12.42-.29.57-.5.15-.21.27-.46.35-.74.08-.28.13-.58.16-.89zm1.406-.07a5.071 5.071 0 0 1-.332 1.46c-.17.428-.4.793-.69 1.09-.29.3-.64.528-1.05.686-.41.156-.87.235-1.38.235-.51 0-.95-.06-1.32-.2-.36-.13-.66-.33-.89-.61-.23-.27-.39-.62-.47-1.04-.09-.42-.11-.92-.06-1.5.05-.53.16-1.01.33-1.43.18-.42.41-.78.7-1.08.3-.3.65-.52 1.05-.68.41-.16.87-.24 1.4-.24.5 0 .93.07 1.3.2s.67.34.9.61c.23.27.39.62.49 1.04.1.42.12.91.07 1.48zm6.907 3.015a.624.624 0 0 1-.1.195.35.35 0 0 1-.17.11 1.064 1.064 0 0 1-.278.053 7.818 7.818 0 0 1-.89 0 1.015 1.015 0 0 1-.272-.052.226.226 0 0 1-.137-.11.551.551 0 0 1-.054-.19l-.69-4.15h-.01l-1.36 4.16c-.03.08-.05.14-.09.19-.04.05-.09.09-.16.12s-.16.05-.28.05c-.12.01-.27.02-.45.02-.2 0-.36 0-.47-.01a.809.809 0 0 1-.27-.05.227.227 0 0 1-.14-.11.473.473 0 0 1-.06-.19l-.99-5.72c-.02-.12-.03-.21-.03-.28 0-.07.02-.12.07-.16.04-.04.11-.06.21-.07.1-.01.23-.01.4-.01.16 0 .28.01.38.01.09.01.16.02.2.04.04.02.07.05.09.08.01.04.02.09.02.15l.71 5.02 1.63-4.98c.02-.07.04-.12.07-.16.02-.04.06-.07.12-.09.05-.02.12-.04.22-.04.09-.01.21-.016.36-.016.16 0 .29 0 .38.01.09.007.17.02.22.04.05.02.08.057.1.098.02.04.03.1.04.168l.8 4.987h.01l1.59-5.01c.01-.06.03-.1.05-.14.02-.04.06-.07.11-.09.05-.03.12-.04.21-.05.08-.01.21-.01.37-.01.15 0 .26.01.34.017.08.01.14.03.17.07.04.034.05.09.032.16-.01.078-.034.17-.08.3l-1.99 5.7zm-22.97-1.457l.27-3.067 1.7 1.54-1.97 1.54z"/><path fill="#fff" d="M31.12 9.866c-.055.45-.157.857-.305 1.223-.172.42-.405.79-.698 1.09-.294.3-.644.52-1.052.68-.407.15-.87.23-1.385.23-.51 0-.95-.07-1.32-.2a2.155 2.155 0 0 1-.896-.61 2.37 2.37 0 0 1-.478-1.05c-.09-.42-.11-.92-.06-1.5.048-.53.156-1.01.328-1.43.173-.43.406-.79.698-1.08.293-.3.643-.53 1.05-.69.408-.16.872-.24 1.393-.24.497 0 .93.06 1.298.19.37.13.668.33.9.61.23.27.393.61.487 1.03.083.37.11.8.08 1.3-.7-.73-1.194-1.39-2.06-1.84a1.762 1.762 0 0 0-.908-.22c-.327 0-.546.06-.775.18-.23.12-.423.29-.576.49-.15.2-.26.45-.34.72a5.111 5.111 0 0 0-.16 1.83c.03.28.1.53.21.73.11.2.27.36.48.46.21.103.48.16.8.16.33 0 .62-.05.84-.187 1.18-.707 1.41-.99 2.47-1.95z"/></svg>'},function(t,e){t.exports='<svg width="60" height="20" fill-rule="evenodd" stroke-linejoin="round" stroke-miterlimit="1.414" clip-rule="evenodd" viewBox="0 0 60 20"><path fill="#262053" d="M54.205 15.227c-.203.658-.703 1.19-1.36 1.19H2.697c-1.196 0-1.467-.5-1.192-1.19l3.97-11.354c.284-.918.634-1.19 1.292-1.19H56.34c1.183 0 1.337.598 1.19 1.19l-3.325 11.354z"/><path fill="#fff" d="M10.38 12.75a.496.496 0 0 1-.08.14.279.279 0 0 1-.14.082c-.06.018-.144.03-.25.035a8.882 8.882 0 0 1-.41.008c-.136 0-.252 0-.348-.003A3.677 3.677 0 0 1 8.907 13a.966.966 0 0 1-.162-.03.349.349 0 0 1-.102-.052.183.183 0 0 1-.06-.073.641.641 0 0 1-.032-.11L7.11 6.923a1.613 1.613 0 0 1-.05-.29c0-.07.02-.123.066-.158a.413.413 0 0 1 .22-.065c.104-.01.246-.015.428-.015.156 0 .277.004.364.01a.84.84 0 0 1 .2.036c.046.02.077.05.09.08a.79.79 0 0 1 .044.13l1.154 5.06h.005l2.01-5.03c.02-.05.04-.1.07-.14.03-.03.06-.06.11-.08.05-.02.13-.03.22-.04.09 0 .22-.01.38-.01s.28.01.36.02c.09.01.15.04.18.08s.03.09.02.16c-.02.07-.05.17-.1.28l-2.47 5.82zm3.48.05a.149.149 0 0 1-.04.092.24.24 0 0 1-.115.067c-.053.01-.122.03-.206.04-.09.01-.2.01-.33.01s-.24-.01-.32-.02c-.09-.01-.16-.03-.2-.04-.05-.02-.09-.04-.11-.07a.161.161 0 0 1-.03-.09l.54-6.19c0-.04.01-.07.04-.09.02-.03.06-.05.11-.07.05-.02.12-.03.21-.04.08-.01.19-.02.32-.02s.24 0 .32.01c.08.01.15.02.2.04.05.01.08.04.1.06.02.02.02.05.02.09l-.54 6.19zm5.05-3.145c.027-.31.015-.6-.034-.867a1.683 1.683 0 0 0-.29-.695 1.427 1.427 0 0 0-.577-.458c-.25-.11-.57-.165-.98-.165h-.68l-.39 4.46h.69c.36 0 .67-.047.93-.142.26-.094.48-.237.66-.428.18-.19.33-.43.43-.712.11-.283.18-.615.21-.993zm1.382-.046c-.053.6-.177 1.11-.37 1.54-.196.43-.452.77-.77 1.04-.317.27-.69.47-1.123.59-.44.12-.94.19-1.52.19h-1.57c-.12 0-.21-.04-.28-.1-.07-.07-.1-.18-.09-.32l.5-5.72c.01-.15.06-.26.14-.33.08-.07.18-.1.29-.1h1.69c.58 0 1.07.07 1.47.2.39.13.72.34.97.61.25.26.44.6.55.99.11.39.14.85.09 1.37zm4.008 2.85c-.01.09-.02.18-.036.24a.683.683 0 0 1-.052.16.256.256 0 0 1-.07.09c-.028.02-.056.02-.087.02H20.76c-.11 0-.202-.04-.272-.1s-.1-.18-.086-.33l.5-5.72c.013-.15.06-.26.143-.33.082-.07.178-.1.29-.1h3.274c.03 0 .05 0 .07.02.02.02.04.05.05.09.01.04.02.09.02.16s0 .15-.01.25c-.01.09-.02.17-.04.24-.01.07-.03.12-.05.16-.02.04-.05.07-.07.09-.03.02-.05.03-.08.03h-2.34l-.14 1.6H24c.03 0 .06.01.083.03.02.02.04.05.052.09.012.04.02.09.023.15 0 .06 0 .14-.01.24-.005.09-.02.18-.03.24a.691.691 0 0 1-.05.15c-.02.04-.045.07-.07.08-.03.01-.057.02-.09.02h-1.98l-.16 1.85h2.36c.03 0 .06.01.085.03.023.02.042.05.055.09.02.04.027.09.03.16.002.06 0 .15-.01.24z"/><path fill="#b1bb45" d="M36.967 12.52a.531.531 0 0 1-.182.358.504.504 0 0 1-.17.09.706.706 0 0 1-.192.027h-.568c-.118 0-.22-.013-.303-.036-.085-.03-.16-.07-.227-.13s-.13-.15-.188-.26c-.06-.11-.122-.25-.192-.42l-1.363-3.06a12.01 12.01 0 0 1-.448-1.21h-.01c-.008.24-.02.48-.033.72-.01.25-.03.49-.05.75l-.3 3.43c0 .04-.01.07-.03.09-.02.03-.05.05-.1.07a.64.64 0 0 1-.19.05c-.07.01-.17.01-.3.01-.11 0-.21-.01-.29-.02a.655.655 0 0 1-.18-.05c-.04-.02-.07-.04-.08-.07-.01-.03-.02-.06-.01-.09l.52-5.9c.01-.16.07-.28.17-.36.1-.08.22-.12.35-.12h.72c.13 0 .24.01.32.03.09.02.16.06.23.11s.13.12.18.21c.06.09.11.2.16.33l1.07 2.39.18.42.18.42.17.41.15.41h.01c.01-.24.03-.49.04-.74.02-.26.04-.51.06-.74l.27-3.07a.3.3 0 0 1 .04-.1c.03-.03.06-.05.11-.07a.83.83 0 0 1 .2-.05c.08-.01.18-.01.3-.01.11 0 .21 0 .29.01.08.01.13.02.17.04.04.02.07.04.09.07.018.03.02.06.02.09l-.516 5.9zm5.45-2.82c.03-.345.032-.658.002-.94a1.925 1.925 0 0 0-.22-.725c-.11-.2-.27-.356-.48-.466-.21-.11-.47-.17-.8-.17-.33 0-.61.06-.84.18-.23.12-.43.28-.58.49-.16.2-.27.45-.35.72-.08.27-.14.56-.16.87-.03.36-.03.68-.01.96.03.28.1.53.21.73.11.2.27.35.47.46.21.1.47.16.8.16.33 0 .61-.06.84-.19.23-.12.42-.29.57-.5.15-.21.27-.46.35-.74.08-.28.13-.58.16-.89zm1.406-.07a5.071 5.071 0 0 1-.332 1.46c-.17.428-.4.793-.69 1.09-.29.3-.64.528-1.05.686-.41.156-.87.235-1.38.235-.51 0-.95-.06-1.32-.2-.36-.13-.66-.33-.89-.61-.23-.27-.39-.62-.47-1.04-.09-.42-.11-.92-.06-1.5.05-.53.16-1.01.33-1.43.18-.42.41-.78.7-1.08.3-.3.65-.52 1.05-.68.41-.16.87-.24 1.4-.24.5 0 .93.07 1.3.2s.67.34.9.61c.23.27.39.62.49 1.04.1.42.12.91.07 1.48zm6.907 3.015a.624.624 0 0 1-.1.195.35.35 0 0 1-.17.11 1.064 1.064 0 0 1-.278.053 7.818 7.818 0 0 1-.89 0 1.015 1.015 0 0 1-.272-.052.226.226 0 0 1-.137-.11.551.551 0 0 1-.054-.19l-.69-4.15h-.01l-1.36 4.16c-.03.08-.05.14-.09.19-.04.05-.09.09-.16.12s-.16.05-.28.05c-.12.01-.27.02-.45.02-.2 0-.36 0-.47-.01a.809.809 0 0 1-.27-.05.227.227 0 0 1-.14-.11.473.473 0 0 1-.06-.19l-.99-5.72c-.02-.12-.03-.21-.03-.28 0-.07.02-.12.07-.16.04-.04.11-.06.21-.07.1-.01.23-.01.4-.01.16 0 .28.01.38.01.09.01.16.02.2.04.04.02.07.05.09.08.01.04.02.09.02.15l.71 5.02 1.63-4.98c.02-.07.04-.12.07-.16.02-.04.06-.07.12-.09.05-.02.12-.04.22-.04.09-.01.21-.016.36-.016.16 0 .29 0 .38.01.09.007.17.02.22.04.05.02.08.057.1.098.02.04.03.1.04.168l.8 4.987h.01l1.59-5.01c.01-.06.03-.1.05-.14.02-.04.06-.07.11-.09.05-.03.12-.04.21-.05.08-.01.21-.01.37-.01.15 0 .26.01.34.017.08.01.14.03.17.07.04.034.05.09.032.16-.01.078-.034.17-.08.3l-1.99 5.7zm-22.97-1.457l.27-3.067 1.7 1.54-1.97 1.54z"/><path fill="#fff" d="M31.12 9.866c-.055.45-.157.857-.305 1.223-.172.42-.405.79-.698 1.09-.294.3-.644.52-1.052.68-.407.15-.87.23-1.385.23-.51 0-.95-.07-1.32-.2a2.155 2.155 0 0 1-.896-.61 2.37 2.37 0 0 1-.478-1.05c-.09-.42-.11-.92-.06-1.5.048-.53.156-1.01.328-1.43.173-.43.406-.79.698-1.08.293-.3.643-.53 1.05-.69.408-.16.872-.24 1.393-.24.497 0 .93.06 1.298.19.37.13.668.33.9.61.23.27.393.61.487 1.03.083.37.11.8.08 1.3-.7-.73-1.194-1.39-2.06-1.84a1.762 1.762 0 0 0-.908-.22c-.327 0-.546.06-.775.18-.23.12-.423.29-.576.49-.15.2-.26.45-.34.72a5.111 5.111 0 0 0-.16 1.83c.03.28.1.53.21.73.11.2.27.36.48.46.21.103.48.16.8.16.33 0 .62-.05.84-.187 1.18-.707 1.41-.99 2.47-1.95z"/></svg>'},function(t,e){t.exports='<svg width="40" height="40" viewBox="0 0 64 64"><g fill="none" stroke-width="2"><ellipse cx="32" cy="32" fill="#000" fill-opacity=".298" rx="30" ry="30"/><path d="M38.5 39.885h13.047M26.14 52.95l13.518-13.52M26.14 12.703L39.66 26.22m-1.16-.517h12.596m-1.12-1.473v17.235M26.63 51.885v-38.22m-6.124 9.002v20.965m-5.8-24.265v28.065"/></g></svg>'},function(t,e){t.exports='<svg width="40" height="40" viewBox="0 0 64 64"><g fill="none" stroke-width="2"><ellipse cx="32" cy="32" fill="#000" fill-opacity=".298" rx="30" ry="30"/><path d="M36 39.885h13.047M23.64 52.95l13.518-13.52M23.64 12.703L37.16 26.22M36 25.703h12.596m-1.12-1.473v17.235M24.13 51.885v-38.22M11.61 53.417l41.772-41.77"/></g></svg>'},function(t,e){t.exports='<svg width="64" height="64"><circle cx="30.868" cy="31.255" r="30.066" fill="none" stroke="#fff" transform="translate(1.2 .813)"/><path fill="#fff" d="M23.817 49V17L50 33 23.817 49z"/></svg>'},function(t,e){t.exports='<svg width="50" height="50" viewBox="0 0 64 64"><ellipse cx="32" cy="32" fill="none" stroke-width="3" rx="30" ry="30"/><path stroke-width="0" d="M32.503 12.794V8.75l9 7.75-9 8.5v-4.45c-7.583-.5-13.383 5.267-13.3 11.85.083 6.583 4.083 12.65 12.3 12.6 8.217-.05 12.6-6.596 12.5-13.5l6.106-5.845c.383.61 1.384 2.437 1.392 8.245-.483 8.817-7.717 18.683-19.75 18.95-12.033.267-20.524-9.77-20.35-20.65.174-10.88 9.73-19.738 21.1-19.406z"/></svg>'},function(t,e){t.exports='<svg width="50" height="50" viewBox="0 0 64 64"><ellipse cx="32" cy="32" fill="none" stroke-width="3" rx="30" ry="30"/><path stroke-width="0" d="M17.25 24.402l7.152-7.152L32 24.848l7.598-7.598 7.152 7.152L39.152 32l7.598 7.598-7.152 7.152L32 39.152l-7.598 7.598-7.152-7.152L24.848 32l-7.598-7.598z"/></svg>'},function(t,e){t.exports='<svg width="50" height="50" viewBox="0 0 64 64"><ellipse cx="32" cy="32" fill="none" stroke-width="3" rx="30" ry="30"/><path stroke-width="0" d="M17.25 24.402l7.152-7.152L32 24.848l7.598-7.598 7.152 7.152L39.152 32l7.598 7.598-7.152 7.152L32 39.152l-7.598 7.598-7.152-7.152L24.848 32l-7.598-7.598z"/></svg>'},function(t,e,o){"use strict";(function(t){function i(e){var o=t&&t.getAPI&&t.getAPI().logger||r.b;o.trace(s+".parseVnCreativeBlock()");var i=e&&e.querySelector('Extension[type="'+a+'"]'),l=i&&Array.from(i.querySelectorAll("urls > url"));if(l&&l.length){var d=Object(n.m)(i,"global"),c=Object(n.m)(i,"important"),u=l.map(function(t){return Object(n.m)(t).split("?")[0].replace(/^(https*:)*\/\//,"").toLowerCase()});o.trace(s+" set control data "+u+" global="+d);return{urls:u,global:d,important:c}}return null}e.b=i;var r=o(0),n=o(1),a="vnCreativeBlock",s="::Extension["+a+"]";e.a=function(t){return new Promise(function(e){(t&&t.getAPI&&t.getAPI().logger||r.b).trace(""+s);var o=(t.te()||{})[a],i=o||{},n=i.urls,l=i.global,d=i.important;(n&&n.length||l||d)&&t.Qt(a,{urls:n,important:d},l);e(t)})}}).call(e,o(47)(t))},function(t,e){t.exports=function(t){if(!t.webpackPolyfill){var e=Object.create(t);e.children||(e.children=[]);Object.defineProperty(e,"loaded",{enumerable:!0,get:function(){return e.l}});Object.defineProperty(e,"id",{enumerable:!0,get:function(){return e.i}});Object.defineProperty(e,"exports",{enumerable:!0});e.webpackPolyfill=1}return e}}]);